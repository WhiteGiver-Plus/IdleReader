var Q_=Object.defineProperty;var zw=f=>{throw TypeError(f)};var Z_=(f,e,t)=>e in f?Q_(f,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):f[e]=t;var Ee=(f,e,t)=>Z_(f,typeof e!="symbol"?e+"":e,t),tm=(f,e,t)=>e.has(f)||zw("Cannot "+t);var l=(f,e,t)=>(tm(f,e,"read from private field"),t?t.call(f):e.get(f)),C=(f,e,t)=>e.has(f)?zw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(f):e.set(f,t),b=(f,e,t,i)=>(tm(f,e,"write to private field"),i?i.call(f,t):e.set(f,t),t),_=(f,e,t)=>(tm(f,e,"access private method"),t);var hn=(f,e,t,i)=>({set _(r){b(f,e,r,t)},get _(){return l(f,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function MA(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var nm={exports:{}},qc={},im={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hw;function J_(){if(Hw)return Fe;Hw=1;var f=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.iterator;function w(N){return N===null||typeof N!="object"?null:(N=v&&N[v]||N["@@iterator"],typeof N=="function"?N:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function P(N,$,ue){this.props=N,this.context=$,this.refs=E,this.updater=ue||A}P.prototype.isReactComponent={},P.prototype.setState=function(N,$){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,$,"setState")},P.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function k(){}k.prototype=P.prototype;function R(N,$,ue){this.props=N,this.context=$,this.refs=E,this.updater=ue||A}var F=R.prototype=new k;F.constructor=R,S(F,P.prototype),F.isPureReactComponent=!0;var D=Array.isArray,B=Object.prototype.hasOwnProperty,H={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function X(N,$,ue){var be,ke={},we=null,me=null;if($!=null)for(be in $.ref!==void 0&&(me=$.ref),$.key!==void 0&&(we=""+$.key),$)B.call($,be)&&!V.hasOwnProperty(be)&&(ke[be]=$[be]);var Le=arguments.length-2;if(Le===1)ke.children=ue;else if(1<Le){for(var Oe=Array(Le),Ne=0;Ne<Le;Ne++)Oe[Ne]=arguments[Ne+2];ke.children=Oe}if(N&&N.defaultProps)for(be in Le=N.defaultProps,Le)ke[be]===void 0&&(ke[be]=Le[be]);return{$$typeof:f,type:N,key:we,ref:me,props:ke,_owner:H.current}}function ee(N,$){return{$$typeof:f,type:N.type,key:$,ref:N.ref,props:N.props,_owner:N._owner}}function se(N){return typeof N=="object"&&N!==null&&N.$$typeof===f}function ie(N){var $={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ue){return $[ue]})}var ye=/\/+/g;function le(N,$){return typeof N=="object"&&N!==null&&N.key!=null?ie(""+N.key):$.toString(36)}function ce(N,$,ue,be,ke){var we=typeof N;(we==="undefined"||we==="boolean")&&(N=null);var me=!1;if(N===null)me=!0;else switch(we){case"string":case"number":me=!0;break;case"object":switch(N.$$typeof){case f:case e:me=!0}}if(me)return me=N,ke=ke(me),N=be===""?"."+le(me,0):be,D(ke)?(ue="",N!=null&&(ue=N.replace(ye,"$&/")+"/"),ce(ke,$,ue,"",function(Ne){return Ne})):ke!=null&&(se(ke)&&(ke=ee(ke,ue+(!ke.key||me&&me.key===ke.key?"":(""+ke.key).replace(ye,"$&/")+"/")+N)),$.push(ke)),1;if(me=0,be=be===""?".":be+":",D(N))for(var Le=0;Le<N.length;Le++){we=N[Le];var Oe=be+le(we,Le);me+=ce(we,$,ue,Oe,ke)}else if(Oe=w(N),typeof Oe=="function")for(N=Oe.call(N),Le=0;!(we=N.next()).done;)we=we.value,Oe=be+le(we,Le++),me+=ce(we,$,ue,Oe,ke);else if(we==="object")throw $=String(N),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return me}function ve(N,$,ue){if(N==null)return N;var be=[],ke=0;return ce(N,be,"","",function(we){return $.call(ue,we,ke++)}),be}function fe(N){if(N._status===-1){var $=N._result;$=$(),$.then(function(ue){(N._status===0||N._status===-1)&&(N._status=1,N._result=ue)},function(ue){(N._status===0||N._status===-1)&&(N._status=2,N._result=ue)}),N._status===-1&&(N._status=0,N._result=$)}if(N._status===1)return N._result.default;throw N._result}var Z={current:null},U={transition:null},G={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:U,ReactCurrentOwner:H};function W(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:ve,forEach:function(N,$,ue){ve(N,function(){$.apply(this,arguments)},ue)},count:function(N){var $=0;return ve(N,function(){$++}),$},toArray:function(N){return ve(N,function($){return $})||[]},only:function(N){if(!se(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Fe.Component=P,Fe.Fragment=t,Fe.Profiler=r,Fe.PureComponent=R,Fe.StrictMode=i,Fe.Suspense=d,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,Fe.act=W,Fe.cloneElement=function(N,$,ue){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var be=S({},N.props),ke=N.key,we=N.ref,me=N._owner;if($!=null){if($.ref!==void 0&&(we=$.ref,me=H.current),$.key!==void 0&&(ke=""+$.key),N.type&&N.type.defaultProps)var Le=N.type.defaultProps;for(Oe in $)B.call($,Oe)&&!V.hasOwnProperty(Oe)&&(be[Oe]=$[Oe]===void 0&&Le!==void 0?Le[Oe]:$[Oe])}var Oe=arguments.length-2;if(Oe===1)be.children=ue;else if(1<Oe){Le=Array(Oe);for(var Ne=0;Ne<Oe;Ne++)Le[Ne]=arguments[Ne+2];be.children=Le}return{$$typeof:f,type:N.type,key:ke,ref:we,props:be,_owner:me}},Fe.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:o,_context:N},N.Consumer=N},Fe.createElement=X,Fe.createFactory=function(N){var $=X.bind(null,N);return $.type=N,$},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(N){return{$$typeof:u,render:N}},Fe.isValidElement=se,Fe.lazy=function(N){return{$$typeof:m,_payload:{_status:-1,_result:N},_init:fe}},Fe.memo=function(N,$){return{$$typeof:p,type:N,compare:$===void 0?null:$}},Fe.startTransition=function(N){var $=U.transition;U.transition={};try{N()}finally{U.transition=$}},Fe.unstable_act=W,Fe.useCallback=function(N,$){return Z.current.useCallback(N,$)},Fe.useContext=function(N){return Z.current.useContext(N)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(N){return Z.current.useDeferredValue(N)},Fe.useEffect=function(N,$){return Z.current.useEffect(N,$)},Fe.useId=function(){return Z.current.useId()},Fe.useImperativeHandle=function(N,$,ue){return Z.current.useImperativeHandle(N,$,ue)},Fe.useInsertionEffect=function(N,$){return Z.current.useInsertionEffect(N,$)},Fe.useLayoutEffect=function(N,$){return Z.current.useLayoutEffect(N,$)},Fe.useMemo=function(N,$){return Z.current.useMemo(N,$)},Fe.useReducer=function(N,$,ue){return Z.current.useReducer(N,$,ue)},Fe.useRef=function(N){return Z.current.useRef(N)},Fe.useState=function(N){return Z.current.useState(N)},Fe.useSyncExternalStore=function(N,$,ue){return Z.current.useSyncExternalStore(N,$,ue)},Fe.useTransition=function(){return Z.current.useTransition()},Fe.version="18.3.1",Fe}var Bw;function Dy(){return Bw||(Bw=1,im.exports=J_()),im.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uw;function eS(){if(Uw)return qc;Uw=1;var f=Dy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(u,d,p){var m,v={},w=null,A=null;p!==void 0&&(w=""+p),d.key!==void 0&&(w=""+d.key),d.ref!==void 0&&(A=d.ref);for(m in d)i.call(d,m)&&!o.hasOwnProperty(m)&&(v[m]=d[m]);if(u&&u.defaultProps)for(m in d=u.defaultProps,d)v[m]===void 0&&(v[m]=d[m]);return{$$typeof:e,type:u,key:w,ref:A,props:v,_owner:r.current}}return qc.Fragment=t,qc.jsx=c,qc.jsxs=c,qc}var $w;function tS(){return $w||($w=1,nm.exports=eS()),nm.exports}var L=tS(),Q=Dy();const pm=MA(Q);var qd={},sm={exports:{}},_n={},rm={exports:{}},om={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vw;function nS(){return Vw||(Vw=1,function(f){function e(U,G){var W=U.length;U.push(G);e:for(;0<W;){var N=W-1>>>1,$=U[N];if(0<r($,G))U[N]=G,U[W]=$,W=N;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var G=U[0],W=U.pop();if(W!==G){U[0]=W;e:for(var N=0,$=U.length,ue=$>>>1;N<ue;){var be=2*(N+1)-1,ke=U[be],we=be+1,me=U[we];if(0>r(ke,W))we<$&&0>r(me,ke)?(U[N]=me,U[we]=W,N=we):(U[N]=ke,U[be]=W,N=be);else if(we<$&&0>r(me,W))U[N]=me,U[we]=W,N=we;else break e}}return G}function r(U,G){var W=U.sortIndex-G.sortIndex;return W!==0?W:U.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;f.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();f.unstable_now=function(){return c.now()-u}}var d=[],p=[],m=1,v=null,w=3,A=!1,S=!1,E=!1,P=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(U){for(var G=t(p);G!==null;){if(G.callback===null)i(p);else if(G.startTime<=U)i(p),G.sortIndex=G.expirationTime,e(d,G);else break;G=t(p)}}function D(U){if(E=!1,F(U),!S)if(t(d)!==null)S=!0,fe(B);else{var G=t(p);G!==null&&Z(D,G.startTime-U)}}function B(U,G){S=!1,E&&(E=!1,k(X),X=-1),A=!0;var W=w;try{for(F(G),v=t(d);v!==null&&(!(v.expirationTime>G)||U&&!ie());){var N=v.callback;if(typeof N=="function"){v.callback=null,w=v.priorityLevel;var $=N(v.expirationTime<=G);G=f.unstable_now(),typeof $=="function"?v.callback=$:v===t(d)&&i(d),F(G)}else i(d);v=t(d)}if(v!==null)var ue=!0;else{var be=t(p);be!==null&&Z(D,be.startTime-G),ue=!1}return ue}finally{v=null,w=W,A=!1}}var H=!1,V=null,X=-1,ee=5,se=-1;function ie(){return!(f.unstable_now()-se<ee)}function ye(){if(V!==null){var U=f.unstable_now();se=U;var G=!0;try{G=V(!0,U)}finally{G?le():(H=!1,V=null)}}else H=!1}var le;if(typeof R=="function")le=function(){R(ye)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ve=ce.port2;ce.port1.onmessage=ye,le=function(){ve.postMessage(null)}}else le=function(){P(ye,0)};function fe(U){V=U,H||(H=!0,le())}function Z(U,G){X=P(function(){U(f.unstable_now())},G)}f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(U){U.callback=null},f.unstable_continueExecution=function(){S||A||(S=!0,fe(B))},f.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<U?Math.floor(1e3/U):5},f.unstable_getCurrentPriorityLevel=function(){return w},f.unstable_getFirstCallbackNode=function(){return t(d)},f.unstable_next=function(U){switch(w){case 1:case 2:case 3:var G=3;break;default:G=w}var W=w;w=G;try{return U()}finally{w=W}},f.unstable_pauseExecution=function(){},f.unstable_requestPaint=function(){},f.unstable_runWithPriority=function(U,G){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var W=w;w=U;try{return G()}finally{w=W}},f.unstable_scheduleCallback=function(U,G,W){var N=f.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?N+W:N):W=N,U){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=W+$,U={id:m++,callback:G,priorityLevel:U,startTime:W,expirationTime:$,sortIndex:-1},W>N?(U.sortIndex=W,e(p,U),t(d)===null&&U===t(p)&&(E?(k(X),X=-1):E=!0,Z(D,W-N))):(U.sortIndex=$,e(d,U),S||A||(S=!0,fe(B))),U},f.unstable_shouldYield=ie,f.unstable_wrapCallback=function(U){var G=w;return function(){var W=w;w=G;try{return U.apply(this,arguments)}finally{w=W}}}}(om)),om}var Ww;function iS(){return Ww||(Ww=1,rm.exports=nS()),rm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gw;function sS(){if(Gw)return _n;Gw=1;var f=Dy(),e=iS();function t(n){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function o(n,s){c(n,s),c(n+"Capture",s)}function c(n,s){for(r[n]=s,n=0;n<s.length;n++)i.add(s[n])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},v={};function w(n){return d.call(v,n)?!0:d.call(m,n)?!1:p.test(n)?v[n]=!0:(m[n]=!0,!1)}function A(n,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function S(n,s,a,h){if(s===null||typeof s>"u"||A(n,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function E(n,s,a,h,g,y,x){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=g,this.mustUseProperty=a,this.propertyName=n,this.type=s,this.sanitizeURL=y,this.removeEmptyString=x}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){P[n]=new E(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var s=n[0];P[s]=new E(s,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){P[n]=new E(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){P[n]=new E(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){P[n]=new E(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){P[n]=new E(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){P[n]=new E(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){P[n]=new E(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){P[n]=new E(n,5,!1,n.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function R(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var s=n.replace(k,R);P[s]=new E(s,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var s=n.replace(k,R);P[s]=new E(s,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var s=n.replace(k,R);P[s]=new E(s,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){P[n]=new E(n,1,!1,n.toLowerCase(),null,!1,!1)}),P.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){P[n]=new E(n,1,!1,n.toLowerCase(),null,!0,!0)});function F(n,s,a,h){var g=P.hasOwnProperty(s)?P[s]:null;(g!==null?g.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(S(s,a,g,h)&&(a=null),h||g===null?w(s)&&(a===null?n.removeAttribute(s):n.setAttribute(s,""+a)):g.mustUseProperty?n[g.propertyName]=a===null?g.type===3?!1:"":a:(s=g.attributeName,h=g.attributeNamespace,a===null?n.removeAttribute(s):(g=g.type,a=g===3||g===4&&a===!0?"":""+a,h?n.setAttributeNS(h,s,a):n.setAttribute(s,a))))}var D=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),H=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),se=Symbol.for("react.provider"),ie=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),ve=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),U=Symbol.iterator;function G(n){return n===null||typeof n!="object"?null:(n=U&&n[U]||n["@@iterator"],typeof n=="function"?n:null)}var W=Object.assign,N;function $(n){if(N===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);N=s&&s[1]||""}return`
`+N+n}var ue=!1;function be(n,s){if(!n||ue)return"";ue=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(z){var h=z}Reflect.construct(n,[],s)}else{try{s.call()}catch(z){h=z}n.call(s.prototype)}else{try{throw Error()}catch(z){h=z}n()}}catch(z){if(z&&h&&typeof z.stack=="string"){for(var g=z.stack.split(`
`),y=h.stack.split(`
`),x=g.length-1,T=y.length-1;1<=x&&0<=T&&g[x]!==y[T];)T--;for(;1<=x&&0<=T;x--,T--)if(g[x]!==y[T]){if(x!==1||T!==1)do if(x--,T--,0>T||g[x]!==y[T]){var M=`
`+g[x].replace(" at new "," at ");return n.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",n.displayName)),M}while(1<=x&&0<=T);break}}}finally{ue=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?$(n):""}function ke(n){switch(n.tag){case 5:return $(n.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return n=be(n.type,!1),n;case 11:return n=be(n.type.render,!1),n;case 1:return n=be(n.type,!0),n;default:return""}}function we(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case V:return"Fragment";case H:return"Portal";case ee:return"Profiler";case X:return"StrictMode";case le:return"Suspense";case ce:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ie:return(n.displayName||"Context")+".Consumer";case se:return(n._context.displayName||"Context")+".Provider";case ye:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ve:return s=n.displayName||null,s!==null?s:we(n.type)||"Memo";case fe:s=n._payload,n=n._init;try{return we(n(s))}catch{}}return null}function me(n){var s=n.type;switch(n.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=s.render,n=n.displayName||n.name||"",s.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(s);case 8:return s===X?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Le(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Oe(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ne(n){var s=Oe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),h=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var g=a.get,y=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return g.call(this)},set:function(x){h=""+x,y.call(this,x)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(x){h=""+x},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ii(n){n._valueTracker||(n._valueTracker=Ne(n))}function Qs(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return n&&(h=Oe(n)?n.checked?"true":"false":n.value),n=h,n!==a?(s.setValue(n),!0):!1}function Ue(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function it(n,s){var a=s.checked;return W({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Et(n,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=Le(s.value!=null?s.value:a),n._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function gt(n,s){s=s.checked,s!=null&&F(n,"checked",s,!1)}function Ni(n,s){gt(n,s);var a=Le(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(h==="submit"||h==="reset"){n.removeAttribute("value");return}s.hasOwnProperty("value")?cc(n,s.type,a):s.hasOwnProperty("defaultValue")&&cc(n,s.type,Le(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(n.defaultChecked=!!s.defaultChecked)}function Zs(n,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+n._wrapperState.initialValue,a||s===n.value||(n.value=s),n.defaultValue=s}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function cc(n,s,a){(s!=="number"||Ue(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Jr=Array.isArray;function ci(n,s,a,h){if(n=n.options,s){s={};for(var g=0;g<a.length;g++)s["$"+a[g]]=!0;for(a=0;a<n.length;a++)g=s.hasOwnProperty("$"+n[a].value),n[a].selected!==g&&(n[a].selected=g),g&&h&&(n[a].defaultSelected=!0)}else{for(a=""+Le(a),s=null,g=0;g<n.length;g++){if(n[g].value===a){n[g].selected=!0,h&&(n[g].defaultSelected=!0);return}s!==null||n[g].disabled||(s=n[g])}s!==null&&(s.selected=!0)}}function uc(n,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return W({},s,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Oh(n,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Jr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}n._wrapperState={initialValue:Le(a)}}function jh(n,s){var a=Le(s.value),h=Le(s.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),s.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),h!=null&&(n.defaultValue=""+h)}function zh(n){var s=n.textContent;s===n._wrapperState.initialValue&&s!==""&&s!==null&&(n.value=s)}function Hh(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fi(n,s){return n==null||n==="http://www.w3.org/1999/xhtml"?Hh(s):n==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var os,eo=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,h,g){MSApp.execUnsafeLocalFunction(function(){return n(s,a,h,g)})}:n}(function(n,s){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=s;else{for(os=os||document.createElement("div"),os.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=os.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;s.firstChild;)n.appendChild(s.firstChild)}});function as(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var hc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},t1=["Webkit","ms","Moz","O"];Object.keys(hc).forEach(function(n){t1.forEach(function(s){s=s+n.charAt(0).toUpperCase()+n.substring(1),hc[s]=hc[n]})});function ev(n,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||hc.hasOwnProperty(n)&&hc[n]?(""+s).trim():s+"px"}function tv(n,s){n=n.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,g=ev(a,s[a],h);a==="float"&&(a="cssFloat"),h?n.setProperty(a,g):n[a]=g}}var n1=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fp(n,s){if(s){if(n1[n]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function pp(n,s){if(n.indexOf("-")===-1)return typeof s.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gp=null;function mp(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var yp=null,ka=null,Ta=null;function nv(n){if(n=Ic(n)){if(typeof yp!="function")throw Error(t(280));var s=n.stateNode;s&&(s=cd(s),yp(n.stateNode,n.type,s))}}function iv(n){ka?Ta?Ta.push(n):Ta=[n]:ka=n}function sv(){if(ka){var n=ka,s=Ta;if(Ta=ka=null,nv(n),s)for(n=0;n<s.length;n++)nv(s[n])}}function rv(n,s){return n(s)}function ov(){}var vp=!1;function av(n,s,a){if(vp)return n(s,a);vp=!0;try{return rv(n,s,a)}finally{vp=!1,(ka!==null||Ta!==null)&&(ov(),sv())}}function dc(n,s){var a=n.stateNode;if(a===null)return null;var h=cd(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(n=n.type,h=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!h;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var wp=!1;if(u)try{var fc={};Object.defineProperty(fc,"passive",{get:function(){wp=!0}}),window.addEventListener("test",fc,fc),window.removeEventListener("test",fc,fc)}catch{wp=!1}function i1(n,s,a,h,g,y,x,T,M){var z=Array.prototype.slice.call(arguments,3);try{s.apply(a,z)}catch(K){this.onError(K)}}var pc=!1,Bh=null,Uh=!1,Ap=null,s1={onError:function(n){pc=!0,Bh=n}};function r1(n,s,a,h,g,y,x,T,M){pc=!1,Bh=null,i1.apply(s1,arguments)}function o1(n,s,a,h,g,y,x,T,M){if(r1.apply(this,arguments),pc){if(pc){var z=Bh;pc=!1,Bh=null}else throw Error(t(198));Uh||(Uh=!0,Ap=z)}}function to(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function lv(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function cv(n){if(to(n)!==n)throw Error(t(188))}function a1(n){var s=n.alternate;if(!s){if(s=to(n),s===null)throw Error(t(188));return s!==n?null:n}for(var a=n,h=s;;){var g=a.return;if(g===null)break;var y=g.alternate;if(y===null){if(h=g.return,h!==null){a=h;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===a)return cv(g),n;if(y===h)return cv(g),s;y=y.sibling}throw Error(t(188))}if(a.return!==h.return)a=g,h=y;else{for(var x=!1,T=g.child;T;){if(T===a){x=!0,a=g,h=y;break}if(T===h){x=!0,h=g,a=y;break}T=T.sibling}if(!x){for(T=y.child;T;){if(T===a){x=!0,a=y,h=g;break}if(T===h){x=!0,h=y,a=g;break}T=T.sibling}if(!x)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:s}function uv(n){return n=a1(n),n!==null?hv(n):null}function hv(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var s=hv(n);if(s!==null)return s;n=n.sibling}return null}var dv=e.unstable_scheduleCallback,fv=e.unstable_cancelCallback,l1=e.unstable_shouldYield,c1=e.unstable_requestPaint,mt=e.unstable_now,u1=e.unstable_getCurrentPriorityLevel,bp=e.unstable_ImmediatePriority,pv=e.unstable_UserBlockingPriority,$h=e.unstable_NormalPriority,h1=e.unstable_LowPriority,gv=e.unstable_IdlePriority,Vh=null,Di=null;function d1(n){if(Di&&typeof Di.onCommitFiberRoot=="function")try{Di.onCommitFiberRoot(Vh,n,void 0,(n.current.flags&128)===128)}catch{}}var ui=Math.clz32?Math.clz32:g1,f1=Math.log,p1=Math.LN2;function g1(n){return n>>>=0,n===0?32:31-(f1(n)/p1|0)|0}var Wh=64,Gh=4194304;function gc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Xh(n,s){var a=n.pendingLanes;if(a===0)return 0;var h=0,g=n.suspendedLanes,y=n.pingedLanes,x=a&268435455;if(x!==0){var T=x&~g;T!==0?h=gc(T):(y&=x,y!==0&&(h=gc(y)))}else x=a&~g,x!==0?h=gc(x):y!==0&&(h=gc(y));if(h===0)return 0;if(s!==0&&s!==h&&(s&g)===0&&(g=h&-h,y=s&-s,g>=y||g===16&&(y&4194240)!==0))return s;if((h&4)!==0&&(h|=a&16),s=n.entangledLanes,s!==0)for(n=n.entanglements,s&=h;0<s;)a=31-ui(s),g=1<<a,h|=n[a],s&=~g;return h}function m1(n,s){switch(n){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y1(n,s){for(var a=n.suspendedLanes,h=n.pingedLanes,g=n.expirationTimes,y=n.pendingLanes;0<y;){var x=31-ui(y),T=1<<x,M=g[x];M===-1?((T&a)===0||(T&h)!==0)&&(g[x]=m1(T,s)):M<=s&&(n.expiredLanes|=T),y&=~T}}function xp(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function mv(){var n=Wh;return Wh<<=1,(Wh&4194240)===0&&(Wh=64),n}function _p(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function mc(n,s,a){n.pendingLanes|=s,s!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,s=31-ui(s),n[s]=a}function v1(n,s){var a=n.pendingLanes&~s;n.pendingLanes=s,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=s,n.mutableReadLanes&=s,n.entangledLanes&=s,s=n.entanglements;var h=n.eventTimes;for(n=n.expirationTimes;0<a;){var g=31-ui(a),y=1<<g;s[g]=0,h[g]=-1,n[g]=-1,a&=~y}}function Sp(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var h=31-ui(a),g=1<<h;g&s|n[h]&s&&(n[h]|=s),a&=~g}}var We=0;function yv(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var vv,Ep,wv,Av,bv,Cp=!1,qh=[],Js=null,er=null,tr=null,yc=new Map,vc=new Map,nr=[],w1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xv(n,s){switch(n){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":yc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":vc.delete(s.pointerId)}}function wc(n,s,a,h,g,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:y,targetContainers:[g]},s!==null&&(s=Ic(s),s!==null&&Ep(s)),n):(n.eventSystemFlags|=h,s=n.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),n)}function A1(n,s,a,h,g){switch(s){case"focusin":return Js=wc(Js,n,s,a,h,g),!0;case"dragenter":return er=wc(er,n,s,a,h,g),!0;case"mouseover":return tr=wc(tr,n,s,a,h,g),!0;case"pointerover":var y=g.pointerId;return yc.set(y,wc(yc.get(y)||null,n,s,a,h,g)),!0;case"gotpointercapture":return y=g.pointerId,vc.set(y,wc(vc.get(y)||null,n,s,a,h,g)),!0}return!1}function _v(n){var s=no(n.target);if(s!==null){var a=to(s);if(a!==null){if(s=a.tag,s===13){if(s=lv(a),s!==null){n.blockedOn=s,bv(n.priority,function(){wv(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Kh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Tp(n.domEventName,n.eventSystemFlags,s[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var h=new a.constructor(a.type,a);gp=h,a.target.dispatchEvent(h),gp=null}else return s=Ic(a),s!==null&&Ep(s),n.blockedOn=a,!1;s.shift()}return!0}function Sv(n,s,a){Kh(n)&&a.delete(s)}function b1(){Cp=!1,Js!==null&&Kh(Js)&&(Js=null),er!==null&&Kh(er)&&(er=null),tr!==null&&Kh(tr)&&(tr=null),yc.forEach(Sv),vc.forEach(Sv)}function Ac(n,s){n.blockedOn===s&&(n.blockedOn=null,Cp||(Cp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,b1)))}function bc(n){function s(g){return Ac(g,n)}if(0<qh.length){Ac(qh[0],n);for(var a=1;a<qh.length;a++){var h=qh[a];h.blockedOn===n&&(h.blockedOn=null)}}for(Js!==null&&Ac(Js,n),er!==null&&Ac(er,n),tr!==null&&Ac(tr,n),yc.forEach(s),vc.forEach(s),a=0;a<nr.length;a++)h=nr[a],h.blockedOn===n&&(h.blockedOn=null);for(;0<nr.length&&(a=nr[0],a.blockedOn===null);)_v(a),a.blockedOn===null&&nr.shift()}var Pa=D.ReactCurrentBatchConfig,Yh=!0;function x1(n,s,a,h){var g=We,y=Pa.transition;Pa.transition=null;try{We=1,kp(n,s,a,h)}finally{We=g,Pa.transition=y}}function _1(n,s,a,h){var g=We,y=Pa.transition;Pa.transition=null;try{We=4,kp(n,s,a,h)}finally{We=g,Pa.transition=y}}function kp(n,s,a,h){if(Yh){var g=Tp(n,s,a,h);if(g===null)Wp(n,s,h,Qh,a),xv(n,h);else if(A1(g,n,s,a,h))h.stopPropagation();else if(xv(n,h),s&4&&-1<w1.indexOf(n)){for(;g!==null;){var y=Ic(g);if(y!==null&&vv(y),y=Tp(n,s,a,h),y===null&&Wp(n,s,h,Qh,a),y===g)break;g=y}g!==null&&h.stopPropagation()}else Wp(n,s,h,null,a)}}var Qh=null;function Tp(n,s,a,h){if(Qh=null,n=mp(h),n=no(n),n!==null)if(s=to(n),s===null)n=null;else if(a=s.tag,a===13){if(n=lv(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null);return Qh=n,null}function Ev(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(u1()){case bp:return 1;case pv:return 4;case $h:case h1:return 16;case gv:return 536870912;default:return 16}default:return 16}}var ir=null,Pp=null,Zh=null;function Cv(){if(Zh)return Zh;var n,s=Pp,a=s.length,h,g="value"in ir?ir.value:ir.textContent,y=g.length;for(n=0;n<a&&s[n]===g[n];n++);var x=a-n;for(h=1;h<=x&&s[a-h]===g[y-h];h++);return Zh=g.slice(n,1<h?1-h:void 0)}function Jh(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ed(){return!0}function kv(){return!1}function Ln(n){function s(a,h,g,y,x){this._reactName=a,this._targetInst=g,this.type=h,this.nativeEvent=y,this.target=x,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(a=n[T],this[T]=a?a(y):y[T]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ed:kv,this.isPropagationStopped=kv,this}return W(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ed)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ed)},persist:function(){},isPersistent:ed}),s}var Ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rp=Ln(Ra),xc=W({},Ra,{view:0,detail:0}),S1=Ln(xc),Lp,Mp,_c,td=W({},xc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Np,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_c&&(_c&&n.type==="mousemove"?(Lp=n.screenX-_c.screenX,Mp=n.screenY-_c.screenY):Mp=Lp=0,_c=n),Lp)},movementY:function(n){return"movementY"in n?n.movementY:Mp}}),Tv=Ln(td),E1=W({},td,{dataTransfer:0}),C1=Ln(E1),k1=W({},xc,{relatedTarget:0}),Ip=Ln(k1),T1=W({},Ra,{animationName:0,elapsedTime:0,pseudoElement:0}),P1=Ln(T1),R1=W({},Ra,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),L1=Ln(R1),M1=W({},Ra,{data:0}),Pv=Ln(M1),I1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D1(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=F1[n])?!!s[n]:!1}function Np(){return D1}var O1=W({},xc,{key:function(n){if(n.key){var s=I1[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Jh(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?N1[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Np,charCode:function(n){return n.type==="keypress"?Jh(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Jh(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),j1=Ln(O1),z1=W({},td,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rv=Ln(z1),H1=W({},xc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Np}),B1=Ln(H1),U1=W({},Ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),$1=Ln(U1),V1=W({},td,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),W1=Ln(V1),G1=[9,13,27,32],Fp=u&&"CompositionEvent"in window,Sc=null;u&&"documentMode"in document&&(Sc=document.documentMode);var X1=u&&"TextEvent"in window&&!Sc,Lv=u&&(!Fp||Sc&&8<Sc&&11>=Sc),Mv=" ",Iv=!1;function Nv(n,s){switch(n){case"keyup":return G1.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fv(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var La=!1;function q1(n,s){switch(n){case"compositionend":return Fv(s);case"keypress":return s.which!==32?null:(Iv=!0,Mv);case"textInput":return n=s.data,n===Mv&&Iv?null:n;default:return null}}function K1(n,s){if(La)return n==="compositionend"||!Fp&&Nv(n,s)?(n=Cv(),Zh=Pp=ir=null,La=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Lv&&s.locale!=="ko"?null:s.data;default:return null}}var Y1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dv(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Y1[n.type]:s==="textarea"}function Ov(n,s,a,h){iv(h),s=od(s,"onChange"),0<s.length&&(a=new Rp("onChange","change",null,a,h),n.push({event:a,listeners:s}))}var Ec=null,Cc=null;function Q1(n){t0(n,0)}function nd(n){var s=Da(n);if(Qs(s))return n}function Z1(n,s){if(n==="change")return s}var jv=!1;if(u){var Dp;if(u){var Op="oninput"in document;if(!Op){var zv=document.createElement("div");zv.setAttribute("oninput","return;"),Op=typeof zv.oninput=="function"}Dp=Op}else Dp=!1;jv=Dp&&(!document.documentMode||9<document.documentMode)}function Hv(){Ec&&(Ec.detachEvent("onpropertychange",Bv),Cc=Ec=null)}function Bv(n){if(n.propertyName==="value"&&nd(Cc)){var s=[];Ov(s,Cc,n,mp(n)),av(Q1,s)}}function J1(n,s,a){n==="focusin"?(Hv(),Ec=s,Cc=a,Ec.attachEvent("onpropertychange",Bv)):n==="focusout"&&Hv()}function e_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return nd(Cc)}function t_(n,s){if(n==="click")return nd(s)}function n_(n,s){if(n==="input"||n==="change")return nd(s)}function i_(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var hi=typeof Object.is=="function"?Object.is:i_;function kc(n,s){if(hi(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var g=a[h];if(!d.call(s,g)||!hi(n[g],s[g]))return!1}return!0}function Uv(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function $v(n,s){var a=Uv(n);n=0;for(var h;a;){if(a.nodeType===3){if(h=n+a.textContent.length,n<=s&&h>=s)return{node:a,offset:s-n};n=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Uv(a)}}function Vv(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Vv(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Wv(){for(var n=window,s=Ue();s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Ue(n.document)}return s}function jp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}function s_(n){var s=Wv(),a=n.focusedElem,h=n.selectionRange;if(s!==a&&a&&a.ownerDocument&&Vv(a.ownerDocument.documentElement,a)){if(h!==null&&jp(a)){if(s=h.start,n=h.end,n===void 0&&(n=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(n,a.value.length);else if(n=(s=a.ownerDocument||document)&&s.defaultView||window,n.getSelection){n=n.getSelection();var g=a.textContent.length,y=Math.min(h.start,g);h=h.end===void 0?y:Math.min(h.end,g),!n.extend&&y>h&&(g=h,h=y,y=g),g=$v(a,y);var x=$v(a,h);g&&x&&(n.rangeCount!==1||n.anchorNode!==g.node||n.anchorOffset!==g.offset||n.focusNode!==x.node||n.focusOffset!==x.offset)&&(s=s.createRange(),s.setStart(g.node,g.offset),n.removeAllRanges(),y>h?(n.addRange(s),n.extend(x.node,x.offset)):(s.setEnd(x.node,x.offset),n.addRange(s)))}}for(s=[],n=a;n=n.parentNode;)n.nodeType===1&&s.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)n=s[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var r_=u&&"documentMode"in document&&11>=document.documentMode,Ma=null,zp=null,Tc=null,Hp=!1;function Gv(n,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Hp||Ma==null||Ma!==Ue(h)||(h=Ma,"selectionStart"in h&&jp(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Tc&&kc(Tc,h)||(Tc=h,h=od(zp,"onSelect"),0<h.length&&(s=new Rp("onSelect","select",null,s,a),n.push({event:s,listeners:h}),s.target=Ma)))}function id(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Ia={animationend:id("Animation","AnimationEnd"),animationiteration:id("Animation","AnimationIteration"),animationstart:id("Animation","AnimationStart"),transitionend:id("Transition","TransitionEnd")},Bp={},Xv={};u&&(Xv=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function sd(n){if(Bp[n])return Bp[n];if(!Ia[n])return n;var s=Ia[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Xv)return Bp[n]=s[a];return n}var qv=sd("animationend"),Kv=sd("animationiteration"),Yv=sd("animationstart"),Qv=sd("transitionend"),Zv=new Map,Jv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sr(n,s){Zv.set(n,s),o(s,[n])}for(var Up=0;Up<Jv.length;Up++){var $p=Jv[Up],o_=$p.toLowerCase(),a_=$p[0].toUpperCase()+$p.slice(1);sr(o_,"on"+a_)}sr(qv,"onAnimationEnd"),sr(Kv,"onAnimationIteration"),sr(Yv,"onAnimationStart"),sr("dblclick","onDoubleClick"),sr("focusin","onFocus"),sr("focusout","onBlur"),sr(Qv,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pc));function e0(n,s,a){var h=n.type||"unknown-event";n.currentTarget=a,o1(h,s,void 0,n),n.currentTarget=null}function t0(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var h=n[a],g=h.event;h=h.listeners;e:{var y=void 0;if(s)for(var x=h.length-1;0<=x;x--){var T=h[x],M=T.instance,z=T.currentTarget;if(T=T.listener,M!==y&&g.isPropagationStopped())break e;e0(g,T,z),y=M}else for(x=0;x<h.length;x++){if(T=h[x],M=T.instance,z=T.currentTarget,T=T.listener,M!==y&&g.isPropagationStopped())break e;e0(g,T,z),y=M}}}if(Uh)throw n=Ap,Uh=!1,Ap=null,n}function et(n,s){var a=s[Qp];a===void 0&&(a=s[Qp]=new Set);var h=n+"__bubble";a.has(h)||(n0(s,n,2,!1),a.add(h))}function Vp(n,s,a){var h=0;s&&(h|=4),n0(a,n,h,s)}var rd="_reactListening"+Math.random().toString(36).slice(2);function Rc(n){if(!n[rd]){n[rd]=!0,i.forEach(function(a){a!=="selectionchange"&&(l_.has(a)||Vp(a,!1,n),Vp(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[rd]||(s[rd]=!0,Vp("selectionchange",!1,s))}}function n0(n,s,a,h){switch(Ev(s)){case 1:var g=x1;break;case 4:g=_1;break;default:g=kp}a=g.bind(null,s,a,n),g=void 0,!wp||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),h?g!==void 0?n.addEventListener(s,a,{capture:!0,passive:g}):n.addEventListener(s,a,!0):g!==void 0?n.addEventListener(s,a,{passive:g}):n.addEventListener(s,a,!1)}function Wp(n,s,a,h,g){var y=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var x=h.tag;if(x===3||x===4){var T=h.stateNode.containerInfo;if(T===g||T.nodeType===8&&T.parentNode===g)break;if(x===4)for(x=h.return;x!==null;){var M=x.tag;if((M===3||M===4)&&(M=x.stateNode.containerInfo,M===g||M.nodeType===8&&M.parentNode===g))return;x=x.return}for(;T!==null;){if(x=no(T),x===null)return;if(M=x.tag,M===5||M===6){h=y=x;continue e}T=T.parentNode}}h=h.return}av(function(){var z=y,K=mp(a),Y=[];e:{var q=Zv.get(n);if(q!==void 0){var re=Rp,he=n;switch(n){case"keypress":if(Jh(a)===0)break e;case"keydown":case"keyup":re=j1;break;case"focusin":he="focus",re=Ip;break;case"focusout":he="blur",re=Ip;break;case"beforeblur":case"afterblur":re=Ip;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Tv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=C1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=B1;break;case qv:case Kv:case Yv:re=P1;break;case Qv:re=$1;break;case"scroll":re=S1;break;case"wheel":re=W1;break;case"copy":case"cut":case"paste":re=L1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Rv}var de=(s&4)!==0,yt=!de&&n==="scroll",O=de?q!==null?q+"Capture":null:q;de=[];for(var I=z,j;I!==null;){j=I;var J=j.stateNode;if(j.tag===5&&J!==null&&(j=J,O!==null&&(J=dc(I,O),J!=null&&de.push(Lc(I,J,j)))),yt)break;I=I.return}0<de.length&&(q=new re(q,he,null,a,K),Y.push({event:q,listeners:de}))}}if((s&7)===0){e:{if(q=n==="mouseover"||n==="pointerover",re=n==="mouseout"||n==="pointerout",q&&a!==gp&&(he=a.relatedTarget||a.fromElement)&&(no(he)||he[ls]))break e;if((re||q)&&(q=K.window===K?K:(q=K.ownerDocument)?q.defaultView||q.parentWindow:window,re?(he=a.relatedTarget||a.toElement,re=z,he=he?no(he):null,he!==null&&(yt=to(he),he!==yt||he.tag!==5&&he.tag!==6)&&(he=null)):(re=null,he=z),re!==he)){if(de=Tv,J="onMouseLeave",O="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(de=Rv,J="onPointerLeave",O="onPointerEnter",I="pointer"),yt=re==null?q:Da(re),j=he==null?q:Da(he),q=new de(J,I+"leave",re,a,K),q.target=yt,q.relatedTarget=j,J=null,no(K)===z&&(de=new de(O,I+"enter",he,a,K),de.target=j,de.relatedTarget=yt,J=de),yt=J,re&&he)t:{for(de=re,O=he,I=0,j=de;j;j=Na(j))I++;for(j=0,J=O;J;J=Na(J))j++;for(;0<I-j;)de=Na(de),I--;for(;0<j-I;)O=Na(O),j--;for(;I--;){if(de===O||O!==null&&de===O.alternate)break t;de=Na(de),O=Na(O)}de=null}else de=null;re!==null&&i0(Y,q,re,de,!1),he!==null&&yt!==null&&i0(Y,yt,he,de,!0)}}e:{if(q=z?Da(z):window,re=q.nodeName&&q.nodeName.toLowerCase(),re==="select"||re==="input"&&q.type==="file")var pe=Z1;else if(Dv(q))if(jv)pe=n_;else{pe=e_;var xe=J1}else(re=q.nodeName)&&re.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(pe=t_);if(pe&&(pe=pe(n,z))){Ov(Y,pe,a,K);break e}xe&&xe(n,q,z),n==="focusout"&&(xe=q._wrapperState)&&xe.controlled&&q.type==="number"&&cc(q,"number",q.value)}switch(xe=z?Da(z):window,n){case"focusin":(Dv(xe)||xe.contentEditable==="true")&&(Ma=xe,zp=z,Tc=null);break;case"focusout":Tc=zp=Ma=null;break;case"mousedown":Hp=!0;break;case"contextmenu":case"mouseup":case"dragend":Hp=!1,Gv(Y,a,K);break;case"selectionchange":if(r_)break;case"keydown":case"keyup":Gv(Y,a,K)}var _e;if(Fp)e:{switch(n){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else La?Nv(n,a)&&(Se="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(Lv&&a.locale!=="ko"&&(La||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&La&&(_e=Cv()):(ir=K,Pp="value"in ir?ir.value:ir.textContent,La=!0)),xe=od(z,Se),0<xe.length&&(Se=new Pv(Se,n,null,a,K),Y.push({event:Se,listeners:xe}),_e?Se.data=_e:(_e=Fv(a),_e!==null&&(Se.data=_e)))),(_e=X1?q1(n,a):K1(n,a))&&(z=od(z,"onBeforeInput"),0<z.length&&(K=new Pv("onBeforeInput","beforeinput",null,a,K),Y.push({event:K,listeners:z}),K.data=_e))}t0(Y,s)})}function Lc(n,s,a){return{instance:n,listener:s,currentTarget:a}}function od(n,s){for(var a=s+"Capture",h=[];n!==null;){var g=n,y=g.stateNode;g.tag===5&&y!==null&&(g=y,y=dc(n,a),y!=null&&h.unshift(Lc(n,y,g)),y=dc(n,s),y!=null&&h.push(Lc(n,y,g))),n=n.return}return h}function Na(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function i0(n,s,a,h,g){for(var y=s._reactName,x=[];a!==null&&a!==h;){var T=a,M=T.alternate,z=T.stateNode;if(M!==null&&M===h)break;T.tag===5&&z!==null&&(T=z,g?(M=dc(a,y),M!=null&&x.unshift(Lc(a,M,T))):g||(M=dc(a,y),M!=null&&x.push(Lc(a,M,T)))),a=a.return}x.length!==0&&n.push({event:s,listeners:x})}var c_=/\r\n?/g,u_=/\u0000|\uFFFD/g;function s0(n){return(typeof n=="string"?n:""+n).replace(c_,`
`).replace(u_,"")}function ad(n,s,a){if(s=s0(s),s0(n)!==s&&a)throw Error(t(425))}function ld(){}var Gp=null,Xp=null;function qp(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Kp=typeof setTimeout=="function"?setTimeout:void 0,h_=typeof clearTimeout=="function"?clearTimeout:void 0,r0=typeof Promise=="function"?Promise:void 0,d_=typeof queueMicrotask=="function"?queueMicrotask:typeof r0<"u"?function(n){return r0.resolve(null).then(n).catch(f_)}:Kp;function f_(n){setTimeout(function(){throw n})}function Yp(n,s){var a=s,h=0;do{var g=a.nextSibling;if(n.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"){if(h===0){n.removeChild(g),bc(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=g}while(a);bc(s)}function rr(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return n}function o0(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}var Fa=Math.random().toString(36).slice(2),Oi="__reactFiber$"+Fa,Mc="__reactProps$"+Fa,ls="__reactContainer$"+Fa,Qp="__reactEvents$"+Fa,p_="__reactListeners$"+Fa,g_="__reactHandles$"+Fa;function no(n){var s=n[Oi];if(s)return s;for(var a=n.parentNode;a;){if(s=a[ls]||a[Oi]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=o0(n);n!==null;){if(a=n[Oi])return a;n=o0(n)}return s}n=a,a=n.parentNode}return null}function Ic(n){return n=n[Oi]||n[ls],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Da(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function cd(n){return n[Mc]||null}var Zp=[],Oa=-1;function or(n){return{current:n}}function tt(n){0>Oa||(n.current=Zp[Oa],Zp[Oa]=null,Oa--)}function Ze(n,s){Oa++,Zp[Oa]=n.current,n.current=s}var ar={},Yt=or(ar),vn=or(!1),io=ar;function ja(n,s){var a=n.type.contextTypes;if(!a)return ar;var h=n.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var g={},y;for(y in a)g[y]=s[y];return h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=g),g}function wn(n){return n=n.childContextTypes,n!=null}function ud(){tt(vn),tt(Yt)}function a0(n,s,a){if(Yt.current!==ar)throw Error(t(168));Ze(Yt,s),Ze(vn,a)}function l0(n,s,a){var h=n.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var g in h)if(!(g in s))throw Error(t(108,me(n)||"Unknown",g));return W({},a,h)}function hd(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ar,io=Yt.current,Ze(Yt,n),Ze(vn,vn.current),!0}function c0(n,s,a){var h=n.stateNode;if(!h)throw Error(t(169));a?(n=l0(n,s,io),h.__reactInternalMemoizedMergedChildContext=n,tt(vn),tt(Yt),Ze(Yt,n)):tt(vn),Ze(vn,a)}var cs=null,dd=!1,Jp=!1;function u0(n){cs===null?cs=[n]:cs.push(n)}function m_(n){dd=!0,u0(n)}function lr(){if(!Jp&&cs!==null){Jp=!0;var n=0,s=We;try{var a=cs;for(We=1;n<a.length;n++){var h=a[n];do h=h(!0);while(h!==null)}cs=null,dd=!1}catch(g){throw cs!==null&&(cs=cs.slice(n+1)),dv(bp,lr),g}finally{We=s,Jp=!1}}return null}var za=[],Ha=0,fd=null,pd=0,Xn=[],qn=0,so=null,us=1,hs="";function ro(n,s){za[Ha++]=pd,za[Ha++]=fd,fd=n,pd=s}function h0(n,s,a){Xn[qn++]=us,Xn[qn++]=hs,Xn[qn++]=so,so=n;var h=us;n=hs;var g=32-ui(h)-1;h&=~(1<<g),a+=1;var y=32-ui(s)+g;if(30<y){var x=g-g%5;y=(h&(1<<x)-1).toString(32),h>>=x,g-=x,us=1<<32-ui(s)+g|a<<g|h,hs=y+n}else us=1<<y|a<<g|h,hs=n}function eg(n){n.return!==null&&(ro(n,1),h0(n,1,0))}function tg(n){for(;n===fd;)fd=za[--Ha],za[Ha]=null,pd=za[--Ha],za[Ha]=null;for(;n===so;)so=Xn[--qn],Xn[qn]=null,hs=Xn[--qn],Xn[qn]=null,us=Xn[--qn],Xn[qn]=null}var Mn=null,In=null,st=!1,di=null;function d0(n,s){var a=Zn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=n,s=n.deletions,s===null?(n.deletions=[a],n.flags|=16):s.push(a)}function f0(n,s){switch(n.tag){case 5:var a=n.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(n.stateNode=s,Mn=n,In=rr(s.firstChild),!0):!1;case 6:return s=n.pendingProps===""||s.nodeType!==3?null:s,s!==null?(n.stateNode=s,Mn=n,In=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=so!==null?{id:us,overflow:hs}:null,n.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Zn(18,null,null,0),a.stateNode=s,a.return=n,n.child=a,Mn=n,In=null,!0):!1;default:return!1}}function ng(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ig(n){if(st){var s=In;if(s){var a=s;if(!f0(n,s)){if(ng(n))throw Error(t(418));s=rr(a.nextSibling);var h=Mn;s&&f0(n,s)?d0(h,a):(n.flags=n.flags&-4097|2,st=!1,Mn=n)}}else{if(ng(n))throw Error(t(418));n.flags=n.flags&-4097|2,st=!1,Mn=n}}}function p0(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Mn=n}function gd(n){if(n!==Mn)return!1;if(!st)return p0(n),st=!0,!1;var s;if((s=n.tag!==3)&&!(s=n.tag!==5)&&(s=n.type,s=s!=="head"&&s!=="body"&&!qp(n.type,n.memoizedProps)),s&&(s=In)){if(ng(n))throw g0(),Error(t(418));for(;s;)d0(n,s),s=rr(s.nextSibling)}if(p0(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(s===0){In=rr(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}n=n.nextSibling}In=null}}else In=Mn?rr(n.stateNode.nextSibling):null;return!0}function g0(){for(var n=In;n;)n=rr(n.nextSibling)}function Ba(){In=Mn=null,st=!1}function sg(n){di===null?di=[n]:di.push(n)}var y_=D.ReactCurrentBatchConfig;function Nc(n,s,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,n));var g=h,y=""+n;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(x){var T=g.refs;x===null?delete T[y]:T[y]=x},s._stringRef=y,s)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function md(n,s){throw n=Object.prototype.toString.call(s),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n))}function m0(n){var s=n._init;return s(n._payload)}function y0(n){function s(O,I){if(n){var j=O.deletions;j===null?(O.deletions=[I],O.flags|=16):j.push(I)}}function a(O,I){if(!n)return null;for(;I!==null;)s(O,I),I=I.sibling;return null}function h(O,I){for(O=new Map;I!==null;)I.key!==null?O.set(I.key,I):O.set(I.index,I),I=I.sibling;return O}function g(O,I){return O=mr(O,I),O.index=0,O.sibling=null,O}function y(O,I,j){return O.index=j,n?(j=O.alternate,j!==null?(j=j.index,j<I?(O.flags|=2,I):j):(O.flags|=2,I)):(O.flags|=1048576,I)}function x(O){return n&&O.alternate===null&&(O.flags|=2),O}function T(O,I,j,J){return I===null||I.tag!==6?(I=Kg(j,O.mode,J),I.return=O,I):(I=g(I,j),I.return=O,I)}function M(O,I,j,J){var pe=j.type;return pe===V?K(O,I,j.props.children,J,j.key):I!==null&&(I.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===fe&&m0(pe)===I.type)?(J=g(I,j.props),J.ref=Nc(O,I,j),J.return=O,J):(J=Hd(j.type,j.key,j.props,null,O.mode,J),J.ref=Nc(O,I,j),J.return=O,J)}function z(O,I,j,J){return I===null||I.tag!==4||I.stateNode.containerInfo!==j.containerInfo||I.stateNode.implementation!==j.implementation?(I=Yg(j,O.mode,J),I.return=O,I):(I=g(I,j.children||[]),I.return=O,I)}function K(O,I,j,J,pe){return I===null||I.tag!==7?(I=po(j,O.mode,J,pe),I.return=O,I):(I=g(I,j),I.return=O,I)}function Y(O,I,j){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Kg(""+I,O.mode,j),I.return=O,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case B:return j=Hd(I.type,I.key,I.props,null,O.mode,j),j.ref=Nc(O,null,I),j.return=O,j;case H:return I=Yg(I,O.mode,j),I.return=O,I;case fe:var J=I._init;return Y(O,J(I._payload),j)}if(Jr(I)||G(I))return I=po(I,O.mode,j,null),I.return=O,I;md(O,I)}return null}function q(O,I,j,J){var pe=I!==null?I.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return pe!==null?null:T(O,I,""+j,J);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case B:return j.key===pe?M(O,I,j,J):null;case H:return j.key===pe?z(O,I,j,J):null;case fe:return pe=j._init,q(O,I,pe(j._payload),J)}if(Jr(j)||G(j))return pe!==null?null:K(O,I,j,J,null);md(O,j)}return null}function re(O,I,j,J,pe){if(typeof J=="string"&&J!==""||typeof J=="number")return O=O.get(j)||null,T(I,O,""+J,pe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case B:return O=O.get(J.key===null?j:J.key)||null,M(I,O,J,pe);case H:return O=O.get(J.key===null?j:J.key)||null,z(I,O,J,pe);case fe:var xe=J._init;return re(O,I,j,xe(J._payload),pe)}if(Jr(J)||G(J))return O=O.get(j)||null,K(I,O,J,pe,null);md(I,J)}return null}function he(O,I,j,J){for(var pe=null,xe=null,_e=I,Se=I=0,Dt=null;_e!==null&&Se<j.length;Se++){_e.index>Se?(Dt=_e,_e=null):Dt=_e.sibling;var Be=q(O,_e,j[Se],J);if(Be===null){_e===null&&(_e=Dt);break}n&&_e&&Be.alternate===null&&s(O,_e),I=y(Be,I,Se),xe===null?pe=Be:xe.sibling=Be,xe=Be,_e=Dt}if(Se===j.length)return a(O,_e),st&&ro(O,Se),pe;if(_e===null){for(;Se<j.length;Se++)_e=Y(O,j[Se],J),_e!==null&&(I=y(_e,I,Se),xe===null?pe=_e:xe.sibling=_e,xe=_e);return st&&ro(O,Se),pe}for(_e=h(O,_e);Se<j.length;Se++)Dt=re(_e,O,Se,j[Se],J),Dt!==null&&(n&&Dt.alternate!==null&&_e.delete(Dt.key===null?Se:Dt.key),I=y(Dt,I,Se),xe===null?pe=Dt:xe.sibling=Dt,xe=Dt);return n&&_e.forEach(function(yr){return s(O,yr)}),st&&ro(O,Se),pe}function de(O,I,j,J){var pe=G(j);if(typeof pe!="function")throw Error(t(150));if(j=pe.call(j),j==null)throw Error(t(151));for(var xe=pe=null,_e=I,Se=I=0,Dt=null,Be=j.next();_e!==null&&!Be.done;Se++,Be=j.next()){_e.index>Se?(Dt=_e,_e=null):Dt=_e.sibling;var yr=q(O,_e,Be.value,J);if(yr===null){_e===null&&(_e=Dt);break}n&&_e&&yr.alternate===null&&s(O,_e),I=y(yr,I,Se),xe===null?pe=yr:xe.sibling=yr,xe=yr,_e=Dt}if(Be.done)return a(O,_e),st&&ro(O,Se),pe;if(_e===null){for(;!Be.done;Se++,Be=j.next())Be=Y(O,Be.value,J),Be!==null&&(I=y(Be,I,Se),xe===null?pe=Be:xe.sibling=Be,xe=Be);return st&&ro(O,Se),pe}for(_e=h(O,_e);!Be.done;Se++,Be=j.next())Be=re(_e,O,Se,Be.value,J),Be!==null&&(n&&Be.alternate!==null&&_e.delete(Be.key===null?Se:Be.key),I=y(Be,I,Se),xe===null?pe=Be:xe.sibling=Be,xe=Be);return n&&_e.forEach(function(Y_){return s(O,Y_)}),st&&ro(O,Se),pe}function yt(O,I,j,J){if(typeof j=="object"&&j!==null&&j.type===V&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case B:e:{for(var pe=j.key,xe=I;xe!==null;){if(xe.key===pe){if(pe=j.type,pe===V){if(xe.tag===7){a(O,xe.sibling),I=g(xe,j.props.children),I.return=O,O=I;break e}}else if(xe.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===fe&&m0(pe)===xe.type){a(O,xe.sibling),I=g(xe,j.props),I.ref=Nc(O,xe,j),I.return=O,O=I;break e}a(O,xe);break}else s(O,xe);xe=xe.sibling}j.type===V?(I=po(j.props.children,O.mode,J,j.key),I.return=O,O=I):(J=Hd(j.type,j.key,j.props,null,O.mode,J),J.ref=Nc(O,I,j),J.return=O,O=J)}return x(O);case H:e:{for(xe=j.key;I!==null;){if(I.key===xe)if(I.tag===4&&I.stateNode.containerInfo===j.containerInfo&&I.stateNode.implementation===j.implementation){a(O,I.sibling),I=g(I,j.children||[]),I.return=O,O=I;break e}else{a(O,I);break}else s(O,I);I=I.sibling}I=Yg(j,O.mode,J),I.return=O,O=I}return x(O);case fe:return xe=j._init,yt(O,I,xe(j._payload),J)}if(Jr(j))return he(O,I,j,J);if(G(j))return de(O,I,j,J);md(O,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,I!==null&&I.tag===6?(a(O,I.sibling),I=g(I,j),I.return=O,O=I):(a(O,I),I=Kg(j,O.mode,J),I.return=O,O=I),x(O)):a(O,I)}return yt}var Ua=y0(!0),v0=y0(!1),yd=or(null),vd=null,$a=null,rg=null;function og(){rg=$a=vd=null}function ag(n){var s=yd.current;tt(yd),n._currentValue=s}function lg(n,s,a){for(;n!==null;){var h=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),n===a)break;n=n.return}}function Va(n,s){vd=n,rg=$a=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&s)!==0&&(An=!0),n.firstContext=null)}function Kn(n){var s=n._currentValue;if(rg!==n)if(n={context:n,memoizedValue:s,next:null},$a===null){if(vd===null)throw Error(t(308));$a=n,vd.dependencies={lanes:0,firstContext:n}}else $a=$a.next=n;return s}var oo=null;function cg(n){oo===null?oo=[n]:oo.push(n)}function w0(n,s,a,h){var g=s.interleaved;return g===null?(a.next=a,cg(s)):(a.next=g.next,g.next=a),s.interleaved=a,ds(n,h)}function ds(n,s){n.lanes|=s;var a=n.alternate;for(a!==null&&(a.lanes|=s),a=n,n=n.return;n!==null;)n.childLanes|=s,a=n.alternate,a!==null&&(a.childLanes|=s),a=n,n=n.return;return a.tag===3?a.stateNode:null}var cr=!1;function ug(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function A0(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function fs(n,s){return{eventTime:n,lane:s,tag:0,payload:null,callback:null,next:null}}function ur(n,s,a){var h=n.updateQueue;if(h===null)return null;if(h=h.shared,(He&2)!==0){var g=h.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),h.pending=s,ds(n,a)}return g=h.interleaved,g===null?(s.next=s,cg(h)):(s.next=g.next,g.next=s),h.interleaved=s,ds(n,a)}function wd(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=n.pendingLanes,a|=h,s.lanes=a,Sp(n,a)}}function b0(n,s){var a=n.updateQueue,h=n.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var g=null,y=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};y===null?g=y=x:y=y.next=x,a=a.next}while(a!==null);y===null?g=y=s:y=y.next=s}else g=y=s;a={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:h.shared,effects:h.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}function Ad(n,s,a,h){var g=n.updateQueue;cr=!1;var y=g.firstBaseUpdate,x=g.lastBaseUpdate,T=g.shared.pending;if(T!==null){g.shared.pending=null;var M=T,z=M.next;M.next=null,x===null?y=z:x.next=z,x=M;var K=n.alternate;K!==null&&(K=K.updateQueue,T=K.lastBaseUpdate,T!==x&&(T===null?K.firstBaseUpdate=z:T.next=z,K.lastBaseUpdate=M))}if(y!==null){var Y=g.baseState;x=0,K=z=M=null,T=y;do{var q=T.lane,re=T.eventTime;if((h&q)===q){K!==null&&(K=K.next={eventTime:re,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var he=n,de=T;switch(q=s,re=a,de.tag){case 1:if(he=de.payload,typeof he=="function"){Y=he.call(re,Y,q);break e}Y=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=de.payload,q=typeof he=="function"?he.call(re,Y,q):he,q==null)break e;Y=W({},Y,q);break e;case 2:cr=!0}}T.callback!==null&&T.lane!==0&&(n.flags|=64,q=g.effects,q===null?g.effects=[T]:q.push(T))}else re={eventTime:re,lane:q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},K===null?(z=K=re,M=Y):K=K.next=re,x|=q;if(T=T.next,T===null){if(T=g.shared.pending,T===null)break;q=T,T=q.next,q.next=null,g.lastBaseUpdate=q,g.shared.pending=null}}while(!0);if(K===null&&(M=Y),g.baseState=M,g.firstBaseUpdate=z,g.lastBaseUpdate=K,s=g.shared.interleaved,s!==null){g=s;do x|=g.lane,g=g.next;while(g!==s)}else y===null&&(g.shared.lanes=0);co|=x,n.lanes=x,n.memoizedState=Y}}function x0(n,s,a){if(n=s.effects,s.effects=null,n!==null)for(s=0;s<n.length;s++){var h=n[s],g=h.callback;if(g!==null){if(h.callback=null,h=a,typeof g!="function")throw Error(t(191,g));g.call(h)}}}var Fc={},ji=or(Fc),Dc=or(Fc),Oc=or(Fc);function ao(n){if(n===Fc)throw Error(t(174));return n}function hg(n,s){switch(Ze(Oc,s),Ze(Dc,n),Ze(ji,Fc),n=s.nodeType,n){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Fi(null,"");break;default:n=n===8?s.parentNode:s,s=n.namespaceURI||null,n=n.tagName,s=Fi(s,n)}tt(ji),Ze(ji,s)}function Wa(){tt(ji),tt(Dc),tt(Oc)}function _0(n){ao(Oc.current);var s=ao(ji.current),a=Fi(s,n.type);s!==a&&(Ze(Dc,n),Ze(ji,a))}function dg(n){Dc.current===n&&(tt(ji),tt(Dc))}var ot=or(0);function bd(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var fg=[];function pg(){for(var n=0;n<fg.length;n++)fg[n]._workInProgressVersionPrimary=null;fg.length=0}var xd=D.ReactCurrentDispatcher,gg=D.ReactCurrentBatchConfig,lo=0,at=null,Ct=null,Nt=null,_d=!1,jc=!1,zc=0,v_=0;function Qt(){throw Error(t(321))}function mg(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!hi(n[a],s[a]))return!1;return!0}function yg(n,s,a,h,g,y){if(lo=y,at=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,xd.current=n===null||n.memoizedState===null?x_:__,n=a(h,g),jc){y=0;do{if(jc=!1,zc=0,25<=y)throw Error(t(301));y+=1,Nt=Ct=null,s.updateQueue=null,xd.current=S_,n=a(h,g)}while(jc)}if(xd.current=Cd,s=Ct!==null&&Ct.next!==null,lo=0,Nt=Ct=at=null,_d=!1,s)throw Error(t(300));return n}function vg(){var n=zc!==0;return zc=0,n}function zi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?at.memoizedState=Nt=n:Nt=Nt.next=n,Nt}function Yn(){if(Ct===null){var n=at.alternate;n=n!==null?n.memoizedState:null}else n=Ct.next;var s=Nt===null?at.memoizedState:Nt.next;if(s!==null)Nt=s,Ct=n;else{if(n===null)throw Error(t(310));Ct=n,n={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Nt===null?at.memoizedState=Nt=n:Nt=Nt.next=n}return Nt}function Hc(n,s){return typeof s=="function"?s(n):s}function wg(n){var s=Yn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=Ct,g=h.baseQueue,y=a.pending;if(y!==null){if(g!==null){var x=g.next;g.next=y.next,y.next=x}h.baseQueue=g=y,a.pending=null}if(g!==null){y=g.next,h=h.baseState;var T=x=null,M=null,z=y;do{var K=z.lane;if((lo&K)===K)M!==null&&(M=M.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),h=z.hasEagerState?z.eagerState:n(h,z.action);else{var Y={lane:K,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};M===null?(T=M=Y,x=h):M=M.next=Y,at.lanes|=K,co|=K}z=z.next}while(z!==null&&z!==y);M===null?x=h:M.next=T,hi(h,s.memoizedState)||(An=!0),s.memoizedState=h,s.baseState=x,s.baseQueue=M,a.lastRenderedState=h}if(n=a.interleaved,n!==null){g=n;do y=g.lane,at.lanes|=y,co|=y,g=g.next;while(g!==n)}else g===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Ag(n){var s=Yn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var h=a.dispatch,g=a.pending,y=s.memoizedState;if(g!==null){a.pending=null;var x=g=g.next;do y=n(y,x.action),x=x.next;while(x!==g);hi(y,s.memoizedState)||(An=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),a.lastRenderedState=y}return[y,h]}function S0(){}function E0(n,s){var a=at,h=Yn(),g=s(),y=!hi(h.memoizedState,g);if(y&&(h.memoizedState=g,An=!0),h=h.queue,bg(T0.bind(null,a,h,n),[n]),h.getSnapshot!==s||y||Nt!==null&&Nt.memoizedState.tag&1){if(a.flags|=2048,Bc(9,k0.bind(null,a,h,g,s),void 0,null),Ft===null)throw Error(t(349));(lo&30)!==0||C0(a,s,g)}return g}function C0(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=at.updateQueue,s===null?(s={lastEffect:null,stores:null},at.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function k0(n,s,a,h){s.value=a,s.getSnapshot=h,P0(s)&&R0(n)}function T0(n,s,a){return a(function(){P0(s)&&R0(n)})}function P0(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!hi(n,a)}catch{return!0}}function R0(n){var s=ds(n,1);s!==null&&mi(s,n,1,-1)}function L0(n){var s=zi();return typeof n=="function"&&(n=n()),s.memoizedState=s.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hc,lastRenderedState:n},s.queue=n,n=n.dispatch=b_.bind(null,at,n),[s.memoizedState,n]}function Bc(n,s,a,h){return n={tag:n,create:s,destroy:a,deps:h,next:null},s=at.updateQueue,s===null?(s={lastEffect:null,stores:null},at.updateQueue=s,s.lastEffect=n.next=n):(a=s.lastEffect,a===null?s.lastEffect=n.next=n:(h=a.next,a.next=n,n.next=h,s.lastEffect=n)),n}function M0(){return Yn().memoizedState}function Sd(n,s,a,h){var g=zi();at.flags|=n,g.memoizedState=Bc(1|s,a,void 0,h===void 0?null:h)}function Ed(n,s,a,h){var g=Yn();h=h===void 0?null:h;var y=void 0;if(Ct!==null){var x=Ct.memoizedState;if(y=x.destroy,h!==null&&mg(h,x.deps)){g.memoizedState=Bc(s,a,y,h);return}}at.flags|=n,g.memoizedState=Bc(1|s,a,y,h)}function I0(n,s){return Sd(8390656,8,n,s)}function bg(n,s){return Ed(2048,8,n,s)}function N0(n,s){return Ed(4,2,n,s)}function F0(n,s){return Ed(4,4,n,s)}function D0(n,s){if(typeof s=="function")return n=n(),s(n),function(){s(null)};if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function O0(n,s,a){return a=a!=null?a.concat([n]):null,Ed(4,4,D0.bind(null,s,n),a)}function xg(){}function j0(n,s){var a=Yn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&mg(s,h[1])?h[0]:(a.memoizedState=[n,s],n)}function z0(n,s){var a=Yn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&mg(s,h[1])?h[0]:(n=n(),a.memoizedState=[n,s],n)}function H0(n,s,a){return(lo&21)===0?(n.baseState&&(n.baseState=!1,An=!0),n.memoizedState=a):(hi(a,s)||(a=mv(),at.lanes|=a,co|=a,n.baseState=!0),s)}function w_(n,s){var a=We;We=a!==0&&4>a?a:4,n(!0);var h=gg.transition;gg.transition={};try{n(!1),s()}finally{We=a,gg.transition=h}}function B0(){return Yn().memoizedState}function A_(n,s,a){var h=pr(n);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},U0(n))$0(s,a);else if(a=w0(n,s,a,h),a!==null){var g=un();mi(a,n,h,g),V0(a,s,h)}}function b_(n,s,a){var h=pr(n),g={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(U0(n))$0(s,g);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var x=s.lastRenderedState,T=y(x,a);if(g.hasEagerState=!0,g.eagerState=T,hi(T,x)){var M=s.interleaved;M===null?(g.next=g,cg(s)):(g.next=M.next,M.next=g),s.interleaved=g;return}}catch{}finally{}a=w0(n,s,g,h),a!==null&&(g=un(),mi(a,n,h,g),V0(a,s,h))}}function U0(n){var s=n.alternate;return n===at||s!==null&&s===at}function $0(n,s){jc=_d=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function V0(n,s,a){if((a&4194240)!==0){var h=s.lanes;h&=n.pendingLanes,a|=h,s.lanes=a,Sp(n,a)}}var Cd={readContext:Kn,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},x_={readContext:Kn,useCallback:function(n,s){return zi().memoizedState=[n,s===void 0?null:s],n},useContext:Kn,useEffect:I0,useImperativeHandle:function(n,s,a){return a=a!=null?a.concat([n]):null,Sd(4194308,4,D0.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Sd(4194308,4,n,s)},useInsertionEffect:function(n,s){return Sd(4,2,n,s)},useMemo:function(n,s){var a=zi();return s=s===void 0?null:s,n=n(),a.memoizedState=[n,s],n},useReducer:function(n,s,a){var h=zi();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},h.queue=n,n=n.dispatch=A_.bind(null,at,n),[h.memoizedState,n]},useRef:function(n){var s=zi();return n={current:n},s.memoizedState=n},useState:L0,useDebugValue:xg,useDeferredValue:function(n){return zi().memoizedState=n},useTransition:function(){var n=L0(!1),s=n[0];return n=w_.bind(null,n[1]),zi().memoizedState=n,[s,n]},useMutableSource:function(){},useSyncExternalStore:function(n,s,a){var h=at,g=zi();if(st){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Ft===null)throw Error(t(349));(lo&30)!==0||C0(h,s,a)}g.memoizedState=a;var y={value:a,getSnapshot:s};return g.queue=y,I0(T0.bind(null,h,y,n),[n]),h.flags|=2048,Bc(9,k0.bind(null,h,y,a,s),void 0,null),a},useId:function(){var n=zi(),s=Ft.identifierPrefix;if(st){var a=hs,h=us;a=(h&~(1<<32-ui(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=zc++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=v_++,s=":"+s+"r"+a.toString(32)+":";return n.memoizedState=s},unstable_isNewReconciler:!1},__={readContext:Kn,useCallback:j0,useContext:Kn,useEffect:bg,useImperativeHandle:O0,useInsertionEffect:N0,useLayoutEffect:F0,useMemo:z0,useReducer:wg,useRef:M0,useState:function(){return wg(Hc)},useDebugValue:xg,useDeferredValue:function(n){var s=Yn();return H0(s,Ct.memoizedState,n)},useTransition:function(){var n=wg(Hc)[0],s=Yn().memoizedState;return[n,s]},useMutableSource:S0,useSyncExternalStore:E0,useId:B0,unstable_isNewReconciler:!1},S_={readContext:Kn,useCallback:j0,useContext:Kn,useEffect:bg,useImperativeHandle:O0,useInsertionEffect:N0,useLayoutEffect:F0,useMemo:z0,useReducer:Ag,useRef:M0,useState:function(){return Ag(Hc)},useDebugValue:xg,useDeferredValue:function(n){var s=Yn();return Ct===null?s.memoizedState=n:H0(s,Ct.memoizedState,n)},useTransition:function(){var n=Ag(Hc)[0],s=Yn().memoizedState;return[n,s]},useMutableSource:S0,useSyncExternalStore:E0,useId:B0,unstable_isNewReconciler:!1};function fi(n,s){if(n&&n.defaultProps){s=W({},s),n=n.defaultProps;for(var a in n)s[a]===void 0&&(s[a]=n[a]);return s}return s}function _g(n,s,a,h){s=n.memoizedState,a=a(h,s),a=a==null?s:W({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var kd={isMounted:function(n){return(n=n._reactInternals)?to(n)===n:!1},enqueueSetState:function(n,s,a){n=n._reactInternals;var h=un(),g=pr(n),y=fs(h,g);y.payload=s,a!=null&&(y.callback=a),s=ur(n,y,g),s!==null&&(mi(s,n,g,h),wd(s,n,g))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var h=un(),g=pr(n),y=fs(h,g);y.tag=1,y.payload=s,a!=null&&(y.callback=a),s=ur(n,y,g),s!==null&&(mi(s,n,g,h),wd(s,n,g))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=un(),h=pr(n),g=fs(a,h);g.tag=2,s!=null&&(g.callback=s),s=ur(n,g,h),s!==null&&(mi(s,n,h,a),wd(s,n,h))}};function W0(n,s,a,h,g,y,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(h,y,x):s.prototype&&s.prototype.isPureReactComponent?!kc(a,h)||!kc(g,y):!0}function G0(n,s,a){var h=!1,g=ar,y=s.contextType;return typeof y=="object"&&y!==null?y=Kn(y):(g=wn(s)?io:Yt.current,h=s.contextTypes,y=(h=h!=null)?ja(n,g):ar),s=new s(a,y),n.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=kd,n.stateNode=s,s._reactInternals=n,h&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=g,n.__reactInternalMemoizedMaskedChildContext=y),s}function X0(n,s,a,h){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==n&&kd.enqueueReplaceState(s,s.state,null)}function Sg(n,s,a,h){var g=n.stateNode;g.props=a,g.state=n.memoizedState,g.refs={},ug(n);var y=s.contextType;typeof y=="object"&&y!==null?g.context=Kn(y):(y=wn(s)?io:Yt.current,g.context=ja(n,y)),g.state=n.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(_g(n,s,y,a),g.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(s=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),s!==g.state&&kd.enqueueReplaceState(g,g.state,null),Ad(n,a,g,h),g.state=n.memoizedState),typeof g.componentDidMount=="function"&&(n.flags|=4194308)}function Ga(n,s){try{var a="",h=s;do a+=ke(h),h=h.return;while(h);var g=a}catch(y){g=`
Error generating stack: `+y.message+`
`+y.stack}return{value:n,source:s,stack:g,digest:null}}function Eg(n,s,a){return{value:n,source:null,stack:a??null,digest:s??null}}function Cg(n,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var E_=typeof WeakMap=="function"?WeakMap:Map;function q0(n,s,a){a=fs(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){Nd||(Nd=!0,Bg=h),Cg(n,s)},a}function K0(n,s,a){a=fs(-1,a),a.tag=3;var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var g=s.value;a.payload=function(){return h(g)},a.callback=function(){Cg(n,s)}}var y=n.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(a.callback=function(){Cg(n,s),typeof h!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var x=s.stack;this.componentDidCatch(s.value,{componentStack:x!==null?x:""})}),a}function Y0(n,s,a){var h=n.pingCache;if(h===null){h=n.pingCache=new E_;var g=new Set;h.set(s,g)}else g=h.get(s),g===void 0&&(g=new Set,h.set(s,g));g.has(a)||(g.add(a),n=z_.bind(null,n,s,a),s.then(n,n))}function Q0(n){do{var s;if((s=n.tag===13)&&(s=n.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return n;n=n.return}while(n!==null);return null}function Z0(n,s,a,h,g){return(n.mode&1)===0?(n===s?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=fs(-1,1),s.tag=2,ur(a,s,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=g,n)}var C_=D.ReactCurrentOwner,An=!1;function cn(n,s,a,h){s.child=n===null?v0(s,null,a,h):Ua(s,n.child,a,h)}function J0(n,s,a,h,g){a=a.render;var y=s.ref;return Va(s,g),h=yg(n,s,a,h,y,g),a=vg(),n!==null&&!An?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,ps(n,s,g)):(st&&a&&eg(s),s.flags|=1,cn(n,s,h,g),s.child)}function ew(n,s,a,h,g){if(n===null){var y=a.type;return typeof y=="function"&&!qg(y)&&y.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=y,tw(n,s,y,h,g)):(n=Hd(a.type,null,h,s,s.mode,g),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,(n.lanes&g)===0){var x=y.memoizedProps;if(a=a.compare,a=a!==null?a:kc,a(x,h)&&n.ref===s.ref)return ps(n,s,g)}return s.flags|=1,n=mr(y,h),n.ref=s.ref,n.return=s,s.child=n}function tw(n,s,a,h,g){if(n!==null){var y=n.memoizedProps;if(kc(y,h)&&n.ref===s.ref)if(An=!1,s.pendingProps=h=y,(n.lanes&g)!==0)(n.flags&131072)!==0&&(An=!0);else return s.lanes=n.lanes,ps(n,s,g)}return kg(n,s,a,h,g)}function nw(n,s,a){var h=s.pendingProps,g=h.children,y=n!==null?n.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(qa,Nn),Nn|=a;else{if((a&1073741824)===0)return n=y!==null?y.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:n,cachePool:null,transitions:null},s.updateQueue=null,Ze(qa,Nn),Nn|=n,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:a,Ze(qa,Nn),Nn|=h}else y!==null?(h=y.baseLanes|a,s.memoizedState=null):h=a,Ze(qa,Nn),Nn|=h;return cn(n,s,g,a),s.child}function iw(n,s){var a=s.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function kg(n,s,a,h,g){var y=wn(a)?io:Yt.current;return y=ja(s,y),Va(s,g),a=yg(n,s,a,h,y,g),h=vg(),n!==null&&!An?(s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~g,ps(n,s,g)):(st&&h&&eg(s),s.flags|=1,cn(n,s,a,g),s.child)}function sw(n,s,a,h,g){if(wn(a)){var y=!0;hd(s)}else y=!1;if(Va(s,g),s.stateNode===null)Pd(n,s),G0(s,a,h),Sg(s,a,h,g),h=!0;else if(n===null){var x=s.stateNode,T=s.memoizedProps;x.props=T;var M=x.context,z=a.contextType;typeof z=="object"&&z!==null?z=Kn(z):(z=wn(a)?io:Yt.current,z=ja(s,z));var K=a.getDerivedStateFromProps,Y=typeof K=="function"||typeof x.getSnapshotBeforeUpdate=="function";Y||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(T!==h||M!==z)&&X0(s,x,h,z),cr=!1;var q=s.memoizedState;x.state=q,Ad(s,h,x,g),M=s.memoizedState,T!==h||q!==M||vn.current||cr?(typeof K=="function"&&(_g(s,a,K,h),M=s.memoizedState),(T=cr||W0(s,a,T,h,q,M,z))?(Y||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=M),x.props=h,x.state=M,x.context=z,h=T):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{x=s.stateNode,A0(n,s),T=s.memoizedProps,z=s.type===s.elementType?T:fi(s.type,T),x.props=z,Y=s.pendingProps,q=x.context,M=a.contextType,typeof M=="object"&&M!==null?M=Kn(M):(M=wn(a)?io:Yt.current,M=ja(s,M));var re=a.getDerivedStateFromProps;(K=typeof re=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(T!==Y||q!==M)&&X0(s,x,h,M),cr=!1,q=s.memoizedState,x.state=q,Ad(s,h,x,g);var he=s.memoizedState;T!==Y||q!==he||vn.current||cr?(typeof re=="function"&&(_g(s,a,re,h),he=s.memoizedState),(z=cr||W0(s,a,z,h,q,he,M)||!1)?(K||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(h,he,M),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(h,he,M)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||T===n.memoizedProps&&q===n.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&q===n.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=he),x.props=h,x.state=he,x.context=M,h=z):(typeof x.componentDidUpdate!="function"||T===n.memoizedProps&&q===n.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&q===n.memoizedState||(s.flags|=1024),h=!1)}return Tg(n,s,a,h,y,g)}function Tg(n,s,a,h,g,y){iw(n,s);var x=(s.flags&128)!==0;if(!h&&!x)return g&&c0(s,a,!1),ps(n,s,y);h=s.stateNode,C_.current=s;var T=x&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,n!==null&&x?(s.child=Ua(s,n.child,null,y),s.child=Ua(s,null,T,y)):cn(n,s,T,y),s.memoizedState=h.state,g&&c0(s,a,!0),s.child}function rw(n){var s=n.stateNode;s.pendingContext?a0(n,s.pendingContext,s.pendingContext!==s.context):s.context&&a0(n,s.context,!1),hg(n,s.containerInfo)}function ow(n,s,a,h,g){return Ba(),sg(g),s.flags|=256,cn(n,s,a,h),s.child}var Pg={dehydrated:null,treeContext:null,retryLane:0};function Rg(n){return{baseLanes:n,cachePool:null,transitions:null}}function aw(n,s,a){var h=s.pendingProps,g=ot.current,y=!1,x=(s.flags&128)!==0,T;if((T=x)||(T=n!==null&&n.memoizedState===null?!1:(g&2)!==0),T?(y=!0,s.flags&=-129):(n===null||n.memoizedState!==null)&&(g|=1),Ze(ot,g&1),n===null)return ig(s),n=s.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((s.mode&1)===0?s.lanes=1:n.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(x=h.children,n=h.fallback,y?(h=s.mode,y=s.child,x={mode:"hidden",children:x},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=x):y=Bd(x,h,0,null),n=po(n,h,a,null),y.return=s,n.return=s,y.sibling=n,s.child=y,s.child.memoizedState=Rg(a),s.memoizedState=Pg,n):Lg(s,x));if(g=n.memoizedState,g!==null&&(T=g.dehydrated,T!==null))return k_(n,s,x,h,T,g,a);if(y){y=h.fallback,x=s.mode,g=n.child,T=g.sibling;var M={mode:"hidden",children:h.children};return(x&1)===0&&s.child!==g?(h=s.child,h.childLanes=0,h.pendingProps=M,s.deletions=null):(h=mr(g,M),h.subtreeFlags=g.subtreeFlags&14680064),T!==null?y=mr(T,y):(y=po(y,x,a,null),y.flags|=2),y.return=s,h.return=s,h.sibling=y,s.child=h,h=y,y=s.child,x=n.child.memoizedState,x=x===null?Rg(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},y.memoizedState=x,y.childLanes=n.childLanes&~a,s.memoizedState=Pg,h}return y=n.child,n=y.sibling,h=mr(y,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=a),h.return=s,h.sibling=null,n!==null&&(a=s.deletions,a===null?(s.deletions=[n],s.flags|=16):a.push(n)),s.child=h,s.memoizedState=null,h}function Lg(n,s){return s=Bd({mode:"visible",children:s},n.mode,0,null),s.return=n,n.child=s}function Td(n,s,a,h){return h!==null&&sg(h),Ua(s,n.child,null,a),n=Lg(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function k_(n,s,a,h,g,y,x){if(a)return s.flags&256?(s.flags&=-257,h=Eg(Error(t(422))),Td(n,s,x,h)):s.memoizedState!==null?(s.child=n.child,s.flags|=128,null):(y=h.fallback,g=s.mode,h=Bd({mode:"visible",children:h.children},g,0,null),y=po(y,g,x,null),y.flags|=2,h.return=s,y.return=s,h.sibling=y,s.child=h,(s.mode&1)!==0&&Ua(s,n.child,null,x),s.child.memoizedState=Rg(x),s.memoizedState=Pg,y);if((s.mode&1)===0)return Td(n,s,x,null);if(g.data==="$!"){if(h=g.nextSibling&&g.nextSibling.dataset,h)var T=h.dgst;return h=T,y=Error(t(419)),h=Eg(y,h,void 0),Td(n,s,x,h)}if(T=(x&n.childLanes)!==0,An||T){if(h=Ft,h!==null){switch(x&-x){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(h.suspendedLanes|x))!==0?0:g,g!==0&&g!==y.retryLane&&(y.retryLane=g,ds(n,g),mi(h,n,g,-1))}return Xg(),h=Eg(Error(t(421))),Td(n,s,x,h)}return g.data==="$?"?(s.flags|=128,s.child=n.child,s=H_.bind(null,n),g._reactRetry=s,null):(n=y.treeContext,In=rr(g.nextSibling),Mn=s,st=!0,di=null,n!==null&&(Xn[qn++]=us,Xn[qn++]=hs,Xn[qn++]=so,us=n.id,hs=n.overflow,so=s),s=Lg(s,h.children),s.flags|=4096,s)}function lw(n,s,a){n.lanes|=s;var h=n.alternate;h!==null&&(h.lanes|=s),lg(n.return,s,a)}function Mg(n,s,a,h,g){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:g}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=a,y.tailMode=g)}function cw(n,s,a){var h=s.pendingProps,g=h.revealOrder,y=h.tail;if(cn(n,s,h.children,a),h=ot.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&lw(n,a,s);else if(n.tag===19)lw(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}h&=1}if(Ze(ot,h),(s.mode&1)===0)s.memoizedState=null;else switch(g){case"forwards":for(a=s.child,g=null;a!==null;)n=a.alternate,n!==null&&bd(n)===null&&(g=a),a=a.sibling;a=g,a===null?(g=s.child,s.child=null):(g=a.sibling,a.sibling=null),Mg(s,!1,g,a,y);break;case"backwards":for(a=null,g=s.child,s.child=null;g!==null;){if(n=g.alternate,n!==null&&bd(n)===null){s.child=g;break}n=g.sibling,g.sibling=a,a=g,g=n}Mg(s,!0,a,null,y);break;case"together":Mg(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Pd(n,s){(s.mode&1)===0&&n!==null&&(n.alternate=null,s.alternate=null,s.flags|=2)}function ps(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),co|=s.lanes,(a&s.childLanes)===0)return null;if(n!==null&&s.child!==n.child)throw Error(t(153));if(s.child!==null){for(n=s.child,a=mr(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=mr(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function T_(n,s,a){switch(s.tag){case 3:rw(s),Ba();break;case 5:_0(s);break;case 1:wn(s.type)&&hd(s);break;case 4:hg(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,g=s.memoizedProps.value;Ze(yd,h._currentValue),h._currentValue=g;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Ze(ot,ot.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?aw(n,s,a):(Ze(ot,ot.current&1),n=ps(n,s,a),n!==null?n.sibling:null);Ze(ot,ot.current&1);break;case 19:if(h=(a&s.childLanes)!==0,(n.flags&128)!==0){if(h)return cw(n,s,a);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ze(ot,ot.current),h)break;return null;case 22:case 23:return s.lanes=0,nw(n,s,a)}return ps(n,s,a)}var uw,Ig,hw,dw;uw=function(n,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Ig=function(){},hw=function(n,s,a,h){var g=n.memoizedProps;if(g!==h){n=s.stateNode,ao(ji.current);var y=null;switch(a){case"input":g=it(n,g),h=it(n,h),y=[];break;case"select":g=W({},g,{value:void 0}),h=W({},h,{value:void 0}),y=[];break;case"textarea":g=uc(n,g),h=uc(n,h),y=[];break;default:typeof g.onClick!="function"&&typeof h.onClick=="function"&&(n.onclick=ld)}fp(a,h);var x;a=null;for(z in g)if(!h.hasOwnProperty(z)&&g.hasOwnProperty(z)&&g[z]!=null)if(z==="style"){var T=g[z];for(x in T)T.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(r.hasOwnProperty(z)?y||(y=[]):(y=y||[]).push(z,null));for(z in h){var M=h[z];if(T=g!=null?g[z]:void 0,h.hasOwnProperty(z)&&M!==T&&(M!=null||T!=null))if(z==="style")if(T){for(x in T)!T.hasOwnProperty(x)||M&&M.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in M)M.hasOwnProperty(x)&&T[x]!==M[x]&&(a||(a={}),a[x]=M[x])}else a||(y||(y=[]),y.push(z,a)),a=M;else z==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,T=T?T.__html:void 0,M!=null&&T!==M&&(y=y||[]).push(z,M)):z==="children"?typeof M!="string"&&typeof M!="number"||(y=y||[]).push(z,""+M):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(r.hasOwnProperty(z)?(M!=null&&z==="onScroll"&&et("scroll",n),y||T===M||(y=[])):(y=y||[]).push(z,M))}a&&(y=y||[]).push("style",a);var z=y;(s.updateQueue=z)&&(s.flags|=4)}},dw=function(n,s,a,h){a!==h&&(s.flags|=4)};function Uc(n,s){if(!st)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:h.sibling=null}}function Zt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,h=0;if(s)for(var g=n.child;g!==null;)a|=g.lanes|g.childLanes,h|=g.subtreeFlags&14680064,h|=g.flags&14680064,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)a|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=h,n.childLanes=a,s}function P_(n,s,a){var h=s.pendingProps;switch(tg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(s),null;case 1:return wn(s.type)&&ud(),Zt(s),null;case 3:return h=s.stateNode,Wa(),tt(vn),tt(Yt),pg(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(n===null||n.child===null)&&(gd(s)?s.flags|=4:n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,di!==null&&(Vg(di),di=null))),Ig(n,s),Zt(s),null;case 5:dg(s);var g=ao(Oc.current);if(a=s.type,n!==null&&s.stateNode!=null)hw(n,s,a,h,g),n.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Zt(s),null}if(n=ao(ji.current),gd(s)){h=s.stateNode,a=s.type;var y=s.memoizedProps;switch(h[Oi]=s,h[Mc]=y,n=(s.mode&1)!==0,a){case"dialog":et("cancel",h),et("close",h);break;case"iframe":case"object":case"embed":et("load",h);break;case"video":case"audio":for(g=0;g<Pc.length;g++)et(Pc[g],h);break;case"source":et("error",h);break;case"img":case"image":case"link":et("error",h),et("load",h);break;case"details":et("toggle",h);break;case"input":Et(h,y),et("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},et("invalid",h);break;case"textarea":Oh(h,y),et("invalid",h)}fp(a,y),g=null;for(var x in y)if(y.hasOwnProperty(x)){var T=y[x];x==="children"?typeof T=="string"?h.textContent!==T&&(y.suppressHydrationWarning!==!0&&ad(h.textContent,T,n),g=["children",T]):typeof T=="number"&&h.textContent!==""+T&&(y.suppressHydrationWarning!==!0&&ad(h.textContent,T,n),g=["children",""+T]):r.hasOwnProperty(x)&&T!=null&&x==="onScroll"&&et("scroll",h)}switch(a){case"input":Ii(h),Zs(h,y,!0);break;case"textarea":Ii(h),zh(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=ld)}h=g,s.updateQueue=h,h!==null&&(s.flags|=4)}else{x=g.nodeType===9?g:g.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Hh(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=x.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof h.is=="string"?n=x.createElement(a,{is:h.is}):(n=x.createElement(a),a==="select"&&(x=n,h.multiple?x.multiple=!0:h.size&&(x.size=h.size))):n=x.createElementNS(n,a),n[Oi]=s,n[Mc]=h,uw(n,s,!1,!1),s.stateNode=n;e:{switch(x=pp(a,h),a){case"dialog":et("cancel",n),et("close",n),g=h;break;case"iframe":case"object":case"embed":et("load",n),g=h;break;case"video":case"audio":for(g=0;g<Pc.length;g++)et(Pc[g],n);g=h;break;case"source":et("error",n),g=h;break;case"img":case"image":case"link":et("error",n),et("load",n),g=h;break;case"details":et("toggle",n),g=h;break;case"input":Et(n,h),g=it(n,h),et("invalid",n);break;case"option":g=h;break;case"select":n._wrapperState={wasMultiple:!!h.multiple},g=W({},h,{value:void 0}),et("invalid",n);break;case"textarea":Oh(n,h),g=uc(n,h),et("invalid",n);break;default:g=h}fp(a,g),T=g;for(y in T)if(T.hasOwnProperty(y)){var M=T[y];y==="style"?tv(n,M):y==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&eo(n,M)):y==="children"?typeof M=="string"?(a!=="textarea"||M!=="")&&as(n,M):typeof M=="number"&&as(n,""+M):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(r.hasOwnProperty(y)?M!=null&&y==="onScroll"&&et("scroll",n):M!=null&&F(n,y,M,x))}switch(a){case"input":Ii(n),Zs(n,h,!1);break;case"textarea":Ii(n),zh(n);break;case"option":h.value!=null&&n.setAttribute("value",""+Le(h.value));break;case"select":n.multiple=!!h.multiple,y=h.value,y!=null?ci(n,!!h.multiple,y,!1):h.defaultValue!=null&&ci(n,!!h.multiple,h.defaultValue,!0);break;default:typeof g.onClick=="function"&&(n.onclick=ld)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Zt(s),null;case 6:if(n&&s.stateNode!=null)dw(n,s,n.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(a=ao(Oc.current),ao(ji.current),gd(s)){if(h=s.stateNode,a=s.memoizedProps,h[Oi]=s,(y=h.nodeValue!==a)&&(n=Mn,n!==null))switch(n.tag){case 3:ad(h.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ad(h.nodeValue,a,(n.mode&1)!==0)}y&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[Oi]=s,s.stateNode=h}return Zt(s),null;case 13:if(tt(ot),h=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(st&&In!==null&&(s.mode&1)!==0&&(s.flags&128)===0)g0(),Ba(),s.flags|=98560,y=!1;else if(y=gd(s),h!==null&&h.dehydrated!==null){if(n===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Oi]=s}else Ba(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Zt(s),y=!1}else di!==null&&(Vg(di),di=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(h=h!==null,h!==(n!==null&&n.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(n===null||(ot.current&1)!==0?kt===0&&(kt=3):Xg())),s.updateQueue!==null&&(s.flags|=4),Zt(s),null);case 4:return Wa(),Ig(n,s),n===null&&Rc(s.stateNode.containerInfo),Zt(s),null;case 10:return ag(s.type._context),Zt(s),null;case 17:return wn(s.type)&&ud(),Zt(s),null;case 19:if(tt(ot),y=s.memoizedState,y===null)return Zt(s),null;if(h=(s.flags&128)!==0,x=y.rendering,x===null)if(h)Uc(y,!1);else{if(kt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(x=bd(n),x!==null){for(s.flags|=128,Uc(y,!1),h=x.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)y=a,n=h,y.flags&=14680066,x=y.alternate,x===null?(y.childLanes=0,y.lanes=n,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=x.childLanes,y.lanes=x.lanes,y.child=x.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=x.memoizedProps,y.memoizedState=x.memoizedState,y.updateQueue=x.updateQueue,y.type=x.type,n=x.dependencies,y.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ze(ot,ot.current&1|2),s.child}n=n.sibling}y.tail!==null&&mt()>Ka&&(s.flags|=128,h=!0,Uc(y,!1),s.lanes=4194304)}else{if(!h)if(n=bd(x),n!==null){if(s.flags|=128,h=!0,a=n.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Uc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!st)return Zt(s),null}else 2*mt()-y.renderingStartTime>Ka&&a!==1073741824&&(s.flags|=128,h=!0,Uc(y,!1),s.lanes=4194304);y.isBackwards?(x.sibling=s.child,s.child=x):(a=y.last,a!==null?a.sibling=x:s.child=x,y.last=x)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=mt(),s.sibling=null,a=ot.current,Ze(ot,h?a&1|2:a&1),s):(Zt(s),null);case 22:case 23:return Gg(),h=s.memoizedState!==null,n!==null&&n.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(Nn&1073741824)!==0&&(Zt(s),s.subtreeFlags&6&&(s.flags|=8192)):Zt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function R_(n,s){switch(tg(s),s.tag){case 1:return wn(s.type)&&ud(),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Wa(),tt(vn),tt(Yt),pg(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 5:return dg(s),null;case 13:if(tt(ot),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(t(340));Ba()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return tt(ot),null;case 4:return Wa(),null;case 10:return ag(s.type._context),null;case 22:case 23:return Gg(),null;case 24:return null;default:return null}}var Rd=!1,Jt=!1,L_=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Xa(n,s){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){dt(n,s,h)}else a.current=null}function Ng(n,s,a){try{a()}catch(h){dt(n,s,h)}}var fw=!1;function M_(n,s){if(Gp=Yh,n=Wv(),jp(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var g=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{a.nodeType,y.nodeType}catch{a=null;break e}var x=0,T=-1,M=-1,z=0,K=0,Y=n,q=null;t:for(;;){for(var re;Y!==a||g!==0&&Y.nodeType!==3||(T=x+g),Y!==y||h!==0&&Y.nodeType!==3||(M=x+h),Y.nodeType===3&&(x+=Y.nodeValue.length),(re=Y.firstChild)!==null;)q=Y,Y=re;for(;;){if(Y===n)break t;if(q===a&&++z===g&&(T=x),q===y&&++K===h&&(M=x),(re=Y.nextSibling)!==null)break;Y=q,q=Y.parentNode}Y=re}a=T===-1||M===-1?null:{start:T,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(Xp={focusedElem:n,selectionRange:a},Yh=!1,ae=s;ae!==null;)if(s=ae,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,ae=n;else for(;ae!==null;){s=ae;try{var he=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var de=he.memoizedProps,yt=he.memoizedState,O=s.stateNode,I=O.getSnapshotBeforeUpdate(s.elementType===s.type?de:fi(s.type,de),yt);O.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var j=s.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(J){dt(s,s.return,J)}if(n=s.sibling,n!==null){n.return=s.return,ae=n;break}ae=s.return}return he=fw,fw=!1,he}function $c(n,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&n)===n){var y=g.destroy;g.destroy=void 0,y!==void 0&&Ng(s,a,y)}g=g.next}while(g!==h)}}function Ld(n,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&n)===n){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function Fg(n){var s=n.ref;if(s!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof s=="function"?s(n):s.current=n}}function pw(n){var s=n.alternate;s!==null&&(n.alternate=null,pw(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&(delete s[Oi],delete s[Mc],delete s[Qp],delete s[p_],delete s[g_])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function gw(n){return n.tag===5||n.tag===3||n.tag===4}function mw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||gw(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Dg(n,s,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(n,s):a.insertBefore(n,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(n,a)):(s=a,s.appendChild(n)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=ld));else if(h!==4&&(n=n.child,n!==null))for(Dg(n,s,a),n=n.sibling;n!==null;)Dg(n,s,a),n=n.sibling}function Og(n,s,a){var h=n.tag;if(h===5||h===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(h!==4&&(n=n.child,n!==null))for(Og(n,s,a),n=n.sibling;n!==null;)Og(n,s,a),n=n.sibling}var $t=null,pi=!1;function hr(n,s,a){for(a=a.child;a!==null;)yw(n,s,a),a=a.sibling}function yw(n,s,a){if(Di&&typeof Di.onCommitFiberUnmount=="function")try{Di.onCommitFiberUnmount(Vh,a)}catch{}switch(a.tag){case 5:Jt||Xa(a,s);case 6:var h=$t,g=pi;$t=null,hr(n,s,a),$t=h,pi=g,$t!==null&&(pi?(n=$t,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):$t.removeChild(a.stateNode));break;case 18:$t!==null&&(pi?(n=$t,a=a.stateNode,n.nodeType===8?Yp(n.parentNode,a):n.nodeType===1&&Yp(n,a),bc(n)):Yp($t,a.stateNode));break;case 4:h=$t,g=pi,$t=a.stateNode.containerInfo,pi=!0,hr(n,s,a),$t=h,pi=g;break;case 0:case 11:case 14:case 15:if(!Jt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){g=h=h.next;do{var y=g,x=y.destroy;y=y.tag,x!==void 0&&((y&2)!==0||(y&4)!==0)&&Ng(a,s,x),g=g.next}while(g!==h)}hr(n,s,a);break;case 1:if(!Jt&&(Xa(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(T){dt(a,s,T)}hr(n,s,a);break;case 21:hr(n,s,a);break;case 22:a.mode&1?(Jt=(h=Jt)||a.memoizedState!==null,hr(n,s,a),Jt=h):hr(n,s,a);break;default:hr(n,s,a)}}function vw(n){var s=n.updateQueue;if(s!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new L_),s.forEach(function(h){var g=B_.bind(null,n,h);a.has(h)||(a.add(h),h.then(g,g))})}}function gi(n,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var g=a[h];try{var y=n,x=s,T=x;e:for(;T!==null;){switch(T.tag){case 5:$t=T.stateNode,pi=!1;break e;case 3:$t=T.stateNode.containerInfo,pi=!0;break e;case 4:$t=T.stateNode.containerInfo,pi=!0;break e}T=T.return}if($t===null)throw Error(t(160));yw(y,x,g),$t=null,pi=!1;var M=g.alternate;M!==null&&(M.return=null),g.return=null}catch(z){dt(g,s,z)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ww(s,n),s=s.sibling}function ww(n,s){var a=n.alternate,h=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(gi(s,n),Hi(n),h&4){try{$c(3,n,n.return),Ld(3,n)}catch(de){dt(n,n.return,de)}try{$c(5,n,n.return)}catch(de){dt(n,n.return,de)}}break;case 1:gi(s,n),Hi(n),h&512&&a!==null&&Xa(a,a.return);break;case 5:if(gi(s,n),Hi(n),h&512&&a!==null&&Xa(a,a.return),n.flags&32){var g=n.stateNode;try{as(g,"")}catch(de){dt(n,n.return,de)}}if(h&4&&(g=n.stateNode,g!=null)){var y=n.memoizedProps,x=a!==null?a.memoizedProps:y,T=n.type,M=n.updateQueue;if(n.updateQueue=null,M!==null)try{T==="input"&&y.type==="radio"&&y.name!=null&&gt(g,y),pp(T,x);var z=pp(T,y);for(x=0;x<M.length;x+=2){var K=M[x],Y=M[x+1];K==="style"?tv(g,Y):K==="dangerouslySetInnerHTML"?eo(g,Y):K==="children"?as(g,Y):F(g,K,Y,z)}switch(T){case"input":Ni(g,y);break;case"textarea":jh(g,y);break;case"select":var q=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!y.multiple;var re=y.value;re!=null?ci(g,!!y.multiple,re,!1):q!==!!y.multiple&&(y.defaultValue!=null?ci(g,!!y.multiple,y.defaultValue,!0):ci(g,!!y.multiple,y.multiple?[]:"",!1))}g[Mc]=y}catch(de){dt(n,n.return,de)}}break;case 6:if(gi(s,n),Hi(n),h&4){if(n.stateNode===null)throw Error(t(162));g=n.stateNode,y=n.memoizedProps;try{g.nodeValue=y}catch(de){dt(n,n.return,de)}}break;case 3:if(gi(s,n),Hi(n),h&4&&a!==null&&a.memoizedState.isDehydrated)try{bc(s.containerInfo)}catch(de){dt(n,n.return,de)}break;case 4:gi(s,n),Hi(n);break;case 13:gi(s,n),Hi(n),g=n.child,g.flags&8192&&(y=g.memoizedState!==null,g.stateNode.isHidden=y,!y||g.alternate!==null&&g.alternate.memoizedState!==null||(Hg=mt())),h&4&&vw(n);break;case 22:if(K=a!==null&&a.memoizedState!==null,n.mode&1?(Jt=(z=Jt)||K,gi(s,n),Jt=z):gi(s,n),Hi(n),h&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!K&&(n.mode&1)!==0)for(ae=n,K=n.child;K!==null;){for(Y=ae=K;ae!==null;){switch(q=ae,re=q.child,q.tag){case 0:case 11:case 14:case 15:$c(4,q,q.return);break;case 1:Xa(q,q.return);var he=q.stateNode;if(typeof he.componentWillUnmount=="function"){h=q,a=q.return;try{s=h,he.props=s.memoizedProps,he.state=s.memoizedState,he.componentWillUnmount()}catch(de){dt(h,a,de)}}break;case 5:Xa(q,q.return);break;case 22:if(q.memoizedState!==null){xw(Y);continue}}re!==null?(re.return=q,ae=re):xw(Y)}K=K.sibling}e:for(K=null,Y=n;;){if(Y.tag===5){if(K===null){K=Y;try{g=Y.stateNode,z?(y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(T=Y.stateNode,M=Y.memoizedProps.style,x=M!=null&&M.hasOwnProperty("display")?M.display:null,T.style.display=ev("display",x))}catch(de){dt(n,n.return,de)}}}else if(Y.tag===6){if(K===null)try{Y.stateNode.nodeValue=z?"":Y.memoizedProps}catch(de){dt(n,n.return,de)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===n)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===n)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===n)break e;K===Y&&(K=null),Y=Y.return}K===Y&&(K=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:gi(s,n),Hi(n),h&4&&vw(n);break;case 21:break;default:gi(s,n),Hi(n)}}function Hi(n){var s=n.flags;if(s&2){try{e:{for(var a=n.return;a!==null;){if(gw(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var g=h.stateNode;h.flags&32&&(as(g,""),h.flags&=-33);var y=mw(n);Og(n,y,g);break;case 3:case 4:var x=h.stateNode.containerInfo,T=mw(n);Dg(n,T,x);break;default:throw Error(t(161))}}catch(M){dt(n,n.return,M)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function I_(n,s,a){ae=n,Aw(n)}function Aw(n,s,a){for(var h=(n.mode&1)!==0;ae!==null;){var g=ae,y=g.child;if(g.tag===22&&h){var x=g.memoizedState!==null||Rd;if(!x){var T=g.alternate,M=T!==null&&T.memoizedState!==null||Jt;T=Rd;var z=Jt;if(Rd=x,(Jt=M)&&!z)for(ae=g;ae!==null;)x=ae,M=x.child,x.tag===22&&x.memoizedState!==null?_w(g):M!==null?(M.return=x,ae=M):_w(g);for(;y!==null;)ae=y,Aw(y),y=y.sibling;ae=g,Rd=T,Jt=z}bw(n)}else(g.subtreeFlags&8772)!==0&&y!==null?(y.return=g,ae=y):bw(n)}}function bw(n){for(;ae!==null;){var s=ae;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Jt||Ld(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Jt)if(a===null)h.componentDidMount();else{var g=s.elementType===s.type?a.memoizedProps:fi(s.type,a.memoizedProps);h.componentDidUpdate(g,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&x0(s,y,h);break;case 3:var x=s.updateQueue;if(x!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}x0(s,x,a)}break;case 5:var T=s.stateNode;if(a===null&&s.flags&4){a=T;var M=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&a.focus();break;case"img":M.src&&(a.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var z=s.alternate;if(z!==null){var K=z.memoizedState;if(K!==null){var Y=K.dehydrated;Y!==null&&bc(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Jt||s.flags&512&&Fg(s)}catch(q){dt(s,s.return,q)}}if(s===n){ae=null;break}if(a=s.sibling,a!==null){a.return=s.return,ae=a;break}ae=s.return}}function xw(n){for(;ae!==null;){var s=ae;if(s===n){ae=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ae=a;break}ae=s.return}}function _w(n){for(;ae!==null;){var s=ae;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Ld(4,s)}catch(M){dt(s,a,M)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var g=s.return;try{h.componentDidMount()}catch(M){dt(s,g,M)}}var y=s.return;try{Fg(s)}catch(M){dt(s,y,M)}break;case 5:var x=s.return;try{Fg(s)}catch(M){dt(s,x,M)}}}catch(M){dt(s,s.return,M)}if(s===n){ae=null;break}var T=s.sibling;if(T!==null){T.return=s.return,ae=T;break}ae=s.return}}var N_=Math.ceil,Md=D.ReactCurrentDispatcher,jg=D.ReactCurrentOwner,Qn=D.ReactCurrentBatchConfig,He=0,Ft=null,At=null,Vt=0,Nn=0,qa=or(0),kt=0,Vc=null,co=0,Id=0,zg=0,Wc=null,bn=null,Hg=0,Ka=1/0,gs=null,Nd=!1,Bg=null,dr=null,Fd=!1,fr=null,Dd=0,Gc=0,Ug=null,Od=-1,jd=0;function un(){return(He&6)!==0?mt():Od!==-1?Od:Od=mt()}function pr(n){return(n.mode&1)===0?1:(He&2)!==0&&Vt!==0?Vt&-Vt:y_.transition!==null?(jd===0&&(jd=mv()),jd):(n=We,n!==0||(n=window.event,n=n===void 0?16:Ev(n.type)),n)}function mi(n,s,a,h){if(50<Gc)throw Gc=0,Ug=null,Error(t(185));mc(n,a,h),((He&2)===0||n!==Ft)&&(n===Ft&&((He&2)===0&&(Id|=a),kt===4&&gr(n,Vt)),xn(n,h),a===1&&He===0&&(s.mode&1)===0&&(Ka=mt()+500,dd&&lr()))}function xn(n,s){var a=n.callbackNode;y1(n,s);var h=Xh(n,n===Ft?Vt:0);if(h===0)a!==null&&fv(a),n.callbackNode=null,n.callbackPriority=0;else if(s=h&-h,n.callbackPriority!==s){if(a!=null&&fv(a),s===1)n.tag===0?m_(Ew.bind(null,n)):u0(Ew.bind(null,n)),d_(function(){(He&6)===0&&lr()}),a=null;else{switch(yv(h)){case 1:a=bp;break;case 4:a=pv;break;case 16:a=$h;break;case 536870912:a=gv;break;default:a=$h}a=Iw(a,Sw.bind(null,n))}n.callbackPriority=s,n.callbackNode=a}}function Sw(n,s){if(Od=-1,jd=0,(He&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Ya()&&n.callbackNode!==a)return null;var h=Xh(n,n===Ft?Vt:0);if(h===0)return null;if((h&30)!==0||(h&n.expiredLanes)!==0||s)s=zd(n,h);else{s=h;var g=He;He|=2;var y=kw();(Ft!==n||Vt!==s)&&(gs=null,Ka=mt()+500,ho(n,s));do try{O_();break}catch(T){Cw(n,T)}while(!0);og(),Md.current=y,He=g,At!==null?s=0:(Ft=null,Vt=0,s=kt)}if(s!==0){if(s===2&&(g=xp(n),g!==0&&(h=g,s=$g(n,g))),s===1)throw a=Vc,ho(n,0),gr(n,h),xn(n,mt()),a;if(s===6)gr(n,h);else{if(g=n.current.alternate,(h&30)===0&&!F_(g)&&(s=zd(n,h),s===2&&(y=xp(n),y!==0&&(h=y,s=$g(n,y))),s===1))throw a=Vc,ho(n,0),gr(n,h),xn(n,mt()),a;switch(n.finishedWork=g,n.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:fo(n,bn,gs);break;case 3:if(gr(n,h),(h&130023424)===h&&(s=Hg+500-mt(),10<s)){if(Xh(n,0)!==0)break;if(g=n.suspendedLanes,(g&h)!==h){un(),n.pingedLanes|=n.suspendedLanes&g;break}n.timeoutHandle=Kp(fo.bind(null,n,bn,gs),s);break}fo(n,bn,gs);break;case 4:if(gr(n,h),(h&4194240)===h)break;for(s=n.eventTimes,g=-1;0<h;){var x=31-ui(h);y=1<<x,x=s[x],x>g&&(g=x),h&=~y}if(h=g,h=mt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*N_(h/1960))-h,10<h){n.timeoutHandle=Kp(fo.bind(null,n,bn,gs),h);break}fo(n,bn,gs);break;case 5:fo(n,bn,gs);break;default:throw Error(t(329))}}}return xn(n,mt()),n.callbackNode===a?Sw.bind(null,n):null}function $g(n,s){var a=Wc;return n.current.memoizedState.isDehydrated&&(ho(n,s).flags|=256),n=zd(n,s),n!==2&&(s=bn,bn=a,s!==null&&Vg(s)),n}function Vg(n){bn===null?bn=n:bn.push.apply(bn,n)}function F_(n){for(var s=n;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var g=a[h],y=g.getSnapshot;g=g.value;try{if(!hi(y(),g))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function gr(n,s){for(s&=~zg,s&=~Id,n.suspendedLanes|=s,n.pingedLanes&=~s,n=n.expirationTimes;0<s;){var a=31-ui(s),h=1<<a;n[a]=-1,s&=~h}}function Ew(n){if((He&6)!==0)throw Error(t(327));Ya();var s=Xh(n,0);if((s&1)===0)return xn(n,mt()),null;var a=zd(n,s);if(n.tag!==0&&a===2){var h=xp(n);h!==0&&(s=h,a=$g(n,h))}if(a===1)throw a=Vc,ho(n,0),gr(n,s),xn(n,mt()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=s,fo(n,bn,gs),xn(n,mt()),null}function Wg(n,s){var a=He;He|=1;try{return n(s)}finally{He=a,He===0&&(Ka=mt()+500,dd&&lr())}}function uo(n){fr!==null&&fr.tag===0&&(He&6)===0&&Ya();var s=He;He|=1;var a=Qn.transition,h=We;try{if(Qn.transition=null,We=1,n)return n()}finally{We=h,Qn.transition=a,He=s,(He&6)===0&&lr()}}function Gg(){Nn=qa.current,tt(qa)}function ho(n,s){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,h_(a)),At!==null)for(a=At.return;a!==null;){var h=a;switch(tg(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&ud();break;case 3:Wa(),tt(vn),tt(Yt),pg();break;case 5:dg(h);break;case 4:Wa();break;case 13:tt(ot);break;case 19:tt(ot);break;case 10:ag(h.type._context);break;case 22:case 23:Gg()}a=a.return}if(Ft=n,At=n=mr(n.current,null),Vt=Nn=s,kt=0,Vc=null,zg=Id=co=0,bn=Wc=null,oo!==null){for(s=0;s<oo.length;s++)if(a=oo[s],h=a.interleaved,h!==null){a.interleaved=null;var g=h.next,y=a.pending;if(y!==null){var x=y.next;y.next=g,h.next=x}a.pending=h}oo=null}return n}function Cw(n,s){do{var a=At;try{if(og(),xd.current=Cd,_d){for(var h=at.memoizedState;h!==null;){var g=h.queue;g!==null&&(g.pending=null),h=h.next}_d=!1}if(lo=0,Nt=Ct=at=null,jc=!1,zc=0,jg.current=null,a===null||a.return===null){kt=1,Vc=s,At=null;break}e:{var y=n,x=a.return,T=a,M=s;if(s=Vt,T.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var z=M,K=T,Y=K.tag;if((K.mode&1)===0&&(Y===0||Y===11||Y===15)){var q=K.alternate;q?(K.updateQueue=q.updateQueue,K.memoizedState=q.memoizedState,K.lanes=q.lanes):(K.updateQueue=null,K.memoizedState=null)}var re=Q0(x);if(re!==null){re.flags&=-257,Z0(re,x,T,y,s),re.mode&1&&Y0(y,z,s),s=re,M=z;var he=s.updateQueue;if(he===null){var de=new Set;de.add(M),s.updateQueue=de}else he.add(M);break e}else{if((s&1)===0){Y0(y,z,s),Xg();break e}M=Error(t(426))}}else if(st&&T.mode&1){var yt=Q0(x);if(yt!==null){(yt.flags&65536)===0&&(yt.flags|=256),Z0(yt,x,T,y,s),sg(Ga(M,T));break e}}y=M=Ga(M,T),kt!==4&&(kt=2),Wc===null?Wc=[y]:Wc.push(y),y=x;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var O=q0(y,M,s);b0(y,O);break e;case 1:T=M;var I=y.type,j=y.stateNode;if((y.flags&128)===0&&(typeof I.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(dr===null||!dr.has(j)))){y.flags|=65536,s&=-s,y.lanes|=s;var J=K0(y,T,s);b0(y,J);break e}}y=y.return}while(y!==null)}Pw(a)}catch(pe){s=pe,At===a&&a!==null&&(At=a=a.return);continue}break}while(!0)}function kw(){var n=Md.current;return Md.current=Cd,n===null?Cd:n}function Xg(){(kt===0||kt===3||kt===2)&&(kt=4),Ft===null||(co&268435455)===0&&(Id&268435455)===0||gr(Ft,Vt)}function zd(n,s){var a=He;He|=2;var h=kw();(Ft!==n||Vt!==s)&&(gs=null,ho(n,s));do try{D_();break}catch(g){Cw(n,g)}while(!0);if(og(),He=a,Md.current=h,At!==null)throw Error(t(261));return Ft=null,Vt=0,kt}function D_(){for(;At!==null;)Tw(At)}function O_(){for(;At!==null&&!l1();)Tw(At)}function Tw(n){var s=Mw(n.alternate,n,Nn);n.memoizedProps=n.pendingProps,s===null?Pw(n):At=s,jg.current=null}function Pw(n){var s=n;do{var a=s.alternate;if(n=s.return,(s.flags&32768)===0){if(a=P_(a,s,Nn),a!==null){At=a;return}}else{if(a=R_(a,s),a!==null){a.flags&=32767,At=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{kt=6,At=null;return}}if(s=s.sibling,s!==null){At=s;return}At=s=n}while(s!==null);kt===0&&(kt=5)}function fo(n,s,a){var h=We,g=Qn.transition;try{Qn.transition=null,We=1,j_(n,s,a,h)}finally{Qn.transition=g,We=h}return null}function j_(n,s,a,h){do Ya();while(fr!==null);if((He&6)!==0)throw Error(t(327));a=n.finishedWork;var g=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var y=a.lanes|a.childLanes;if(v1(n,y),n===Ft&&(At=Ft=null,Vt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Fd||(Fd=!0,Iw($h,function(){return Ya(),null})),y=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||y){y=Qn.transition,Qn.transition=null;var x=We;We=1;var T=He;He|=4,jg.current=null,M_(n,a),ww(a,n),s_(Xp),Yh=!!Gp,Xp=Gp=null,n.current=a,I_(a),c1(),He=T,We=x,Qn.transition=y}else n.current=a;if(Fd&&(Fd=!1,fr=n,Dd=g),y=n.pendingLanes,y===0&&(dr=null),d1(a.stateNode),xn(n,mt()),s!==null)for(h=n.onRecoverableError,a=0;a<s.length;a++)g=s[a],h(g.value,{componentStack:g.stack,digest:g.digest});if(Nd)throw Nd=!1,n=Bg,Bg=null,n;return(Dd&1)!==0&&n.tag!==0&&Ya(),y=n.pendingLanes,(y&1)!==0?n===Ug?Gc++:(Gc=0,Ug=n):Gc=0,lr(),null}function Ya(){if(fr!==null){var n=yv(Dd),s=Qn.transition,a=We;try{if(Qn.transition=null,We=16>n?16:n,fr===null)var h=!1;else{if(n=fr,fr=null,Dd=0,(He&6)!==0)throw Error(t(331));var g=He;for(He|=4,ae=n.current;ae!==null;){var y=ae,x=y.child;if((ae.flags&16)!==0){var T=y.deletions;if(T!==null){for(var M=0;M<T.length;M++){var z=T[M];for(ae=z;ae!==null;){var K=ae;switch(K.tag){case 0:case 11:case 15:$c(8,K,y)}var Y=K.child;if(Y!==null)Y.return=K,ae=Y;else for(;ae!==null;){K=ae;var q=K.sibling,re=K.return;if(pw(K),K===z){ae=null;break}if(q!==null){q.return=re,ae=q;break}ae=re}}}var he=y.alternate;if(he!==null){var de=he.child;if(de!==null){he.child=null;do{var yt=de.sibling;de.sibling=null,de=yt}while(de!==null)}}ae=y}}if((y.subtreeFlags&2064)!==0&&x!==null)x.return=y,ae=x;else e:for(;ae!==null;){if(y=ae,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:$c(9,y,y.return)}var O=y.sibling;if(O!==null){O.return=y.return,ae=O;break e}ae=y.return}}var I=n.current;for(ae=I;ae!==null;){x=ae;var j=x.child;if((x.subtreeFlags&2064)!==0&&j!==null)j.return=x,ae=j;else e:for(x=I;ae!==null;){if(T=ae,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:Ld(9,T)}}catch(pe){dt(T,T.return,pe)}if(T===x){ae=null;break e}var J=T.sibling;if(J!==null){J.return=T.return,ae=J;break e}ae=T.return}}if(He=g,lr(),Di&&typeof Di.onPostCommitFiberRoot=="function")try{Di.onPostCommitFiberRoot(Vh,n)}catch{}h=!0}return h}finally{We=a,Qn.transition=s}}return!1}function Rw(n,s,a){s=Ga(a,s),s=q0(n,s,1),n=ur(n,s,1),s=un(),n!==null&&(mc(n,1,s),xn(n,s))}function dt(n,s,a){if(n.tag===3)Rw(n,n,a);else for(;s!==null;){if(s.tag===3){Rw(s,n,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(dr===null||!dr.has(h))){n=Ga(a,n),n=K0(s,n,1),s=ur(s,n,1),n=un(),s!==null&&(mc(s,1,n),xn(s,n));break}}s=s.return}}function z_(n,s,a){var h=n.pingCache;h!==null&&h.delete(s),s=un(),n.pingedLanes|=n.suspendedLanes&a,Ft===n&&(Vt&a)===a&&(kt===4||kt===3&&(Vt&130023424)===Vt&&500>mt()-Hg?ho(n,0):zg|=a),xn(n,s)}function Lw(n,s){s===0&&((n.mode&1)===0?s=1:(s=Gh,Gh<<=1,(Gh&130023424)===0&&(Gh=4194304)));var a=un();n=ds(n,s),n!==null&&(mc(n,s,a),xn(n,a))}function H_(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Lw(n,a)}function B_(n,s){var a=0;switch(n.tag){case 13:var h=n.stateNode,g=n.memoizedState;g!==null&&(a=g.retryLane);break;case 19:h=n.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Lw(n,a)}var Mw;Mw=function(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps||vn.current)An=!0;else{if((n.lanes&a)===0&&(s.flags&128)===0)return An=!1,T_(n,s,a);An=(n.flags&131072)!==0}else An=!1,st&&(s.flags&1048576)!==0&&h0(s,pd,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Pd(n,s),n=s.pendingProps;var g=ja(s,Yt.current);Va(s,a),g=yg(null,s,h,n,g,a);var y=vg();return s.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,wn(h)?(y=!0,hd(s)):y=!1,s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,ug(s),g.updater=kd,s.stateNode=g,g._reactInternals=s,Sg(s,h,n,a),s=Tg(null,s,h,!0,y,a)):(s.tag=0,st&&y&&eg(s),cn(null,s,g,a),s=s.child),s;case 16:h=s.elementType;e:{switch(Pd(n,s),n=s.pendingProps,g=h._init,h=g(h._payload),s.type=h,g=s.tag=$_(h),n=fi(h,n),g){case 0:s=kg(null,s,h,n,a);break e;case 1:s=sw(null,s,h,n,a);break e;case 11:s=J0(null,s,h,n,a);break e;case 14:s=ew(null,s,h,fi(h.type,n),a);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:fi(h,g),kg(n,s,h,g,a);case 1:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:fi(h,g),sw(n,s,h,g,a);case 3:e:{if(rw(s),n===null)throw Error(t(387));h=s.pendingProps,y=s.memoizedState,g=y.element,A0(n,s),Ad(s,h,null,a);var x=s.memoizedState;if(h=x.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){g=Ga(Error(t(423)),s),s=ow(n,s,h,a,g);break e}else if(h!==g){g=Ga(Error(t(424)),s),s=ow(n,s,h,a,g);break e}else for(In=rr(s.stateNode.containerInfo.firstChild),Mn=s,st=!0,di=null,a=v0(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ba(),h===g){s=ps(n,s,a);break e}cn(n,s,h,a)}s=s.child}return s;case 5:return _0(s),n===null&&ig(s),h=s.type,g=s.pendingProps,y=n!==null?n.memoizedProps:null,x=g.children,qp(h,g)?x=null:y!==null&&qp(h,y)&&(s.flags|=32),iw(n,s),cn(n,s,x,a),s.child;case 6:return n===null&&ig(s),null;case 13:return aw(n,s,a);case 4:return hg(s,s.stateNode.containerInfo),h=s.pendingProps,n===null?s.child=Ua(s,null,h,a):cn(n,s,h,a),s.child;case 11:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:fi(h,g),J0(n,s,h,g,a);case 7:return cn(n,s,s.pendingProps,a),s.child;case 8:return cn(n,s,s.pendingProps.children,a),s.child;case 12:return cn(n,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,g=s.pendingProps,y=s.memoizedProps,x=g.value,Ze(yd,h._currentValue),h._currentValue=x,y!==null)if(hi(y.value,x)){if(y.children===g.children&&!vn.current){s=ps(n,s,a);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var T=y.dependencies;if(T!==null){x=y.child;for(var M=T.firstContext;M!==null;){if(M.context===h){if(y.tag===1){M=fs(-1,a&-a),M.tag=2;var z=y.updateQueue;if(z!==null){z=z.shared;var K=z.pending;K===null?M.next=M:(M.next=K.next,K.next=M),z.pending=M}}y.lanes|=a,M=y.alternate,M!==null&&(M.lanes|=a),lg(y.return,a,s),T.lanes|=a;break}M=M.next}}else if(y.tag===10)x=y.type===s.type?null:y.child;else if(y.tag===18){if(x=y.return,x===null)throw Error(t(341));x.lanes|=a,T=x.alternate,T!==null&&(T.lanes|=a),lg(x,a,s),x=y.sibling}else x=y.child;if(x!==null)x.return=y;else for(x=y;x!==null;){if(x===s){x=null;break}if(y=x.sibling,y!==null){y.return=x.return,x=y;break}x=x.return}y=x}cn(n,s,g.children,a),s=s.child}return s;case 9:return g=s.type,h=s.pendingProps.children,Va(s,a),g=Kn(g),h=h(g),s.flags|=1,cn(n,s,h,a),s.child;case 14:return h=s.type,g=fi(h,s.pendingProps),g=fi(h.type,g),ew(n,s,h,g,a);case 15:return tw(n,s,s.type,s.pendingProps,a);case 17:return h=s.type,g=s.pendingProps,g=s.elementType===h?g:fi(h,g),Pd(n,s),s.tag=1,wn(h)?(n=!0,hd(s)):n=!1,Va(s,a),G0(s,h,g),Sg(s,h,g,a),Tg(null,s,h,!0,n,a);case 19:return cw(n,s,a);case 22:return nw(n,s,a)}throw Error(t(156,s.tag))};function Iw(n,s){return dv(n,s)}function U_(n,s,a,h){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(n,s,a,h){return new U_(n,s,a,h)}function qg(n){return n=n.prototype,!(!n||!n.isReactComponent)}function $_(n){if(typeof n=="function")return qg(n)?1:0;if(n!=null){if(n=n.$$typeof,n===ye)return 11;if(n===ve)return 14}return 2}function mr(n,s){var a=n.alternate;return a===null?(a=Zn(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Hd(n,s,a,h,g,y){var x=2;if(h=n,typeof n=="function")qg(n)&&(x=1);else if(typeof n=="string")x=5;else e:switch(n){case V:return po(a.children,g,y,s);case X:x=8,g|=8;break;case ee:return n=Zn(12,a,s,g|2),n.elementType=ee,n.lanes=y,n;case le:return n=Zn(13,a,s,g),n.elementType=le,n.lanes=y,n;case ce:return n=Zn(19,a,s,g),n.elementType=ce,n.lanes=y,n;case Z:return Bd(a,g,y,s);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case se:x=10;break e;case ie:x=9;break e;case ye:x=11;break e;case ve:x=14;break e;case fe:x=16,h=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return s=Zn(x,a,s,g),s.elementType=n,s.type=h,s.lanes=y,s}function po(n,s,a,h){return n=Zn(7,n,h,s),n.lanes=a,n}function Bd(n,s,a,h){return n=Zn(22,n,h,s),n.elementType=Z,n.lanes=a,n.stateNode={isHidden:!1},n}function Kg(n,s,a){return n=Zn(6,n,null,s),n.lanes=a,n}function Yg(n,s,a){return s=Zn(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}function V_(n,s,a,h,g){this.tag=s,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_p(0),this.expirationTimes=_p(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_p(0),this.identifierPrefix=h,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Qg(n,s,a,h,g,y,x,T,M){return n=new V_(n,s,a,T,M),s===1?(s=1,y===!0&&(s|=8)):s=0,y=Zn(3,null,null,s),n.current=y,y.stateNode=n,y.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},ug(y),n}function W_(n,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:h==null?null:""+h,children:n,containerInfo:s,implementation:a}}function Nw(n){if(!n)return ar;n=n._reactInternals;e:{if(to(n)!==n||n.tag!==1)throw Error(t(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(wn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(wn(a))return l0(n,a,s)}return s}function Fw(n,s,a,h,g,y,x,T,M){return n=Qg(a,h,!0,n,g,y,x,T,M),n.context=Nw(null),a=n.current,h=un(),g=pr(a),y=fs(h,g),y.callback=s??null,ur(a,y,g),n.current.lanes=g,mc(n,g,h),xn(n,h),n}function Ud(n,s,a,h){var g=s.current,y=un(),x=pr(g);return a=Nw(a),s.context===null?s.context=a:s.pendingContext=a,s=fs(y,x),s.payload={element:n},h=h===void 0?null:h,h!==null&&(s.callback=h),n=ur(g,s,x),n!==null&&(mi(n,g,x,y),wd(n,g,x)),x}function $d(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Dw(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Zg(n,s){Dw(n,s),(n=n.alternate)&&Dw(n,s)}function G_(){return null}var Ow=typeof reportError=="function"?reportError:function(n){console.error(n)};function Jg(n){this._internalRoot=n}Vd.prototype.render=Jg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(t(409));Ud(n,s,null,null)},Vd.prototype.unmount=Jg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;uo(function(){Ud(null,n,null,null)}),s[ls]=null}};function Vd(n){this._internalRoot=n}Vd.prototype.unstable_scheduleHydration=function(n){if(n){var s=Av();n={blockedOn:null,target:n,priority:s};for(var a=0;a<nr.length&&s!==0&&s<nr[a].priority;a++);nr.splice(a,0,n),a===0&&_v(n)}};function em(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Wd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function jw(){}function X_(n,s,a,h,g){if(g){if(typeof h=="function"){var y=h;h=function(){var z=$d(x);y.call(z)}}var x=Fw(s,h,n,0,null,!1,!1,"",jw);return n._reactRootContainer=x,n[ls]=x.current,Rc(n.nodeType===8?n.parentNode:n),uo(),x}for(;g=n.lastChild;)n.removeChild(g);if(typeof h=="function"){var T=h;h=function(){var z=$d(M);T.call(z)}}var M=Qg(n,0,!1,null,null,!1,!1,"",jw);return n._reactRootContainer=M,n[ls]=M.current,Rc(n.nodeType===8?n.parentNode:n),uo(function(){Ud(s,M,a,h)}),M}function Gd(n,s,a,h,g){var y=a._reactRootContainer;if(y){var x=y;if(typeof g=="function"){var T=g;g=function(){var M=$d(x);T.call(M)}}Ud(s,x,n,g)}else x=X_(a,s,n,g,h);return $d(x)}vv=function(n){switch(n.tag){case 3:var s=n.stateNode;if(s.current.memoizedState.isDehydrated){var a=gc(s.pendingLanes);a!==0&&(Sp(s,a|1),xn(s,mt()),(He&6)===0&&(Ka=mt()+500,lr()))}break;case 13:uo(function(){var h=ds(n,1);if(h!==null){var g=un();mi(h,n,1,g)}}),Zg(n,1)}},Ep=function(n){if(n.tag===13){var s=ds(n,134217728);if(s!==null){var a=un();mi(s,n,134217728,a)}Zg(n,134217728)}},wv=function(n){if(n.tag===13){var s=pr(n),a=ds(n,s);if(a!==null){var h=un();mi(a,n,s,h)}Zg(n,s)}},Av=function(){return We},bv=function(n,s){var a=We;try{return We=n,s()}finally{We=a}},yp=function(n,s,a){switch(s){case"input":if(Ni(n,a),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==n&&h.form===n.form){var g=cd(h);if(!g)throw Error(t(90));Qs(h),Ni(h,g)}}}break;case"textarea":jh(n,a);break;case"select":s=a.value,s!=null&&ci(n,!!a.multiple,s,!1)}},rv=Wg,ov=uo;var q_={usingClientEntryPoint:!1,Events:[Ic,Da,cd,iv,sv,Wg]},Xc={findFiberByHostInstance:no,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},K_={bundleType:Xc.bundleType,version:Xc.version,rendererPackageName:Xc.rendererPackageName,rendererConfig:Xc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=uv(n),n===null?null:n.stateNode},findFiberByHostInstance:Xc.findFiberByHostInstance||G_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xd.isDisabled&&Xd.supportsFiber)try{Vh=Xd.inject(K_),Di=Xd}catch{}}return _n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q_,_n.createPortal=function(n,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!em(s))throw Error(t(200));return W_(n,s,null,a)},_n.createRoot=function(n,s){if(!em(n))throw Error(t(299));var a=!1,h="",g=Ow;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(g=s.onRecoverableError)),s=Qg(n,1,!1,null,null,a,!1,h,g),n[ls]=s.current,Rc(n.nodeType===8?n.parentNode:n),new Jg(s)},_n.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=uv(s),n=n===null?null:n.stateNode,n},_n.flushSync=function(n){return uo(n)},_n.hydrate=function(n,s,a){if(!Wd(s))throw Error(t(200));return Gd(null,n,s,!0,a)},_n.hydrateRoot=function(n,s,a){if(!em(n))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,g=!1,y="",x=Ow;if(a!=null&&(a.unstable_strictMode===!0&&(g=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),s=Fw(s,null,n,1,a??null,g,!1,y,x),n[ls]=s.current,Rc(n),h)for(n=0;n<h.length;n++)a=h[n],g=a._getVersion,g=g(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,g]:s.mutableSourceEagerHydrationData.push(a,g);return new Vd(s)},_n.render=function(n,s,a){if(!Wd(s))throw Error(t(200));return Gd(null,n,s,!1,a)},_n.unmountComponentAtNode=function(n){if(!Wd(n))throw Error(t(40));return n._reactRootContainer?(uo(function(){Gd(null,null,n,!1,function(){n._reactRootContainer=null,n[ls]=null})}),!0):!1},_n.unstable_batchedUpdates=Wg,_n.unstable_renderSubtreeIntoContainer=function(n,s,a,h){if(!Wd(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Gd(n,s,a,!1,h)},_n.version="18.3.1-next-f1338f8080-20240426",_n}var Xw;function rS(){if(Xw)return sm.exports;Xw=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(e){console.error(e)}}return f(),sm.exports=sS(),sm.exports}var qw;function oS(){if(qw)return qd;qw=1;var f=rS();return qd.createRoot=f.createRoot,qd.hydrateRoot=f.hydrateRoot,qd}var aS=oS();const lS=f=>f instanceof Error?f.message+`
`+f.stack:JSON.stringify(f,null,2);class cS extends pm.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}render(){return this.state.hasError?L.jsxs("div",{className:"p-4 border border-red-500 rounded",children:[L.jsx("h2",{className:"text-red-500",children:"Something went wrong."}),L.jsx("pre",{className:"mt-2 text-sm",children:lS(this.state.error)})]}):this.props.children}}const uS="modulepreload",hS=function(f){return"/"+f},Kw={},Kd=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let c=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));r=c(t.map(p=>{if(p=hS(p),p in Kw)return;Kw[p]=!0;const m=p.endsWith(".css"),v=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${v}`))return;const w=document.createElement("link");if(w.rel=m?"stylesheet":uS,m||(w.as="script"),w.crossOrigin="",w.href=p,d&&w.setAttribute("nonce",d),document.head.appendChild(w),m)return new Promise((A,S)=>{w.addEventListener("load",A),w.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return r.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};var pu={};pu.d=(f,e)=>{for(var t in e)pu.o(e,t)&&!pu.o(f,t)&&Object.defineProperty(f,t,{enumerable:!0,get:e[t]})};pu.o=(f,e)=>Object.prototype.hasOwnProperty.call(f,e);var Te=globalThis.pdfjsLib={};pu.d(Te,{AbortException:()=>Ea,AnnotationEditorLayer:()=>Cy,AnnotationEditorParamsType:()=>Ce,AnnotationEditorType:()=>Re,AnnotationEditorUIManager:()=>wa,AnnotationLayer:()=>cC,AnnotationMode:()=>Ar,ColorPicker:()=>Ff,DOMSVGFactory:()=>qy,DrawLayer:()=>Ry,FeatureTest:()=>gn,GlobalWorkerOptions:()=>Ws,ImageKind:()=>tf,InvalidPDFException:()=>NA,MissingPDFException:()=>Sa,OPS:()=>vi,OutputScale:()=>wm,PDFDataRangeTransport:()=>Rb,PDFDateString:()=>By,PDFWorker:()=>al,PasswordResponses:()=>gS,PermissionFlag:()=>pS,PixelsPerInch:()=>qr,RenderingCancelledException:()=>zy,TextLayer:()=>Xm,UnexpectedResponseException:()=>ip,Util:()=>ge,VerbosityLevel:()=>ep,XfaLayer:()=>Mb,build:()=>$E,createValidAbsoluteUrl:()=>wS,fetchData:()=>rp,getDocument:()=>NE,getFilenameFromUrl:()=>TS,getPdfFilenameFromUrl:()=>PS,getXfaPageViewport:()=>RS,isDataScheme:()=>op,isPdfFile:()=>Hy,noContextMenu:()=>li,normalizeUnicode:()=>ES,setLayerDimensions:()=>va,shadow:()=>ze,version:()=>UE});const ln=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),IA=[1,0,0,1,0,0],gm=[.001,0,0,.001,0,0],dS=1e7,am=1.35,Vn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ar={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},fS="pdfjs_internal_editor_",Re={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ce={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},pS={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},en={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},tf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Tt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Kc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ep={ERRORS:0,WARNINGS:1,INFOS:5},vi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},gS={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let tp=ep.WARNINGS;function mS(f){Number.isInteger(f)&&(tp=f)}function yS(){return tp}function np(f){tp>=ep.INFOS&&console.log(`Info: ${f}`)}function Ie(f){tp>=ep.WARNINGS&&console.log(`Warning: ${f}`)}function nt(f){throw new Error(f)}function Mt(f,e){f||nt(e)}function vS(f){switch(f==null?void 0:f.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function wS(f,e=null,t=null){if(!f)return null;try{if(t&&typeof f=="string"){if(t.addDefaultProtocol&&f.startsWith("www.")){const r=f.match(/\./g);(r==null?void 0:r.length)>=2&&(f=`http://${f}`)}if(t.tryConvertEncoding)try{f=SS(f)}catch{}}const i=e?new URL(f,e):new URL(f);if(vS(i))return i}catch{}return null}function ze(f,e,t,i=!1){return Object.defineProperty(f,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const Zr=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class mm extends Zr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class ym extends Zr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class NA extends Zr{constructor(e){super(e,"InvalidPDFException")}}class Sa extends Zr{constructor(e){super(e,"MissingPDFException")}}class ip extends Zr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class AS extends Zr{constructor(e){super(e,"FormatError")}}class Ea extends Zr{constructor(e){super(e,"AbortException")}}function FA(f){(typeof f!="object"||(f==null?void 0:f.length)===void 0)&&nt("Invalid argument for bytesToString");const e=f.length,t=8192;if(e<t)return String.fromCharCode.apply(null,f);const i=[];for(let r=0;r<e;r+=t){const o=Math.min(r+t,e),c=f.subarray(r,o);i.push(String.fromCharCode.apply(null,c))}return i.join("")}function sp(f){typeof f!="string"&&nt("Invalid argument for stringToBytes");const e=f.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=f.charCodeAt(i)&255;return t}function bS(f){return String.fromCharCode(f>>24&255,f>>16&255,f>>8&255,f&255)}function Oy(f){const e=Object.create(null);for(const[t,i]of f)e[t]=i;return e}function xS(){const f=new Uint8Array(4);return f[0]=1,new Uint32Array(f.buffer,0,1)[0]===1}function _S(){try{return new Function(""),!0}catch{return!1}}class gn{static get isLittleEndian(){return ze(this,"isLittleEndian",xS())}static get isEvalSupported(){return ze(this,"isEvalSupported",_S())}static get isOffscreenCanvasSupported(){return ze(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ze(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):ze(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return ze(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const lm=Array.from(Array(256).keys(),f=>f.toString(16).padStart(2,"0"));var Xs,nf,vm;class ge{static makeHexColor(e,t,i){return`#${lm[e]}${lm[t]}${lm[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[i,r]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,o=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[r,o]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),o=this.applyTransform([e[0],e[3]],t),c=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],r[0],o[0],c[0]),Math.min(i[1],r[1],o[1],c[1]),Math.max(i[0],r[0],o[0],c[0]),Math.max(i[1],r[1],o[1],c[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],o=e[2]*t[0]+e[3]*t[2],c=e[2]*t[1]+e[3]*t[3],u=(i+c)/2,d=Math.sqrt((i+c)**2-4*(i*c-o*r))/2,p=u+d||1,m=u-d||1;return[Math.sqrt(p),Math.sqrt(m)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>r)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),c=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>c?null:[i,o,r,c]}static bezierBoundingBox(e,t,i,r,o,c,u,d,p){return p?(p[0]=Math.min(p[0],e,u),p[1]=Math.min(p[1],t,d),p[2]=Math.max(p[2],e,u),p[3]=Math.max(p[3],t,d)):p=[Math.min(e,u),Math.min(t,d),Math.max(e,u),Math.max(t,d)],_(this,Xs,vm).call(this,e,i,o,u,t,r,c,d,3*(-e+3*(i-o)+u),6*(e-2*i+o),3*(i-e),p),_(this,Xs,vm).call(this,e,i,o,u,t,r,c,d,3*(-t+3*(r-c)+d),6*(t-2*r+c),3*(r-t),p),p}}Xs=new WeakSet,nf=function(e,t,i,r,o,c,u,d,p,m){if(p<=0||p>=1)return;const v=1-p,w=p*p,A=w*p,S=v*(v*(v*e+3*p*t)+3*w*i)+A*r,E=v*(v*(v*o+3*p*c)+3*w*u)+A*d;m[0]=Math.min(m[0],S),m[1]=Math.min(m[1],E),m[2]=Math.max(m[2],S),m[3]=Math.max(m[3],E)},vm=function(e,t,i,r,o,c,u,d,p,m,v,w){if(Math.abs(p)<1e-12){Math.abs(m)>=1e-12&&_(this,Xs,nf).call(this,e,t,i,r,o,c,u,d,-v/m,w);return}const A=m**2-4*v*p;if(A<0)return;const S=Math.sqrt(A),E=2*p;_(this,Xs,nf).call(this,e,t,i,r,o,c,u,d,(-m+S)/E,w),_(this,Xs,nf).call(this,e,t,i,r,o,c,u,d,(-m-S)/E,w)},C(ge,Xs);function SS(f){return decodeURIComponent(escape(f))}let cm=null,Yw=null;function ES(f){return cm||(cm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Yw=new Map([["ﬅ","ſt"]])),f.replaceAll(cm,(e,t,i)=>t?t.normalize("NFKC"):Yw.get(i))}function CS(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const f=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(f);else for(let e=0;e<32;e++)f[e]=Math.floor(Math.random()*255);return FA(f)}const jy="pdfjs_internal_id_",ms={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function kS(f){return Uint8Array.prototype.toBase64?f.toBase64():btoa(FA(f))}const vs="http://www.w3.org/2000/svg",Ao=class Ao{};Ee(Ao,"CSS",96),Ee(Ao,"PDF",72),Ee(Ao,"PDF_TO_CSS_UNITS",Ao.CSS/Ao.PDF);let qr=Ao;async function rp(f,e="text"){if(Zc(f,document.baseURI)){const t=await fetch(f);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const r=new XMLHttpRequest;r.open("GET",f,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class Ih{constructor({viewBox:e,scale:t,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=r,this.offsetY=o;const u=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let p,m,v,w;switch(i%=360,i<0&&(i+=360),i){case 180:p=-1,m=0,v=0,w=1;break;case 90:p=0,m=1,v=1,w=0;break;case 270:p=0,m=-1,v=-1,w=0;break;case 0:p=1,m=0,v=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(v=-v,w=-w);let A,S,E,P;p===0?(A=Math.abs(d-e[1])*t+r,S=Math.abs(u-e[0])*t+o,E=(e[3]-e[1])*t,P=(e[2]-e[0])*t):(A=Math.abs(u-e[0])*t+r,S=Math.abs(d-e[1])*t+o,E=(e[2]-e[0])*t,P=(e[3]-e[1])*t),this.transform=[p*t,m*t,v*t,w*t,A-p*t*u-v*t*d,S-m*t*u-w*t*d],this.width=E,this.height=P}get rawDims(){const{viewBox:e}=this;return ze(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:o=!1}={}){return new Ih({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:o})}convertToViewportPoint(e,t){return ge.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=ge.applyTransform([e[0],e[1]],this.transform),i=ge.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return ge.applyInverseTransform([e,t],this.transform)}}class zy extends Zr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function op(f){const e=f.length;let t=0;for(;t<e&&f[t].trim()==="";)t++;return f.substring(t,t+5).toLowerCase()==="data:"}function Hy(f){return typeof f=="string"&&/\.pdf$/i.test(f)}function TS(f){return[f]=f.split(/[#?]/,1),f.substring(f.lastIndexOf("/")+1)}function PS(f,e="document.pdf"){if(typeof f!="string")return e;if(op(f))return Ie('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(f);let o=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(o&&(o=o[0],o.includes("%")))try{o=i.exec(decodeURIComponent(o))[0]}catch{}return o||e}class Qw{constructor(){Ee(this,"started",Object.create(null));Ee(this,"times",[])}time(e){e in this.started&&Ie(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ie(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:r,end:o}of this.times)e.push(`${i.padEnd(t)} ${o-r}ms
`);return e.join("")}}function Zc(f,e){try{const{protocol:t}=e?new URL(f,e):new URL(f);return t==="http:"||t==="https:"}catch{return!1}}function li(f){f.preventDefault()}function Zw(f){console.log("Deprecated API usage: "+f)}var vu;class By{static toDateObject(e){if(!e||typeof e!="string")return null;l(this,vu)||b(this,vu,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,vu).exec(e);if(!t)return null;const i=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(t[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(t[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const p=t[7]||"Z";let m=parseInt(t[8],10);m=m>=0&&m<=23?m:0;let v=parseInt(t[9],10)||0;return v=v>=0&&v<=59?v:0,p==="-"?(c+=m,u+=v):p==="+"&&(c-=m,u-=v),new Date(Date.UTC(i,r,o,c,u,d))}}vu=new WeakMap,C(By,vu);function RS(f,{scale:e=1,rotation:t=0}){const{width:i,height:r}=f.attributes.style,o=[0,0,parseInt(i),parseInt(r)];return new Ih({viewBox:o,scale:e,rotation:t})}function Uy(f){if(f.startsWith("#")){const e=parseInt(f.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return f.startsWith("rgb(")?f.slice(4,-1).split(",").map(e=>parseInt(e)):f.startsWith("rgba(")?f.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ie(`Not a valid color format: "${f}"`),[0,0,0])}function LS(f){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of f.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;f.set(t,Uy(i))}e.remove()}function ht(f){const{a:e,b:t,c:i,d:r,e:o,f:c}=f.getTransform();return[e,t,i,r,o,c]}function ys(f){const{a:e,b:t,c:i,d:r,e:o,f:c}=f.getTransform().invertSelf();return[e,t,i,r,o,c]}function va(f,e,t=!1,i=!0){if(e instanceof Ih){const{pageWidth:r,pageHeight:o}=e.rawDims,{style:c}=f,u=gn.isCSSRoundSupported,d=`var(--scale-factor) * ${r}px`,p=`var(--scale-factor) * ${o}px`,m=u?`round(down, ${d}, var(--scale-round-x, 1px))`:`calc(${d})`,v=u?`round(down, ${p}, var(--scale-round-y, 1px))`:`calc(${p})`;!t||e.rotation%180===0?(c.width=m,c.height=v):(c.width=v,c.height=m)}i&&f.setAttribute("data-main-rotation",e.rotation)}class wm{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var br,xo,wi,_o,wu,Au,Of,DA,mn,OA,jA,sf,zA,bm;const ws=class ws{constructor(e){C(this,mn);C(this,br,null);C(this,xo,null);C(this,wi);C(this,_o,null);C(this,wu,null);b(this,wi,e),l(ws,Au)||b(ws,Au,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=b(this,br,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,wi)._uiManager._signal;e.addEventListener("contextmenu",li,{signal:t}),e.addEventListener("pointerdown",_(ws,Of,DA),{signal:t});const i=b(this,_o,document.createElement("div"));i.className="buttons",e.append(i);const r=l(this,wi).toolbarPosition;if(r){const{style:o}=e,c=l(this,wi)._uiManager.direction==="ltr"?1-r[0]:r[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return _(this,mn,zA).call(this),e}get div(){return l(this,br)}hide(){var e;l(this,br).classList.add("hidden"),(e=l(this,xo))==null||e.hideDropdown()}show(){var e;l(this,br).classList.remove("hidden"),(e=l(this,wu))==null||e.shown()}async addAltText(e){const t=await e.render();_(this,mn,sf).call(this,t),l(this,_o).prepend(t,l(this,mn,bm)),b(this,wu,e)}addColorPicker(e){b(this,xo,e);const t=e.renderButton();_(this,mn,sf).call(this,t),l(this,_o).prepend(t,l(this,mn,bm))}remove(){var e;l(this,br).remove(),(e=l(this,xo))==null||e.destroy(),b(this,xo,null)}};br=new WeakMap,xo=new WeakMap,wi=new WeakMap,_o=new WeakMap,wu=new WeakMap,Au=new WeakMap,Of=new WeakSet,DA=function(e){e.stopPropagation()},mn=new WeakSet,OA=function(e){l(this,wi)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},jA=function(e){l(this,wi)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},sf=function(e){const t=l(this,wi)._uiManager._signal;e.addEventListener("focusin",_(this,mn,OA).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",_(this,mn,jA).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",li,{signal:t})},zA=function(){const{editorType:e,_uiManager:t}=l(this,wi),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",l(ws,Au)[e]),_(this,mn,sf).call(this,i),i.addEventListener("click",r=>{t.delete()},{signal:t._signal}),l(this,_o).append(i)},bm=function(){const e=document.createElement("div");return e.className="divider",e},C(ws,Of),C(ws,Au,null);let Am=ws;var bu,So,Eo,Yr,HA,BA,UA;class MS{constructor(e){C(this,Yr);C(this,bu,null);C(this,So,null);C(this,Eo);b(this,Eo,e)}show(e,t,i){const[r,o]=_(this,Yr,BA).call(this,t,i),{style:c}=l(this,So)||b(this,So,_(this,Yr,HA).call(this));e.append(l(this,So)),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,So).remove()}}bu=new WeakMap,So=new WeakMap,Eo=new WeakMap,Yr=new WeakSet,HA=function(){const e=b(this,So,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",li,{signal:l(this,Eo)._signal});const t=b(this,bu,document.createElement("div"));return t.className="buttons",e.append(t),_(this,Yr,UA).call(this),e},BA=function(e,t){let i=0,r=0;for(const o of e){const c=o.y+o.height;if(c<i)continue;const u=o.x+(t?o.width:0);if(c>i){r=u,i=c;continue}t?u>r&&(r=u):u<r&&(r=u)}return[t?1-r:r,i]},UA=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=l(this,Eo)._signal;e.addEventListener("contextmenu",li,{signal:i}),e.addEventListener("click",()=>{l(this,Eo).highlightSelection("floating_button")},{signal:i}),l(this,bu).append(e)};function Mf(f,e,t){for(const i of t)e.addEventListener(i,f[i].bind(f))}function IS(f){return Math.round(Math.min(255,Math.max(1,255*f))).toString(16).padStart(2,"0")}var jf;class NS{constructor(){C(this,jf,0)}get id(){return`${fS}${hn(this,jf)._++}`}}jf=new WeakMap;var ul,xu,nn,hl,rf;const Qy=class Qy{constructor(){C(this,hl);C(this,ul,CS());C(this,xu,0);C(this,nn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const o=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return ze(this,"_isSVGFittingCanvas",o)}async getFromFile(e){const{lastModified:t,name:i,size:r,type:o}=e;return _(this,hl,rf).call(this,`${t}_${i}_${r}_${o}`,e)}async getFromUrl(e){return _(this,hl,rf).call(this,e,e)}async getFromBlob(e,t){const i=await t;return _(this,hl,rf).call(this,e,i)}async getFromId(e){l(this,nn)||b(this,nn,new Map);const t=l(this,nn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,nn)||b(this,nn,new Map);let i=l(this,nn).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${l(this,ul)}_${hn(this,xu)._++}`,refCounter:1,isSvg:!1},l(this,nn).set(e,i),l(this,nn).set(i.id,i),i}getSvgUrl(e){const t=l(this,nn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;l(this,nn)||b(this,nn,new Map);const t=l(this,nn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const o=new OffscreenCanvas(i.width,i.height);o.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=o.convertToBlob()}(r=i.close)==null||r.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,ul)}_`)}};ul=new WeakMap,xu=new WeakMap,nn=new WeakMap,hl=new WeakSet,rf=async function(e,t){l(this,nn)||b(this,nn,new Map);let i=l(this,nn).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${l(this,ul)}_${hn(this,xu)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(i.url=t,r=await rp(t,"blob")):t instanceof File?r=i.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const o=Qy._isSVGFittingCanvas,c=new FileReader,u=new Image,d=new Promise((p,m)=>{u.onload=()=>{i.bitmap=u,i.isSvg=!0,p()},c.onload=async()=>{const v=i.svgUrl=c.result;u.src=await o?`${v}#svgView(preserveAspectRatio(none))`:v},u.onerror=c.onerror=m});c.readAsDataURL(r),await d}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){console.error(r),i=null}return l(this,nn).set(e,i),i&&l(this,nn).set(i.id,i),i};let xm=Qy;var jt,xr,_u,zt;class FS{constructor(e=128){C(this,jt,[]);C(this,xr,!1);C(this,_u);C(this,zt,-1);b(this,_u,e)}add({cmd:e,undo:t,post:i,mustExec:r,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(r&&e(),l(this,xr))return;const d={cmd:e,undo:t,post:i,type:o};if(l(this,zt)===-1){l(this,jt).length>0&&(l(this,jt).length=0),b(this,zt,0),l(this,jt).push(d);return}if(c&&l(this,jt)[l(this,zt)].type===o){u&&(d.undo=l(this,jt)[l(this,zt)].undo),l(this,jt)[l(this,zt)]=d;return}const p=l(this,zt)+1;p===l(this,_u)?l(this,jt).splice(0,1):(b(this,zt,p),p<l(this,jt).length&&l(this,jt).splice(p)),l(this,jt).push(d)}undo(){if(l(this,zt)===-1)return;b(this,xr,!0);const{undo:e,post:t}=l(this,jt)[l(this,zt)];e(),t==null||t(),b(this,xr,!1),b(this,zt,l(this,zt)-1)}redo(){if(l(this,zt)<l(this,jt).length-1){b(this,zt,l(this,zt)+1),b(this,xr,!0);const{cmd:e,post:t}=l(this,jt)[l(this,zt)];e(),t==null||t(),b(this,xr,!1)}}hasSomethingToUndo(){return l(this,zt)!==-1}hasSomethingToRedo(){return l(this,zt)<l(this,jt).length-1}destroy(){b(this,jt,null)}}jt=new WeakMap,xr=new WeakMap,_u=new WeakMap,zt=new WeakMap;var zf,$A;class Nh{constructor(e){C(this,zf);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=gn.platform;for(const[i,r,o={}]of e)for(const c of i){const u=c.startsWith("mac+");t&&u?(this.callbacks.set(c.slice(4),{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1))):!t&&!u&&(this.callbacks.set(c,{callback:r,options:o}),this.allKeys.add(c.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(_(this,zf,$A).call(this,t));if(!i)return;const{callback:r,options:{bubbles:o=!1,args:c=[],checker:u=null}}=i;u&&!u(e,t)||(r.bind(e,...c,t)(),o||(t.stopPropagation(),t.preventDefault()))}}zf=new WeakSet,$A=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Hf=class Hf{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return LS(e),ze(this,"_colors",e)}convert(e){const t=Uy(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,r]of this._colors)if(r.every((o,c)=>o===t[c]))return Hf._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?ge.makeHexColor(...t):e}};Ee(Hf,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let _m=Hf;var dl,Dn,Pt,Gt,fl,bs,pl,Ai,_r,gl,Co,Ui,bi,ko,Su,Eu,ml,Cu,$i,Sr,yl,Er,Vi,Bf,Cr,ku,kr,To,Tu,Pu,Ht,Ge,xs,Po,Ru,Lu,Tr,Wi,_s,Mu,ei,ne,of,Sm,VA,WA,af,GA,XA,qA,Em,KA,Cm,km,YA,dn,vr,QA,ZA,Tm,JA,Jc,Pm;const rl=class rl{constructor(e,t,i,r,o,c,u,d,p,m,v){C(this,ne);C(this,dl,new AbortController);C(this,Dn,null);C(this,Pt,new Map);C(this,Gt,new Map);C(this,fl,null);C(this,bs,null);C(this,pl,null);C(this,Ai,new FS);C(this,_r,null);C(this,gl,0);C(this,Co,new Set);C(this,Ui,null);C(this,bi,null);C(this,ko,new Set);C(this,Su,!1);C(this,Eu,!1);C(this,ml,!1);C(this,Cu,null);C(this,$i,null);C(this,Sr,null);C(this,yl,null);C(this,Er,!1);C(this,Vi,null);C(this,Bf,new NS);C(this,Cr,!1);C(this,ku,!1);C(this,kr,null);C(this,To,null);C(this,Tu,null);C(this,Pu,null);C(this,Ht,Re.NONE);C(this,Ge,new Set);C(this,xs,null);C(this,Po,null);C(this,Ru,null);C(this,Lu,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});C(this,Tr,[0,0]);C(this,Wi,null);C(this,_s,null);C(this,Mu,null);C(this,ei,null);const w=this._signal=l(this,dl).signal;b(this,_s,e),b(this,Mu,t),b(this,fl,i),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:w}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:w}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:w}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:w}),r._on("setpreference",this.onSetPreference.bind(this),{signal:w}),r._on("switchannotationeditorparams",A=>this.updateParams(A.type,A.value),{signal:w}),_(this,ne,GA).call(this),_(this,ne,YA).call(this),_(this,ne,Em).call(this),b(this,bs,o.annotationStorage),b(this,Cu,o.filterFactory),b(this,Po,c),b(this,yl,u||null),b(this,Su,d),b(this,Eu,p),b(this,ml,m),b(this,Pu,v||null),this.viewParameters={realScale:qr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=rl.prototype,t=c=>l(c,_s).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),i=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return ze(this,"_keyboardManager",new Nh([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&l(c,_s).contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&l(c,_s).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}destroy(){var e,t,i,r;(e=l(this,ei))==null||e.resolve(),b(this,ei,null),(t=l(this,dl))==null||t.abort(),b(this,dl,null),this._signal=null;for(const o of l(this,Gt).values())o.destroy();l(this,Gt).clear(),l(this,Pt).clear(),l(this,ko).clear(),b(this,Dn,null),l(this,Ge).clear(),l(this,Ai).destroy(),(i=l(this,fl))==null||i.destroy(),(r=l(this,Vi))==null||r.hide(),b(this,Vi,null),l(this,$i)&&(clearTimeout(l(this,$i)),b(this,$i,null)),l(this,Wi)&&(clearTimeout(l(this,Wi)),b(this,Wi,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,Pu)}get useNewAltTextFlow(){return l(this,Eu)}get useNewAltTextWhenAddingImage(){return l(this,ml)}get hcmFilter(){return ze(this,"hcmFilter",l(this,Po)?l(this,Cu).addHCMFilter(l(this,Po).foreground,l(this,Po).background):"none")}get direction(){return ze(this,"direction",getComputedStyle(l(this,_s)).direction)}get highlightColors(){return ze(this,"highlightColors",l(this,yl)?new Map(l(this,yl).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return ze(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){b(this,Tu,e)}editAltText(e,t=!1){var i;(i=l(this,fl))==null||i.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":b(this,ml,t);break}}onPageChanging({pageNumber:e}){b(this,gl,e-1)}focusMainContainer(){l(this,_s).focus()}findParent(e,t){for(const i of l(this,Gt).values()){const{x:r,y:o,width:c,height:u}=i.div.getBoundingClientRect();if(e>=r&&e<=r+c&&t>=o&&t<=o+u)return i}return null}disableUserSelect(e=!1){l(this,Mu).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,ko).add(e)}removeShouldRescale(e){l(this,ko).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*qr.PDF_TO_CSS_UNITS;for(const t of l(this,ko))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:c}=t,u=t.toString(),p=_(this,ne,of).call(this,t).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;t.empty();const v=_(this,ne,Sm).call(this,p),w=l(this,Ht)===Re.NONE,A=()=>{v==null||v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:m,anchorNode:i,anchorOffset:r,focusNode:o,focusOffset:c,text:u}),w&&this.showAllEditors("highlight",!0,!0)};if(w){this.switchToMode(Re.HIGHLIGHT,A);return}A()}addToAnnotationStorage(e){!e.isEmpty()&&l(this,bs)&&!l(this,bs).has(e.id)&&l(this,bs).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,l(this,Er)&&(b(this,Er,!1),_(this,ne,af).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,Ge))if(t.div.contains(e)){b(this,To,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,To))return;const[e,t]=l(this,To);b(this,To,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){_(this,ne,Em).call(this),_(this,ne,Cm).call(this)}removeEditListeners(){_(this,ne,KA).call(this),_(this,ne,km).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of l(this,bi))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of l(this,bi))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=l(this,Dn))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of l(this,Ge)){const o=r.serialize(!0);o&&t.push(o)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const c of l(this,bi))if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){Ie(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const o=[];for(const d of i){const p=await r.deserialize(d);if(!p)return;o.push(p)}const c=()=>{for(const d of o)_(this,ne,Tm).call(this,d);_(this,ne,Pm).call(this,o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){Ie(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,Ht)!==Re.NONE&&!this.isEditorHandlingKeyboard&&rl._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Er)&&(b(this,Er,!1),_(this,ne,af).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(_(this,ne,XA).call(this),_(this,ne,Cm).call(this),_(this,ne,dn).call(this,{isEditing:l(this,Ht)!==Re.NONE,isEmpty:_(this,ne,Jc).call(this),hasSomethingToUndo:l(this,Ai).hasSomethingToUndo(),hasSomethingToRedo:l(this,Ai).hasSomethingToRedo(),hasSelectedEditor:!1})):(_(this,ne,qA).call(this),_(this,ne,km).call(this),_(this,ne,dn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,bi)){b(this,bi,e);for(const t of l(this,bi))_(this,ne,vr).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,Bf).id}get currentLayer(){return l(this,Gt).get(l(this,gl))}getLayer(e){return l(this,Gt).get(e)}get currentPageIndex(){return l(this,gl)}addLayer(e){l(this,Gt).set(e.pageIndex,e),l(this,Cr)?e.enable():e.disable()}removeLayer(e){l(this,Gt).delete(e.pageIndex)}async updateMode(e,t=null,i=!1){if(l(this,Ht)!==e&&!(l(this,ei)&&(await l(this,ei).promise,!l(this,ei)))){if(b(this,ei,Promise.withResolvers()),b(this,Ht,e),e===Re.NONE){this.setEditingState(!1),_(this,ne,ZA).call(this),l(this,ei).resolve();return}this.setEditingState(!0),await _(this,ne,QA).call(this),this.unselectAll();for(const r of l(this,Gt).values())r.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),l(this,ei).resolve();return}for(const r of l(this,Pt).values())r.annotationElementId===t?(this.setSelected(r),r.enterInEditMode()):r.unselect();l(this,ei).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==l(this,Ht)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(l(this,bi)){switch(e){case Ce.CREATE:this.currentLayer.addNewEditor();return;case Ce.HIGHLIGHT_DEFAULT_COLOR:(i=l(this,Tu))==null||i.updateColor(t);break;case Ce.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Ru)||b(this,Ru,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of l(this,Ge))r.updateParams(e,t);for(const r of l(this,bi))r.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var o;for(const c of l(this,Pt).values())c.editorType===e&&c.show(t);(((o=l(this,Ru))==null?void 0:o.get(Ce.HIGHLIGHT_SHOW_ALL))??!0)!==t&&_(this,ne,vr).call(this,[[Ce.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,ku)!==e){b(this,ku,e);for(const t of l(this,Gt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of l(this,Pt).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return l(this,Pt).get(e)}addEditor(e){l(this,Pt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(l(this,$i)&&clearTimeout(l(this,$i)),b(this,$i,setTimeout(()=>{this.focusMainContainer(),b(this,$i,null)},0))),l(this,Pt).delete(e.id),this.unselect(e),(!e.annotationElementId||!l(this,Co).has(e.annotationElementId))&&((t=l(this,bs))==null||t.remove(e.id))}addDeletedAnnotationElement(e){l(this,Co).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,Co).has(e)}removeDeletedAnnotationElement(e){l(this,Co).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,Dn)!==e&&(b(this,Dn,e),e&&_(this,ne,vr).call(this,e.propertiesToUpdate))}updateUI(e){l(this,ne,JA)===e&&_(this,ne,vr).call(this,e.propertiesToUpdate)}toggleSelected(e){if(l(this,Ge).has(e)){l(this,Ge).delete(e),e.unselect(),_(this,ne,dn).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,Ge).add(e),e.select(),_(this,ne,vr).call(this,e.propertiesToUpdate),_(this,ne,dn).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of l(this,Ge))t!==e&&t.unselect();l(this,Ge).clear(),l(this,Ge).add(e),e.select(),_(this,ne,vr).call(this,e.propertiesToUpdate),_(this,ne,dn).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,Ge).has(e)}get firstSelectedEditor(){return l(this,Ge).values().next().value}unselect(e){e.unselect(),l(this,Ge).delete(e),_(this,ne,dn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,Ge).size!==0}get isEnterHandled(){return l(this,Ge).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,Ai).undo(),_(this,ne,dn).call(this,{hasSomethingToUndo:l(this,Ai).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_(this,ne,Jc).call(this)})}redo(){l(this,Ai).redo(),_(this,ne,dn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,Ai).hasSomethingToRedo(),isEmpty:_(this,ne,Jc).call(this)})}addCommands(e){l(this,Ai).add(e),_(this,ne,dn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_(this,ne,Jc).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...l(this,Ge)],t=()=>{for(const r of e)r.remove()},i=()=>{for(const r of e)_(this,ne,Tm).call(this,r)};this.addCommands({cmd:t,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=l(this,Dn))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,Dn)||this.hasSelection}selectAll(){for(const e of l(this,Ge))e.commit();_(this,ne,Pm).call(this,l(this,Pt).values())}unselectAll(){if(!(l(this,Dn)&&(l(this,Dn).commitOrRemove(),l(this,Ht)!==Re.NONE))&&this.hasSelection){for(const e of l(this,Ge))e.unselect();l(this,Ge).clear(),_(this,ne,dn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;l(this,Tr)[0]+=e,l(this,Tr)[1]+=t;const[r,o]=l(this,Tr),c=[...l(this,Ge)],u=1e3;l(this,Wi)&&clearTimeout(l(this,Wi)),b(this,Wi,setTimeout(()=>{b(this,Wi,null),l(this,Tr)[0]=l(this,Tr)[1]=0,this.addCommands({cmd:()=>{for(const d of c)l(this,Pt).has(d.id)&&d.translateInPage(r,o)},undo:()=>{for(const d of c)l(this,Pt).has(d.id)&&d.translateInPage(-r,-o)},mustExec:!1})},u));for(const d of c)d.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,Ui,new Map);for(const e of l(this,Ge))l(this,Ui).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Ui))return!1;this.disableUserSelect(!1);const e=l(this,Ui);b(this,Ui,null);let t=!1;for(const[{x:r,y:o,pageIndex:c},u]of e)u.newX=r,u.newY=o,u.newPageIndex=c,t||(t=r!==u.savedX||o!==u.savedY||c!==u.savedPageIndex);if(!t)return!1;const i=(r,o,c,u)=>{if(l(this,Pt).has(r.id)){const d=l(this,Gt).get(u);d?r._setParentAndPosition(d,o,c):(r.pageIndex=u,r.x=o,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:o,newY:c,newPageIndex:u}]of e)i(r,o,c,u)},undo:()=>{for(const[r,{savedX:o,savedY:c,savedPageIndex:u}]of e)i(r,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,Ui))for(const i of l(this,Ui).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,Ge).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,Dn)===e}getActive(){return l(this,Dn)}getMode(){return l(this,Ht)}get imageManager(){return ze(this,"imageManager",new xm)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let p=0,m=t.rangeCount;p<m;p++)if(!e.contains(t.getRangeAt(p).commonAncestorContainer))return null;const{x:i,y:r,width:o,height:c}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(p,m,v,w)=>({x:(m-r)/c,y:1-(p+v-i)/o,width:w/c,height:v/o});break;case"180":u=(p,m,v,w)=>({x:1-(p+v-i)/o,y:1-(m+w-r)/c,width:v/o,height:w/c});break;case"270":u=(p,m,v,w)=>({x:1-(m+w-r)/c,y:(p-i)/o,width:w/c,height:v/o});break;default:u=(p,m,v,w)=>({x:(p-i)/o,y:(m-r)/c,width:v/o,height:w/c});break}const d=[];for(let p=0,m=t.rangeCount;p<m;p++){const v=t.getRangeAt(p);if(!v.collapsed)for(const{x:w,y:A,width:S,height:E}of v.getClientRects())S===0||E===0||d.push(u(w,A,S,E))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,pl)||b(this,pl,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,pl))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=l(this,pl))==null?void 0:r.get(e.data.id);if(!t)return;const i=l(this,bs).getRawValue(t);i&&(l(this,Ht)===Re.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};dl=new WeakMap,Dn=new WeakMap,Pt=new WeakMap,Gt=new WeakMap,fl=new WeakMap,bs=new WeakMap,pl=new WeakMap,Ai=new WeakMap,_r=new WeakMap,gl=new WeakMap,Co=new WeakMap,Ui=new WeakMap,bi=new WeakMap,ko=new WeakMap,Su=new WeakMap,Eu=new WeakMap,ml=new WeakMap,Cu=new WeakMap,$i=new WeakMap,Sr=new WeakMap,yl=new WeakMap,Er=new WeakMap,Vi=new WeakMap,Bf=new WeakMap,Cr=new WeakMap,ku=new WeakMap,kr=new WeakMap,To=new WeakMap,Tu=new WeakMap,Pu=new WeakMap,Ht=new WeakMap,Ge=new WeakMap,xs=new WeakMap,Po=new WeakMap,Ru=new WeakMap,Lu=new WeakMap,Tr=new WeakMap,Wi=new WeakMap,_s=new WeakMap,Mu=new WeakMap,ei=new WeakMap,ne=new WeakSet,of=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Sm=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of l(this,Gt).values())if(i.hasTextLayer(e))return i;return null},VA=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=_(this,ne,of).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(l(this,Vi)||b(this,Vi,new MS(this)),l(this,Vi).show(i,r,this.direction==="ltr"))},WA=function(){var o,c,u;const e=document.getSelection();if(!e||e.isCollapsed){l(this,xs)&&((o=l(this,Vi))==null||o.hide(),b(this,xs,null),_(this,ne,dn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,xs))return;const r=_(this,ne,of).call(this,e).closest(".textLayer");if(!r){l(this,xs)&&((c=l(this,Vi))==null||c.hide(),b(this,xs,null),_(this,ne,dn).call(this,{hasSelectedText:!1}));return}if((u=l(this,Vi))==null||u.hide(),b(this,xs,t),_(this,ne,dn).call(this,{hasSelectedText:!0}),!(l(this,Ht)!==Re.HIGHLIGHT&&l(this,Ht)!==Re.NONE)&&(l(this,Ht)===Re.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,Er,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=l(this,Ht)===Re.HIGHLIGHT?_(this,ne,Sm).call(this,r):null;d==null||d.toggleDrawing();const p=new AbortController,m=this.combinedSignal(p),v=w=>{w.type==="pointerup"&&w.button!==0||(p.abort(),d==null||d.toggleDrawing(!0),w.type==="pointerup"&&_(this,ne,af).call(this,"main_toolbar"))};window.addEventListener("pointerup",v,{signal:m}),window.addEventListener("blur",v,{signal:m})}},af=function(e=""){l(this,Ht)===Re.HIGHLIGHT?this.highlightSelection(e):l(this,Su)&&_(this,ne,VA).call(this)},GA=function(){document.addEventListener("selectionchange",_(this,ne,WA).bind(this),{signal:this._signal})},XA=function(){if(l(this,Sr))return;b(this,Sr,new AbortController);const e=this.combinedSignal(l(this,Sr));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},qA=function(){var e;(e=l(this,Sr))==null||e.abort(),b(this,Sr,null)},Em=function(){if(l(this,kr))return;b(this,kr,new AbortController);const e=this.combinedSignal(l(this,kr));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},KA=function(){var e;(e=l(this,kr))==null||e.abort(),b(this,kr,null)},Cm=function(){if(l(this,_r))return;b(this,_r,new AbortController);const e=this.combinedSignal(l(this,_r));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},km=function(){var e;(e=l(this,_r))==null||e.abort(),b(this,_r,null)},YA=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},dn=function(e){Object.entries(e).some(([i,r])=>l(this,Lu)[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,Lu),e)}),l(this,Ht)===Re.HIGHLIGHT&&e.hasSelectedEditor===!1&&_(this,ne,vr).call(this,[[Ce.HIGHLIGHT_FREE,!0]]))},vr=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},QA=async function(){if(!l(this,Cr)){b(this,Cr,!0);const e=[];for(const t of l(this,Gt).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,Pt).values())t.enable()}},ZA=function(){if(this.unselectAll(),l(this,Cr)){b(this,Cr,!1);for(const e of l(this,Gt).values())e.disable();for(const e of l(this,Pt).values())e.disable()}},Tm=function(e){const t=l(this,Gt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},JA=function(){let e=null;for(e of l(this,Ge));return e},Jc=function(){if(l(this,Pt).size===0)return!0;if(l(this,Pt).size===1)for(const e of l(this,Pt).values())return e.isEmpty();return!1},Pm=function(e){for(const t of l(this,Ge))t.unselect();l(this,Ge).clear();for(const t of e)t.isEmpty()||(l(this,Ge).add(t),t.select());_(this,ne,dn).call(this,{hasSelectedEditor:this.hasSelection})},Ee(rl,"TRANSLATE_SMALL",1),Ee(rl,"TRANSLATE_BIG",10);let wa=rl;var Bt,Gi,xi,vl,Xi,On,wl,qi,Cn,Ss,Ro,Ki,Pr,Mi,eu,lf;const fn=class fn{constructor(e){C(this,Mi);C(this,Bt,null);C(this,Gi,!1);C(this,xi,null);C(this,vl,null);C(this,Xi,null);C(this,On,null);C(this,wl,!1);C(this,qi,null);C(this,Cn,null);C(this,Ss,null);C(this,Ro,null);C(this,Ki,!1);b(this,Cn,e),b(this,Ki,e._uiManager.useNewAltTextFlow),l(fn,Pr)||b(fn,Pr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){fn._l10n??(fn._l10n=e)}async render(){const e=b(this,xi,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=b(this,vl,document.createElement("span"));e.append(t),l(this,Ki)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(fn,Pr).missing),t.setAttribute("data-l10n-id",l(fn,Pr)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=l(this,Cn)._uiManager._signal;e.addEventListener("contextmenu",li,{signal:i}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const r=o=>{o.preventDefault(),l(this,Cn)._uiManager.editAltText(l(this,Cn)),l(this,Ki)&&l(this,Cn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Mi,eu)}})};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(b(this,wl,!0),r(o))},{signal:i}),await _(this,Mi,lf).call(this),e}finish(){l(this,xi)&&(l(this,xi).focus({focusVisible:l(this,wl)}),b(this,wl,!1))}isEmpty(){return l(this,Ki)?l(this,Bt)===null:!l(this,Bt)&&!l(this,Gi)}hasData(){return l(this,Ki)?l(this,Bt)!==null||!!l(this,Ss):this.isEmpty()}get guessedText(){return l(this,Ss)}async setGuessedText(e){l(this,Bt)===null&&(b(this,Ss,e),b(this,Ro,await fn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),_(this,Mi,lf).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,Ki)||l(this,Bt)){(t=l(this,qi))==null||t.remove(),b(this,qi,null);return}if(!l(this,qi)){const i=b(this,qi,document.createElement("div"));i.className="noAltTextBadge",l(this,Cn).div.append(i)}l(this,qi).classList.toggle("hidden",!e)}serialize(e){let t=l(this,Bt);return!e&&l(this,Ss)===t&&(t=l(this,Ro)),{altText:t,decorative:l(this,Gi),guessedText:l(this,Ss),textWithDisclaimer:l(this,Ro)}}get data(){return{altText:l(this,Bt),decorative:l(this,Gi)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:r,cancel:o=!1}){i&&(b(this,Ss,i),b(this,Ro,r)),!(l(this,Bt)===e&&l(this,Gi)===t)&&(o||(b(this,Bt,e),b(this,Gi,t)),_(this,Mi,lf).call(this))}toggle(e=!1){l(this,xi)&&(!e&&l(this,On)&&(clearTimeout(l(this,On)),b(this,On,null)),l(this,xi).disabled=!e)}shown(){l(this,Cn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Mi,eu)}})}destroy(){var e,t;(e=l(this,xi))==null||e.remove(),b(this,xi,null),b(this,vl,null),b(this,Xi,null),(t=l(this,qi))==null||t.remove(),b(this,qi,null)}};Bt=new WeakMap,Gi=new WeakMap,xi=new WeakMap,vl=new WeakMap,Xi=new WeakMap,On=new WeakMap,wl=new WeakMap,qi=new WeakMap,Cn=new WeakMap,Ss=new WeakMap,Ro=new WeakMap,Ki=new WeakMap,Pr=new WeakMap,Mi=new WeakSet,eu=function(){return l(this,Bt)&&"added"||l(this,Bt)===null&&this.guessedText&&"review"||"missing"},lf=async function(){var r,o,c;const e=l(this,xi);if(!e)return;if(l(this,Ki)){if(e.classList.toggle("done",!!l(this,Bt)),e.setAttribute("data-l10n-id",l(fn,Pr)[l(this,Mi,eu)]),(r=l(this,vl))==null||r.setAttribute("data-l10n-id",l(fn,Pr)[`${l(this,Mi,eu)}-label`]),!l(this,Bt)){(o=l(this,Xi))==null||o.remove();return}}else{if(!l(this,Bt)&&!l(this,Gi)){e.classList.remove("done"),(c=l(this,Xi))==null||c.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,Xi);if(!t){b(this,Xi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,Cn).id}`;const u=100,d=l(this,Cn)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(l(this,On)),b(this,On,null)},{once:!0}),e.addEventListener("mouseenter",()=>{b(this,On,setTimeout(()=>{b(this,On,null),l(this,Xi).classList.add("show"),l(this,Cn)._reportTelemetry({action:"alt_text_tooltip"})},u))},{signal:d}),e.addEventListener("mouseleave",()=>{var p;l(this,On)&&(clearTimeout(l(this,On)),b(this,On,null)),(p=l(this,Xi))==null||p.classList.remove("show")},{signal:d})}l(this,Gi)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,Bt)),t.parentNode||e.append(t);const i=l(this,Cn).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},C(fn,Pr,null),Ee(fn,"_l10n",null);let If=fn;var Lo,_i,ct,Al,Mo,Xt,Io,Rr,Iu,No,Lr,Nu,Fo,Es,Yi,bl,xl,ti,Fu,Uf,Me,Rm,Du,Lm,Mm,eb,tb,Im,Nm,Fm,nb,Dm,ib,sb,rb,Om,tu;const Ve=class Ve{constructor(e){C(this,Me);C(this,Lo,null);C(this,_i,null);C(this,ct,null);C(this,Al,!1);C(this,Mo,!1);C(this,Xt,null);C(this,Io,null);C(this,Rr,null);C(this,Iu,"");C(this,No,!1);C(this,Lr,null);C(this,Nu,!1);C(this,Fo,!1);C(this,Es,!1);C(this,Yi,null);C(this,bl,0);C(this,xl,0);C(this,ti,null);Ee(this,"_editToolbar",null);Ee(this,"_initialOptions",Object.create(null));Ee(this,"_initialData",null);Ee(this,"_isVisible",!0);Ee(this,"_uiManager",null);Ee(this,"_focusEventsAllowed",!0);C(this,Fu,!1);C(this,Uf,Ve._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:r,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[o,c];const[u,d]=this.parentDimensions;this.x=e.x/u,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ve.prototype._resizeWithKeyboard,t=wa.TRANSLATE_SMALL,i=wa.TRANSLATE_BIG;return ze(this,"_resizerKeyboardManager",new Nh([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],Ve.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return ze(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new DS({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Ve._l10n??(Ve._l10n=e),Ve._l10nResizer||(Ve._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ve._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Ve._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){nt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,Fu)}set _isDraggable(e){var t;b(this,Fu,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,Uf)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):_(this,Me,tu).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,No)?b(this,No,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,r){const[o,c]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/o,this.y=(t+r)/c,this.fixAndSetPosition()}translate(e,t){_(this,Me,Rm).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,Lr)||b(this,Lr,[this.x,this.y]),_(this,Me,Rm).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){l(this,Lr)||b(this,Lr,[this.x,this.y]);const[i,r]=this.parentDimensions;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[u,d]=this.getBaseTranslation();o+=u,c+=d,this.div.style.left=`${(100*o).toFixed(2)}%`,this.div.style.top=`${(100*c).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!l(this,Lr)&&(l(this,Lr)[0]!==this.x||l(this,Lr)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=Ve,r=i/e,o=i/t;switch(this.rotation){case 90:return[-r,o];case 180:return[r,o];case 270:return[r,-o];default:return[-r,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:r,y:o,width:c,height:u}=this;if(c*=t,u*=i,r*=t,o*=i,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-c,r)),o=Math.max(0,Math.min(i-u,o));break;case 90:r=Math.max(0,Math.min(t-u,r)),o=Math.min(i,Math.max(c,o));break;case 180:r=Math.min(t,Math.max(c,r)),o=Math.min(i,Math.max(u,o));break;case 270:r=Math.min(t,Math.max(u,r)),o=Math.max(0,Math.min(i-c,o));break}this.x=r/=t,this.y=o/=i;const[d,p]=this.getBaseTranslation();r+=d,o+=p;const{style:m}=this.div;m.left=`${(100*r).toFixed(2)}%`,m.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return _(i=Ve,Du,Lm).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return _(i=Ve,Du,Lm).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,r]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,l(this,Mo)||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,r=i.endsWith("%"),o=!l(this,Mo)&&t.endsWith("%");if(r&&o)return;const[c,u]=this.parentDimensions;r||(e.width=`${(100*parseFloat(i)/c).toFixed(2)}%`),!l(this,Mo)&&!o&&(e.height=`${(100*parseFloat(t)/u).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=l(this,ct))==null||e.finish()}async addEditToolbar(){return this._editToolbar||l(this,Fo)?this._editToolbar:(this._editToolbar=new Am(this),this.div.append(this._editToolbar.render()),l(this,ct)&&await this._editToolbar.addAltText(l(this,ct)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=l(this,ct))==null||e.destroy())}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,ct)||(If.initialize(Ve._l10n),b(this,ct,new If(this)),l(this,Lo)&&(l(this,ct).data=l(this,Lo),b(this,Lo,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=l(this,ct))==null?void 0:e.data}set altTextData(e){l(this,ct)&&(l(this,ct).data=e)}get guessedAltText(){var e;return(e=l(this,ct))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,ct))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,ct))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,ct)&&!l(this,ct).isEmpty()}hasAltTextData(){var e;return((e=l(this,ct))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,Al)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),_(this,Me,Dm).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),Mf(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=gn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(b(this,No,!0),this._isDraggable){_(this,Me,nb).call(this,e);return}_(this,Me,Fm).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){l(this,Yi)&&clearTimeout(l(this,Yi)),b(this,Yi,setTimeout(()=>{var e;b(this,Yi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const r=this.parentScale,[o,c]=this.pageDimensions,[u,d]=this.pageTranslation,p=e/r,m=t/r,v=this.x*o,w=this.y*c,A=this.width*o,S=this.height*c;switch(i){case 0:return[v+p+u,c-w-m-S+d,v+p+A+u,c-w-m+d];case 90:return[v+m+u,c-w+p+d,v+m+S+u,c-w+p+A+d];case 180:return[v-p-A+u,c-w+m+d,v-p+u,c-w+m+S+d];case 270:return[v-m-S+u,c-w-p-A+d,v-m+u,c-w-p+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,r,o,c]=e,u=o-i,d=c-r;switch(this.rotation){case 0:return[i,t-c,u,d];case 90:return[i,t-r,d,u];case 180:return[o,t-r,u,d];case 270:return[o,t-c,d,u];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){b(this,Fo,!0)}disableEditMode(){b(this,Fo,!1)}isInEditMode(){return l(this,Fo)}shouldGetKeyboardEvents(){return l(this,Es)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){_(this,Me,Dm).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){nt("An editor must be serializable")}static async deserialize(e,t,i){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});r.rotation=e.rotation,b(r,Lo,e.accessibilityData);const[o,c]=r.pageDimensions,[u,d,p,m]=r.getRectInCurrentCoords(e.rect,c);return r.x=u/o,r.y=d/c,r.width=p/o,r.height=m/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=l(this,Rr))==null||e.abort(),b(this,Rr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,Yi)&&(clearTimeout(l(this,Yi)),b(this,Yi,null)),_(this,Me,tu).call(this),this.removeEditToolbar(),l(this,ti)){for(const t of l(this,ti).values())clearTimeout(t);b(this,ti,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(_(this,Me,eb).call(this),l(this,Xt).classList.remove("hidden"),Mf(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),b(this,Io,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,Xt).children;if(!l(this,_i)){b(this,_i,Array.from(t));const c=_(this,Me,ib).bind(this),u=_(this,Me,sb).bind(this),d=this._uiManager._signal;for(const p of l(this,_i)){const m=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",c,{signal:d}),p.addEventListener("blur",u,{signal:d}),p.addEventListener("focus",_(this,Me,rb).bind(this,m),{signal:d}),p.setAttribute("data-l10n-id",Ve._l10nResizer[m])}}const i=l(this,_i)[0];let r=0;for(const c of t){if(c===i)break;r++}const o=(360-this.rotation+this.parentRotation)%360/90*(l(this,_i).length/4);if(o!==r){if(o<r)for(let u=0;u<r-o;u++)l(this,Xt).append(l(this,Xt).firstChild);else if(o>r)for(let u=0;u<o-r;u++)l(this,Xt).firstChild.before(l(this,Xt).lastChild);let c=0;for(const u of t){const p=l(this,_i)[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Ve._l10nResizer[p])}}_(this,Me,Om).call(this,0),b(this,Es,!0),l(this,Xt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,Es)&&_(this,Me,Nm).call(this,l(this,Iu),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){_(this,Me,tu).call(this),this.div.focus()}select(){var e,t,i;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,o;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(t=this._editToolbar)==null||t.show(),(i=l(this,ct))==null||i.toggleAltTextBadge(!1)}unselect(){var e,t,i,r,o;(e=l(this,Xt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(o=l(this,ct))==null||o.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,Nu)}set isEditing(e){b(this,Nu,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){b(this,Mo,!0);const i=e/t,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,ti)||b(this,ti,new Map);const{action:i}=e;let r=l(this,ti).get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),l(this,ti).delete(i),l(this,ti).size===0&&b(this,ti,null)},Ve._telemetryTimeout),l(this,ti).set(i,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),b(this,Al,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,Al,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Lo=new WeakMap,_i=new WeakMap,ct=new WeakMap,Al=new WeakMap,Mo=new WeakMap,Xt=new WeakMap,Io=new WeakMap,Rr=new WeakMap,Iu=new WeakMap,No=new WeakMap,Lr=new WeakMap,Nu=new WeakMap,Fo=new WeakMap,Es=new WeakMap,Yi=new WeakMap,bl=new WeakMap,xl=new WeakMap,ti=new WeakMap,Fu=new WeakMap,Uf=new WeakMap,Me=new WeakSet,Rm=function([e,t],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/t,this.fixAndSetPosition()},Du=new WeakSet,Lm=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Mm=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},eb=function(){if(l(this,Xt))return;b(this,Xt,document.createElement("div")),l(this,Xt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const r=document.createElement("div");l(this,Xt).append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",_(this,Me,tb).bind(this,i),{signal:t}),r.addEventListener("contextmenu",li,{signal:t}),r.tabIndex=-1}this.div.prepend(l(this,Xt))},tb=function(e,t){var S;t.preventDefault();const{isMac:i}=gn.platform;if(t.button!==0||t.ctrlKey&&i)return;(S=l(this,ct))==null||S.toggle(!1);const r=this._isDraggable;this._isDraggable=!1;const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",_(this,Me,Nm).bind(this,e),{passive:!0,capture:!0,signal:c}),window.addEventListener("contextmenu",li,{signal:c});const u=this.x,d=this.y,p=this.width,m=this.height,v=this.parent.div.style.cursor,w=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const A=()=>{var E;o.abort(),this.parent.togglePointerEvents(!0),(E=l(this,ct))==null||E.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=v,this.div.style.cursor=w,_(this,Me,Im).call(this,u,d,p,m)};window.addEventListener("pointerup",A,{signal:c}),window.addEventListener("blur",A,{signal:c})},Im=function(e,t,i,r){const o=this.x,c=this.y,u=this.width,d=this.height;o===e&&c===t&&u===i&&d===r||this.addCommands({cmd:()=>{this.width=u,this.height=d,this.x=o,this.y=c;const[p,m]=this.parentDimensions;this.setDims(p*u,m*d),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=r,this.x=e,this.y=t;const[p,m]=this.parentDimensions;this.setDims(p*i,m*r),this.fixAndSetPosition()},mustExec:!0})},Nm=function(e,t){const[i,r]=this.parentDimensions,o=this.x,c=this.y,u=this.width,d=this.height,p=Ve.MIN_SIZE/i,m=Ve.MIN_SIZE/r,v=Z=>Math.round(Z*1e4)/1e4,w=_(this,Me,Mm).call(this,this.rotation),A=(Z,U)=>[w[0]*Z+w[2]*U,w[1]*Z+w[3]*U],S=_(this,Me,Mm).call(this,360-this.rotation),E=(Z,U)=>[S[0]*Z+S[2]*U,S[1]*Z+S[3]*U];let P,k,R=!1,F=!1;switch(e){case"topLeft":R=!0,P=(Z,U)=>[0,0],k=(Z,U)=>[Z,U];break;case"topMiddle":P=(Z,U)=>[Z/2,0],k=(Z,U)=>[Z/2,U];break;case"topRight":R=!0,P=(Z,U)=>[Z,0],k=(Z,U)=>[0,U];break;case"middleRight":F=!0,P=(Z,U)=>[Z,U/2],k=(Z,U)=>[0,U/2];break;case"bottomRight":R=!0,P=(Z,U)=>[Z,U],k=(Z,U)=>[0,0];break;case"bottomMiddle":P=(Z,U)=>[Z/2,U],k=(Z,U)=>[Z/2,0];break;case"bottomLeft":R=!0,P=(Z,U)=>[0,U],k=(Z,U)=>[Z,0];break;case"middleLeft":F=!0,P=(Z,U)=>[0,U/2],k=(Z,U)=>[Z,U/2];break}const D=P(u,d),B=k(u,d);let H=A(...B);const V=v(o+H[0]),X=v(c+H[1]);let ee=1,se=1,[ie,ye]=this.screenToPageTranslation(t.movementX,t.movementY);if([ie,ye]=E(ie/i,ye/r),R){const Z=Math.hypot(u,d);ee=se=Math.max(Math.min(Math.hypot(B[0]-D[0]-ie,B[1]-D[1]-ye)/Z,1/u,1/d),p/u,m/d)}else F?ee=Math.max(p,Math.min(1,Math.abs(B[0]-D[0]-ie)))/u:se=Math.max(m,Math.min(1,Math.abs(B[1]-D[1]-ye)))/d;const le=v(u*ee),ce=v(d*se);H=A(...k(le,ce));const ve=V-H[0],fe=X-H[1];this.width=le,this.height=ce,this.x=ve,this.y=fe,this.setDims(i*le,r*ce),this.fixAndSetPosition()},Fm=function(e){const{isMac:t}=gn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},nb=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const i=new AbortController,r=this._uiManager.combinedSignal(i);if(t){this.div.classList.add("moving"),b(this,bl,e.clientX),b(this,xl,e.clientY);const c=u=>{const{clientX:d,clientY:p}=u,[m,v]=this.screenToPageTranslation(d-l(this,bl),p-l(this,xl));b(this,bl,d),b(this,xl,p),this._uiManager.dragSelectedEditors(m,v)};window.addEventListener("pointermove",c,{passive:!0,capture:!0,signal:r})}const o=()=>{i.abort(),t&&this.div.classList.remove("moving"),b(this,No,!1),this._uiManager.endDragSession()||_(this,Me,Fm).call(this,e)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})},Dm=function(){if(l(this,Rr)||!this.div)return;b(this,Rr,new AbortController);const e=this._uiManager.combinedSignal(l(this,Rr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},ib=function(e){Ve._resizerKeyboardManager.exec(this,e)},sb=function(e){var t;l(this,Es)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,Xt)&&_(this,Me,tu).call(this)},rb=function(e){b(this,Iu,l(this,Es)?e:"")},Om=function(e){if(l(this,_i))for(const t of l(this,_i))t.tabIndex=e},tu=function(){if(b(this,Es,!1),_(this,Me,Om).call(this,-1),l(this,Io)){const{savedX:e,savedY:t,savedWidth:i,savedHeight:r}=l(this,Io);_(this,Me,Im).call(this,e,t,i,r),b(this,Io,null)}},C(Ve,Du),Ee(Ve,"_l10n",null),Ee(Ve,"_l10nResizer",null),Ee(Ve,"_borderLineWidth",-1),Ee(Ve,"_colorManager",new _m),Ee(Ve,"_zIndex",1),Ee(Ve,"_telemetryTimeout",1e3);let qe=Ve;class DS extends qe{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Jw=3285377520,Jn=4294901760,Bi=65535;class ob{constructor(e){this.h1=e?e&4294967295:Jw,this.h2=e?e&4294967295:Jw}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let E=0,P=e.length;E<P;E++){const k=e.charCodeAt(E);k<=255?t[i++]=k:(t[i++]=k>>>8,t[i++]=k&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,o=i-r*4,c=new Uint32Array(t.buffer,0,r);let u=0,d=0,p=this.h1,m=this.h2;const v=3432918353,w=461845907,A=v&Bi,S=w&Bi;for(let E=0;E<r;E++)E&1?(u=c[E],u=u*v&Jn|u*A&Bi,u=u<<15|u>>>17,u=u*w&Jn|u*S&Bi,p^=u,p=p<<13|p>>>19,p=p*5+3864292196):(d=c[E],d=d*v&Jn|d*A&Bi,d=d<<15|d>>>17,d=d*w&Jn|d*S&Bi,m^=d,m=m<<13|m>>>19,m=m*5+3864292196);switch(u=0,o){case 3:u^=t[r*4+2]<<16;case 2:u^=t[r*4+1]<<8;case 1:u^=t[r*4],u=u*v&Jn|u*A&Bi,u=u<<15|u>>>17,u=u*w&Jn|u*S&Bi,r&1?p^=u:m^=u}this.h1=p,this.h2=m}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Jn|e*36045&Bi,t=t*4283543511&Jn|((t<<16|e>>>16)*2950163797&Jn)>>>16,e^=t>>>1,e=e*444984403&Jn|e*60499&Bi,t=t*3301882366&Jn|((t<<16|e>>>16)*3120437893&Jn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const jm=Object.freeze({map:null,hash:"",transfer:void 0});var Do,Oo,Ut,$f,ab;class $y{constructor(){C(this,$f);C(this,Do,!1);C(this,Oo,null);C(this,Ut,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=l(this,Ut).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return l(this,Ut).get(e)}remove(e){if(l(this,Ut).delete(e),l(this,Ut).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of l(this,Ut).values())if(t instanceof qe)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=l(this,Ut).get(e);let r=!1;if(i!==void 0)for(const[o,c]of Object.entries(t))i[o]!==c&&(r=!0,i[o]=c);else r=!0,l(this,Ut).set(e,t);r&&_(this,$f,ab).call(this),t instanceof qe&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return l(this,Ut).has(e)}getAll(){return l(this,Ut).size>0?Oy(l(this,Ut)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return l(this,Ut).size}resetModified(){l(this,Do)&&(b(this,Do,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new lb(this)}get serializable(){if(l(this,Ut).size===0)return jm;const e=new Map,t=new ob,i=[],r=Object.create(null);let o=!1;for(const[c,u]of l(this,Ut)){const d=u instanceof qe?u.serialize(!1,r):u;d&&(e.set(c,d),t.update(`${c}:${JSON.stringify(d)}`),o||(o=!!d.bitmap))}if(o)for(const c of e.values())c.bitmap&&i.push(c.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:jm}get editorStats(){let e=null;const t=new Map;for(const i of l(this,Ut).values()){if(!(i instanceof qe))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:o}=r;t.has(o)||t.set(o,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const c=e[o]||(e[o]=new Map);for(const[u,d]of Object.entries(r)){if(u==="type")continue;let p=c.get(u);p||(p=new Map,c.set(u,p));const m=p.get(d)??0;p.set(d,m+1)}}for(const[i,r]of t)e[i]=r.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){b(this,Oo,null)}get modifiedIds(){if(l(this,Oo))return l(this,Oo);const e=[];for(const t of l(this,Ut).values())!(t instanceof qe)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return b(this,Oo,{ids:new Set(e),hash:e.join(",")})}}Do=new WeakMap,Oo=new WeakMap,Ut=new WeakMap,$f=new WeakSet,ab=function(){l(this,Do)||(b(this,Do,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Ou;class lb extends $y{constructor(t){super();C(this,Ou);const{map:i,hash:r,transfer:o}=t.serializable,c=structuredClone(i,o?{transfer:o}:null);b(this,Ou,{map:c,hash:r,transfer:o})}get print(){nt("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,Ou)}get modifiedIds(){return ze(this,"modifiedIds",{ids:new Set,hash:""})}}Ou=new WeakMap;var _l;class OS{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){C(this,_l,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,_l).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||l(this,_l).has(e.loadedName))){if(Mt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:o}=e,c=new FontFace(i,r,o);this.addNativeFontFace(c);try{await c.load(),l(this,_l).add(i),t==null||t(e)}catch{Ie(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}nt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw Ie(`Failed to load font '${i.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ze(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(ln||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ze(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Mt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const o=i.shift();setTimeout(o.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:t,callback:e};return i.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ze(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(D,B){return D.charCodeAt(B)<<24|D.charCodeAt(B+1)<<16|D.charCodeAt(B+2)<<8|D.charCodeAt(B+3)&255}function r(D,B,H,V){const X=D.substring(0,B),ee=D.substring(B+H);return X+V+ee}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let p=0;function m(D,B){if(++p>30){Ie("Load test font never loaded."),B();return}if(d.font="30px "+D,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){B();return}setTimeout(m.bind(null,D,B))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=r(w,976,v.length,v);const S=16,E=1482184792;let P=i(w,S);for(o=0,c=v.length-3;o<c;o+=4)P=P-E+i(v,o)|0;o<v.length&&(P=P-E+i(v+"XXX",o)|0),w=r(w,S,4,bS(P));const k=`url(data:font/opentype;base64,${btoa(w)});`,R=`@font-face {font-family:"${v}";src:${k}}`;this.insertRule(R);const F=this._document.createElement("div");F.style.visibility="hidden",F.style.width=F.style.height="10px",F.style.position="absolute",F.style.top=F.style.left="0px";for(const D of[e.loadedName,v]){const B=this._document.createElement("span");B.textContent="Hi",B.style.fontFamily=D,F.append(B)}this._document.body.append(F),m(v,()=>{F.remove(),t.complete()})}}_l=new WeakMap;class jS{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${kS(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(o){Ie(`getPathGenerator - ignoring character: "${o}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[t]=function(o,c){};const r=[];for(let o=0,c=i.length;o<c;)switch(i[o++]){case ms.BEZIER_CURVE_TO:{const[u,d,p,m,v,w]=i.slice(o,o+6);r.push(A=>A.bezierCurveTo(u,d,p,m,v,w)),o+=6}break;case ms.MOVE_TO:{const[u,d]=i.slice(o,o+2);r.push(p=>p.moveTo(u,d)),o+=2}break;case ms.LINE_TO:{const[u,d]=i.slice(o,o+2);r.push(p=>p.lineTo(u,d)),o+=2}break;case ms.QUADRATIC_CURVE_TO:{const[u,d,p,m]=i.slice(o,o+4);r.push(v=>v.quadraticCurveTo(u,d,p,m)),o+=4}break;case ms.RESTORE:r.push(u=>u.restore());break;case ms.SAVE:r.push(u=>u.save());break;case ms.SCALE:Mt(r.length===2,"Scale command is only valid at the third position.");break;case ms.TRANSFORM:{const[u,d,p,m,v,w]=i.slice(o,o+6);r.push(A=>A.transform(u,d,p,m,v,w)),o+=6}break;case ms.TRANSLATE:{const[u,d]=i.slice(o,o+2);r.push(p=>p.translate(u,d)),o+=2}break}return this.compiledGlyphs[t]=function(c,u){r[0](c),r[1](c),c.scale(u,-u);for(let d=2,p=r.length;d<p;d++)r[d](c)}}}var ju;class cb{constructor({enableHWA:e=!1}){C(this,ju,!1);b(this,ju,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!l(this,ju)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){nt("Abstract method `_createCanvas` called.")}}ju=new WeakMap;class zS extends cb{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class ub{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){nt("Abstract method `_fetch` called.")}}class hb extends ub{async _fetch(e){const t=await rp(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):sp(t)}}class db{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,r,o){return"none"}destroy(e=!1){}}var jo,zo,Qi,Cs,sn,Vf,Ho,oe,tn,Qa,Za,cf,Ja,fb,zm,el,nu,iu,Hm,su;class HS extends db{constructor({docId:t,ownerDocument:i=globalThis.document}){super();C(this,oe);C(this,jo);C(this,zo);C(this,Qi);C(this,Cs);C(this,sn);C(this,Vf);C(this,Ho,0);b(this,Cs,t),b(this,sn,i)}addFilter(t){if(!t)return"none";let i=l(this,oe,tn).get(t);if(i)return i;const[r,o,c]=_(this,oe,cf).call(this,t),u=t.length===1?r:`${r}${o}${c}`;if(i=l(this,oe,tn).get(u),i)return l(this,oe,tn).set(t,i),i;const d=`g_${l(this,Cs)}_transfer_map_${hn(this,Ho)._++}`,p=_(this,oe,Ja).call(this,d);l(this,oe,tn).set(t,p),l(this,oe,tn).set(u,p);const m=_(this,oe,el).call(this,d);return _(this,oe,iu).call(this,r,o,c,m),p}addHCMFilter(t,i){var S;const r=`${t}-${i}`,o="base";let c=l(this,oe,Qa).get(o);if((c==null?void 0:c.key)===r||(c?((S=c.filter)==null||S.remove(),c.key=r,c.url="none",c.filter=null):(c={key:r,url:"none",filter:null},l(this,oe,Qa).set(o,c)),!t||!i))return c.url;const u=_(this,oe,su).call(this,t);t=ge.makeHexColor(...u);const d=_(this,oe,su).call(this,i);if(i=ge.makeHexColor(...d),l(this,oe,Za).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return c.url;const p=new Array(256);for(let E=0;E<=255;E++){const P=E/255;p[E]=P<=.03928?P/12.92:((P+.055)/1.055)**2.4}const m=p.join(","),v=`g_${l(this,Cs)}_hcm_filter`,w=c.filter=_(this,oe,el).call(this,v);_(this,oe,iu).call(this,m,m,m,w),_(this,oe,zm).call(this,w);const A=(E,P)=>{const k=u[E]/255,R=d[E]/255,F=new Array(P+1);for(let D=0;D<=P;D++)F[D]=k+D/P*(R-k);return F.join(",")};return _(this,oe,iu).call(this,A(0,5),A(1,5),A(2,5),w),c.url=_(this,oe,Ja).call(this,v),c.url}addAlphaFilter(t){let i=l(this,oe,tn).get(t);if(i)return i;const[r]=_(this,oe,cf).call(this,[t]),o=`alpha_${r}`;if(i=l(this,oe,tn).get(o),i)return l(this,oe,tn).set(t,i),i;const c=`g_${l(this,Cs)}_alpha_map_${hn(this,Ho)._++}`,u=_(this,oe,Ja).call(this,c);l(this,oe,tn).set(t,u),l(this,oe,tn).set(o,u);const d=_(this,oe,el).call(this,c);return _(this,oe,Hm).call(this,r,d),u}addLuminosityFilter(t){let i=l(this,oe,tn).get(t||"luminosity");if(i)return i;let r,o;if(t?([r]=_(this,oe,cf).call(this,[t]),o=`luminosity_${r}`):o="luminosity",i=l(this,oe,tn).get(o),i)return l(this,oe,tn).set(t,i),i;const c=`g_${l(this,Cs)}_luminosity_map_${hn(this,Ho)._++}`,u=_(this,oe,Ja).call(this,c);l(this,oe,tn).set(t,u),l(this,oe,tn).set(o,u);const d=_(this,oe,el).call(this,c);return _(this,oe,fb).call(this,d),t&&_(this,oe,Hm).call(this,r,d),u}addHighlightHCMFilter(t,i,r,o,c){var R;const u=`${i}-${r}-${o}-${c}`;let d=l(this,oe,Qa).get(t);if((d==null?void 0:d.key)===u||(d?((R=d.filter)==null||R.remove(),d.key=u,d.url="none",d.filter=null):(d={key:u,url:"none",filter:null},l(this,oe,Qa).set(t,d)),!i||!r))return d.url;const[p,m]=[i,r].map(_(this,oe,su).bind(this));let v=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),w=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[A,S]=[o,c].map(_(this,oe,su).bind(this));w<v&&([v,w,A,S]=[w,v,S,A]),l(this,oe,Za).style.color="";const E=(F,D,B)=>{const H=new Array(256),V=(w-v)/B,X=F/255,ee=(D-F)/(255*B);let se=0;for(let ie=0;ie<=B;ie++){const ye=Math.round(v+ie*V),le=X+ie*ee;for(let ce=se;ce<=ye;ce++)H[ce]=le;se=ye+1}for(let ie=se;ie<256;ie++)H[ie]=H[se-1];return H.join(",")},P=`g_${l(this,Cs)}_hcm_${t}_filter`,k=d.filter=_(this,oe,el).call(this,P);return _(this,oe,zm).call(this,k),_(this,oe,iu).call(this,E(A[0],S[0],5),E(A[1],S[1],5),E(A[2],S[2],5),k),d.url=_(this,oe,Ja).call(this,P),d.url}destroy(t=!1){t&&l(this,oe,Qa).size!==0||(l(this,Qi)&&(l(this,Qi).parentNode.parentNode.remove(),b(this,Qi,null)),l(this,zo)&&(l(this,zo).clear(),b(this,zo,null)),b(this,Ho,0))}}jo=new WeakMap,zo=new WeakMap,Qi=new WeakMap,Cs=new WeakMap,sn=new WeakMap,Vf=new WeakMap,Ho=new WeakMap,oe=new WeakSet,tn=function(){return l(this,zo)||b(this,zo,new Map)},Qa=function(){return l(this,Vf)||b(this,Vf,new Map)},Za=function(){if(!l(this,Qi)){const t=l(this,sn).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=l(this,sn).createElementNS(vs,"svg");r.setAttribute("width",0),r.setAttribute("height",0),b(this,Qi,l(this,sn).createElementNS(vs,"defs")),t.append(r),r.append(l(this,Qi)),l(this,sn).body.append(t)}return l(this,Qi)},cf=function(t){if(t.length===1){const p=t[0],m=new Array(256);for(let w=0;w<256;w++)m[w]=p[w]/255;const v=m.join(",");return[v,v,v]}const[i,r,o]=t,c=new Array(256),u=new Array(256),d=new Array(256);for(let p=0;p<256;p++)c[p]=i[p]/255,u[p]=r[p]/255,d[p]=o[p]/255;return[c.join(","),u.join(","),d.join(",")]},Ja=function(t){if(l(this,jo)===void 0){b(this,jo,"");const i=l(this,sn).URL;i!==l(this,sn).baseURI&&(op(i)?Ie('#createUrl: ignore "data:"-URL for performance reasons.'):b(this,jo,i.split("#",1)[0]))}return`url(${l(this,jo)}#${t})`},fb=function(t){const i=l(this,sn).createElementNS(vs,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},zm=function(t){const i=l(this,sn).createElementNS(vs,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},el=function(t){const i=l(this,sn).createElementNS(vs,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),l(this,oe,Za).append(i),i},nu=function(t,i,r){const o=l(this,sn).createElementNS(vs,i);o.setAttribute("type","discrete"),o.setAttribute("tableValues",r),t.append(o)},iu=function(t,i,r,o){const c=l(this,sn).createElementNS(vs,"feComponentTransfer");o.append(c),_(this,oe,nu).call(this,c,"feFuncR",t),_(this,oe,nu).call(this,c,"feFuncG",i),_(this,oe,nu).call(this,c,"feFuncB",r)},Hm=function(t,i){const r=l(this,sn).createElementNS(vs,"feComponentTransfer");i.append(r),_(this,oe,nu).call(this,r,"feFuncA",t)},su=function(t){return l(this,oe,Za).style.color=t,Uy(getComputedStyle(l(this,oe,Za)).getPropertyValue("color"))};class pb{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){nt("Abstract method `_fetch` called.")}}class gb extends pb{async _fetch(e){const t=await rp(e,"arraybuffer");return new Uint8Array(t)}}if(ln){var Bm=Promise.withResolvers(),gu=null;(async()=>{const e=await Kd(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Kd(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Kd(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await Kd(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let o,c;return new Map(Object.entries({fs:e,http:t,https:i,url:r,canvas:o,path2d:c}))})().then(e=>{gu=e,Bm.resolve()},e=>{Ie(`loadPackages: ${e}`),gu=new Map,Bm.resolve()})}class Kr{static get promise(){return Bm.promise}static get(e){return gu==null?void 0:gu.get(e)}}async function mb(f){const t=await Kr.get("fs").promises.readFile(f);return new Uint8Array(t)}class BS extends db{}class US extends cb{_createCanvas(e,t){return Kr.get("canvas").createCanvas(e,t)}}class $S extends ub{async _fetch(e){return mb(e)}}class VS extends pb{async _fetch(e){return mb(e)}}const pn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Um(f,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,i),f.clip(r)}class Vy{getPattern(){nt("Abstract method `getPattern` called.")}}class WS extends Vy{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,r){let o;if(r===pn.STROKE||r===pn.FILL){const c=t.current.getClippedPathBoundingBox(r,ht(e))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,p=t.cachedCanvases.getCanvas("pattern",u,d),m=p.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-c[0],-c[1]),i=ge.transform(i,[1,0,0,1,c[0],c[1]]),m.transform(...t.baseTransform),this.matrix&&m.transform(...this.matrix),Um(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),o=e.createPattern(p.canvas,"no-repeat");const v=new DOMMatrix(i);o.setTransform(v)}else Um(e,this._bbox),o=this._createGradient(e);return o}}function um(f,e,t,i,r,o,c,u){const d=e.coords,p=e.colors,m=f.data,v=f.width*4;let w;d[t+1]>d[i+1]&&(w=t,t=i,i=w,w=o,o=c,c=w),d[i+1]>d[r+1]&&(w=i,i=r,r=w,w=c,c=u,u=w),d[t+1]>d[i+1]&&(w=t,t=i,i=w,w=o,o=c,c=w);const A=(d[t]+e.offsetX)*e.scaleX,S=(d[t+1]+e.offsetY)*e.scaleY,E=(d[i]+e.offsetX)*e.scaleX,P=(d[i+1]+e.offsetY)*e.scaleY,k=(d[r]+e.offsetX)*e.scaleX,R=(d[r+1]+e.offsetY)*e.scaleY;if(S>=R)return;const F=p[o],D=p[o+1],B=p[o+2],H=p[c],V=p[c+1],X=p[c+2],ee=p[u],se=p[u+1],ie=p[u+2],ye=Math.round(S),le=Math.round(R);let ce,ve,fe,Z,U,G,W,N;for(let $=ye;$<=le;$++){if($<P){const me=$<S?0:(S-$)/(S-P);ce=A-(A-E)*me,ve=F-(F-H)*me,fe=D-(D-V)*me,Z=B-(B-X)*me}else{let me;$>R?me=1:P===R?me=0:me=(P-$)/(P-R),ce=E-(E-k)*me,ve=H-(H-ee)*me,fe=V-(V-se)*me,Z=X-(X-ie)*me}let ue;$<S?ue=0:$>R?ue=1:ue=(S-$)/(S-R),U=A-(A-k)*ue,G=F-(F-ee)*ue,W=D-(D-se)*ue,N=B-(B-ie)*ue;const be=Math.round(Math.min(ce,U)),ke=Math.round(Math.max(ce,U));let we=v*$+be*4;for(let me=be;me<=ke;me++)ue=(ce-me)/(ce-U),ue<0?ue=0:ue>1&&(ue=1),m[we++]=ve-(ve-G)*ue|0,m[we++]=fe-(fe-W)*ue|0,m[we++]=Z-(Z-N)*ue|0,m[we++]=255}}function GS(f,e,t){const i=e.coords,r=e.colors;let o,c;switch(e.type){case"lattice":const u=e.verticesPerRow,d=Math.floor(i.length/u)-1,p=u-1;for(o=0;o<d;o++){let m=o*u;for(let v=0;v<p;v++,m++)um(f,t,i[m],i[m+1],i[m+u],r[m],r[m+1],r[m+u]),um(f,t,i[m+u+1],i[m+1],i[m+u],r[m+u+1],r[m+1],r[m+u])}break;case"triangles":for(o=0,c=i.length;o<c;o+=3)um(f,t,i[o],i[o+1],i[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class XS extends Vy{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-u,m=Math.ceil(this._bounds[3])-d,v=Math.min(Math.ceil(Math.abs(p*e[0]*1.1)),3e3),w=Math.min(Math.ceil(Math.abs(m*e[1]*1.1)),3e3),A=p/v,S=m/w,E={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/A,scaleY:1/S},P=v+2*2,k=w+2*2,R=i.getCanvas("mesh",P,k),F=R.context,D=F.createImageData(v,w);if(t){const H=D.data;for(let V=0,X=H.length;V<X;V+=4)H[V]=t[0],H[V+1]=t[1],H[V+2]=t[2],H[V+3]=255}for(const H of this._figures)GS(D,H,E);return F.putImageData(D,2,2),{canvas:R.canvas,offsetX:u-2*A,offsetY:d-2*S,scaleX:A,scaleY:S}}getPattern(e,t,i,r){Um(e,this._bbox);let o;if(r===pn.SHADING)o=ge.singularValueDecompose2dScale(ht(e));else if(o=ge.singularValueDecompose2dScale(t.baseTransform),this.matrix){const u=ge.singularValueDecompose2dScale(this.matrix);o=[o[0]*u[0],o[1]*u[1]]}const c=this._createMeshCanvas(o,r===pn.SHADING?null:this._background,t.cachedCanvases);return r!==pn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(c.offsetX,c.offsetY),e.scale(c.scaleX,c.scaleY),e.createPattern(c.canvas,"no-repeat")}}class qS extends Vy{getPattern(){return"hotpink"}}function KS(f){switch(f[0]){case"RadialAxial":return new WS(f);case"Mesh":return new XS(f);case"Dummy":return new qS}throw new Error(`Unknown IR type: ${f[0]}`)}const eA={COLORED:1,UNCOLORED:2},Wf=class Wf{constructor(e,t,i,r,o){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=o}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:r,tilingType:o,color:c,canvasGraphicsFactory:u}=this;let{xstep:d,ystep:p}=this;d=Math.abs(d),p=Math.abs(p),np("TilingType: "+o);const m=t[0],v=t[1],w=t[2],A=t[3],S=w-m,E=A-v,P=ge.singularValueDecompose2dScale(this.matrix),k=ge.singularValueDecompose2dScale(this.baseTransform),R=P[0]*k[0],F=P[1]*k[1];let D=S,B=E,H=!1,V=!1;const X=Math.ceil(d*R),ee=Math.ceil(p*F),se=Math.ceil(S*R),ie=Math.ceil(E*F);X>=se?D=d:H=!0,ee>=ie?B=p:V=!0;const ye=this.getSizeAndScale(D,this.ctx.canvas.width,R),le=this.getSizeAndScale(B,this.ctx.canvas.height,F),ce=e.cachedCanvases.getCanvas("pattern",ye.size,le.size),ve=ce.context,fe=u.createCanvasGraphics(ve);if(fe.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(fe,r,c),ve.translate(-ye.scale*m,-le.scale*v),fe.transform(ye.scale,0,0,le.scale,0,0),ve.save(),this.clipBbox(fe,m,v,w,A),fe.baseTransform=ht(fe.ctx),fe.executeOperatorList(i),fe.endDrawing(),ve.restore(),H||V){const Z=ce.canvas;H&&(D=d),V&&(B=p);const U=this.getSizeAndScale(D,this.ctx.canvas.width,R),G=this.getSizeAndScale(B,this.ctx.canvas.height,F),W=U.size,N=G.size,$=e.cachedCanvases.getCanvas("pattern-workaround",W,N),ue=$.context,be=H?Math.floor(S/d):0,ke=V?Math.floor(E/p):0;for(let we=0;we<=be;we++)for(let me=0;me<=ke;me++)ue.drawImage(Z,W*we,N*me,W,N,0,0,W,N);return{canvas:$.canvas,scaleX:U.scale,scaleY:G.scale,offsetX:m,offsetY:v}}return{canvas:ce.canvas,scaleX:ye.scale,scaleY:le.scale,offsetX:m,offsetY:v}}getSizeAndScale(e,t,i){const r=Math.max(Wf.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*i);return o>=r?o=r:i=o/e,{scale:i,size:o}}clipBbox(e,t,i,r,o){const c=r-t,u=o-i;e.ctx.rect(t,i,c,u),e.current.updateRectMinMax(ht(e.ctx),[t,i,r,o]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const r=e.ctx,o=e.current;switch(t){case eA.COLORED:const c=this.ctx;r.fillStyle=c.fillStyle,r.strokeStyle=c.strokeStyle,o.fillColor=c.fillStyle,o.strokeColor=c.strokeStyle;break;case eA.UNCOLORED:const u=ge.makeHexColor(i[0],i[1],i[2]);r.fillStyle=u,r.strokeStyle=u,o.fillColor=u,o.strokeColor=u;break;default:throw new AS(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,r){let o=i;r!==pn.SHADING&&(o=ge.transform(o,t.baseTransform),this.matrix&&(o=ge.transform(o,this.matrix)));const c=this.createPatternCanvas(t);let u=new DOMMatrix(o);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const d=e.createPattern(c.canvas,"repeat");return d.setTransform(u),d}};Ee(Wf,"MAX_PATTERN_SIZE",3e3);let $m=Wf;function YS({src:f,srcPos:e=0,dest:t,width:i,height:r,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=gn.isLittleEndian?4278190080:255,[d,p]=c?[o,u]:[u,o],m=i>>3,v=i&7,w=f.length;t=new Uint32Array(t.buffer);let A=0;for(let S=0;S<r;S++){for(const P=e+m;e<P;e++){const k=e<w?f[e]:255;t[A++]=k&128?p:d,t[A++]=k&64?p:d,t[A++]=k&32?p:d,t[A++]=k&16?p:d,t[A++]=k&8?p:d,t[A++]=k&4?p:d,t[A++]=k&2?p:d,t[A++]=k&1?p:d}if(v===0)continue;const E=e<w?f[e++]:255;for(let P=0;P<v;P++)t[A++]=E&1<<7-P?p:d}return{srcPos:e,destPos:A}}const tA=16,nA=100,QS=15,iA=10,sA=1e3,Pn=16;function ZS(f,e){if(f._removeMirroring)throw new Error("Context is already forwarding operations.");f.__originalSave=f.save,f.__originalRestore=f.restore,f.__originalRotate=f.rotate,f.__originalScale=f.scale,f.__originalTranslate=f.translate,f.__originalTransform=f.transform,f.__originalSetTransform=f.setTransform,f.__originalResetTransform=f.resetTransform,f.__originalClip=f.clip,f.__originalMoveTo=f.moveTo,f.__originalLineTo=f.lineTo,f.__originalBezierCurveTo=f.bezierCurveTo,f.__originalRect=f.rect,f.__originalClosePath=f.closePath,f.__originalBeginPath=f.beginPath,f._removeMirroring=()=>{f.save=f.__originalSave,f.restore=f.__originalRestore,f.rotate=f.__originalRotate,f.scale=f.__originalScale,f.translate=f.__originalTranslate,f.transform=f.__originalTransform,f.setTransform=f.__originalSetTransform,f.resetTransform=f.__originalResetTransform,f.clip=f.__originalClip,f.moveTo=f.__originalMoveTo,f.lineTo=f.__originalLineTo,f.bezierCurveTo=f.__originalBezierCurveTo,f.rect=f.__originalRect,f.closePath=f.__originalClosePath,f.beginPath=f.__originalBeginPath,delete f._removeMirroring},f.save=function(){e.save(),this.__originalSave()},f.restore=function(){e.restore(),this.__originalRestore()},f.translate=function(i,r){e.translate(i,r),this.__originalTranslate(i,r)},f.scale=function(i,r){e.scale(i,r),this.__originalScale(i,r)},f.transform=function(i,r,o,c,u,d){e.transform(i,r,o,c,u,d),this.__originalTransform(i,r,o,c,u,d)},f.setTransform=function(i,r,o,c,u,d){e.setTransform(i,r,o,c,u,d),this.__originalSetTransform(i,r,o,c,u,d)},f.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},f.rotate=function(i){e.rotate(i),this.__originalRotate(i)},f.clip=function(i){e.clip(i),this.__originalClip(i)},f.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},f.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},f.bezierCurveTo=function(t,i,r,o,c,u){e.bezierCurveTo(t,i,r,o,c,u),this.__originalBezierCurveTo(t,i,r,o,c,u)},f.rect=function(t,i,r,o){e.rect(t,i,r,o),this.__originalRect(t,i,r,o)},f.closePath=function(){e.closePath(),this.__originalClosePath()},f.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class JS{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,i)):(r=this.canvasFactory.create(t,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Yd(f,e,t,i,r,o,c,u,d,p){const[m,v,w,A,S,E]=ht(f);if(v===0&&w===0){const R=c*m+S,F=Math.round(R),D=u*A+E,B=Math.round(D),H=(c+d)*m+S,V=Math.abs(Math.round(H)-F)||1,X=(u+p)*A+E,ee=Math.abs(Math.round(X)-B)||1;return f.setTransform(Math.sign(m),0,0,Math.sign(A),F,B),f.drawImage(e,t,i,r,o,0,0,V,ee),f.setTransform(m,v,w,A,S,E),[V,ee]}if(m===0&&A===0){const R=u*w+S,F=Math.round(R),D=c*v+E,B=Math.round(D),H=(u+p)*w+S,V=Math.abs(Math.round(H)-F)||1,X=(c+d)*v+E,ee=Math.abs(Math.round(X)-B)||1;return f.setTransform(0,Math.sign(v),Math.sign(w),0,F,B),f.drawImage(e,t,i,r,o,0,0,ee,V),f.setTransform(m,v,w,A,S,E),[ee,V]}f.drawImage(e,t,i,r,o,c,u,d,p);const P=Math.hypot(m,v),k=Math.hypot(w,A);return[P*d,k*p]}function eE(f){const{width:e,height:t}=f;if(e>sA||t>sA)return null;const i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=e+1;let c=new Uint8Array(o*(t+1)),u,d,p;const m=e+7&-8;let v=new Uint8Array(m*t),w=0;for(const k of f.data){let R=128;for(;R>0;)v[w++]=k&R?0:255,R>>=1}let A=0;for(w=0,v[w]!==0&&(c[0]=1,++A),d=1;d<e;d++)v[w]!==v[w+1]&&(c[d]=v[w]?2:1,++A),w++;for(v[w]!==0&&(c[d]=2,++A),u=1;u<t;u++){w=u*m,p=u*o,v[w-m]!==v[w]&&(c[p]=v[w]?1:8,++A);let k=(v[w]?4:0)+(v[w-m]?8:0);for(d=1;d<e;d++)k=(k>>2)+(v[w+1]?4:0)+(v[w-m+1]?8:0),r[k]&&(c[p+d]=r[k],++A),w++;if(v[w-m]!==v[w]&&(c[p+d]=v[w]?2:4,++A),A>i)return null}for(w=m*(t-1),p=u*o,v[w]!==0&&(c[p]=8,++A),d=1;d<e;d++)v[w]!==v[w+1]&&(c[p+d]=v[w]?4:8,++A),w++;if(v[w]!==0&&(c[p+d]=4,++A),A>i)return null;const S=new Int32Array([0,o,-1,0,-o,0,0,0,1]),E=new Path2D;for(u=0;A&&u<=t;u++){let k=u*o;const R=k+e;for(;k<R&&!c[k];)k++;if(k===R)continue;E.moveTo(k%o,u);const F=k;let D=c[k];do{const B=S[D];do k+=B;while(!c[k]);const H=c[k];H!==5&&H!==10?(D=H,c[k]=0):(D=H&51*D>>4,c[k]&=D>>2|D<<2),E.lineTo(k%o,k/o|0),c[k]||--A}while(F!==k);--u}return v=null,c=null,function(k){k.save(),k.scale(1/e,-1/t),k.translate(0,-t),k.fill(E),k.beginPath(),k.restore()}}class rA{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=IA,this.textMatrixScale=1,this.fontMatrix=gm,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=en.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=ge.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=ge.applyTransform(t,e),r=ge.applyTransform(t.slice(2),e),o=ge.applyTransform([t[0],t[3]],e),c=ge.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],r[0],o[0],c[0]),this.minY=Math.min(this.minY,i[1],r[1],o[1],c[1]),this.maxX=Math.max(this.maxX,i[0],r[0],o[0],c[0]),this.maxY=Math.max(this.maxY,i[1],r[1],o[1],c[1])}updateScalingPathMinMax(e,t){ge.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,r,o,c,u,d,p,m){const v=ge.bezierBoundingBox(t,i,r,o,c,u,d,p,m);m||this.updateRectMinMax(e,v)}getPathBoundingBox(e=pn.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===pn.STROKE){t||nt("Stroke bounding box must include transform.");const r=ge.singularValueDecompose2dScale(t),o=r[0]*this.lineWidth/2,c=r[1]*this.lineWidth/2;i[0]-=o,i[1]-=c,i[2]+=o,i[3]+=c}return i}updateClipFromPath(){const e=ge.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=pn.FILL,t=null){return ge.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function oA(f,e){if(typeof ImageData<"u"&&e instanceof ImageData){f.putImageData(e,0,0);return}const t=e.height,i=e.width,r=t%Pn,o=(t-r)/Pn,c=r===0?o:o+1,u=f.createImageData(i,Pn);let d=0,p;const m=e.data,v=u.data;let w,A,S,E;if(e.kind===tf.GRAYSCALE_1BPP){const P=m.byteLength,k=new Uint32Array(v.buffer,0,v.byteLength>>2),R=k.length,F=i+7>>3,D=4294967295,B=gn.isLittleEndian?4278190080:255;for(w=0;w<c;w++){for(S=w<o?Pn:r,p=0,A=0;A<S;A++){const H=P-d;let V=0;const X=H>F?i:H*8-7,ee=X&-8;let se=0,ie=0;for(;V<ee;V+=8)ie=m[d++],k[p++]=ie&128?D:B,k[p++]=ie&64?D:B,k[p++]=ie&32?D:B,k[p++]=ie&16?D:B,k[p++]=ie&8?D:B,k[p++]=ie&4?D:B,k[p++]=ie&2?D:B,k[p++]=ie&1?D:B;for(;V<X;V++)se===0&&(ie=m[d++],se=128),k[p++]=ie&se?D:B,se>>=1}for(;p<R;)k[p++]=0;f.putImageData(u,0,w*Pn)}}else if(e.kind===tf.RGBA_32BPP){for(A=0,E=i*Pn*4,w=0;w<o;w++)v.set(m.subarray(d,d+E)),d+=E,f.putImageData(u,0,A),A+=Pn;w<c&&(E=i*r*4,v.set(m.subarray(d,d+E)),f.putImageData(u,0,A))}else if(e.kind===tf.RGB_24BPP)for(S=Pn,E=i*S,w=0;w<c;w++){for(w>=o&&(S=r,E=i*S),p=0,A=E;A--;)v[p++]=m[d++],v[p++]=m[d++],v[p++]=m[d++],v[p++]=255;f.putImageData(u,0,w*Pn)}else throw new Error(`bad image kind: ${e.kind}`)}function aA(f,e){if(e.bitmap){f.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,r=t%Pn,o=(t-r)/Pn,c=r===0?o:o+1,u=f.createImageData(i,Pn);let d=0;const p=e.data,m=u.data;for(let v=0;v<c;v++){const w=v<o?Pn:r;({srcPos:d}=YS({src:p,srcPos:d,dest:m,width:i,height:w,nonBlackColor:0})),f.putImageData(u,0,v*Pn)}}function Yc(f,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)f[i]!==void 0&&(e[i]=f[i]);f.setLineDash!==void 0&&(e.setLineDash(f.getLineDash()),e.lineDashOffset=f.lineDashOffset)}function Qd(f){if(f.strokeStyle=f.fillStyle="#000000",f.fillRule="nonzero",f.globalAlpha=1,f.lineWidth=1,f.lineCap="butt",f.lineJoin="miter",f.miterLimit=10,f.globalCompositeOperation="source-over",f.font="10px sans-serif",f.setLineDash!==void 0&&(f.setLineDash([]),f.lineDashOffset=0),!ln){const{filter:e}=f;e!=="none"&&e!==""&&(f.filter="none")}}function lA(f,e){if(e)return!0;const t=ge.singularValueDecompose2dScale(f);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*qr.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const tE=["butt","round","square"],nE=["miter","round","bevel"],iE={},cA={};var Qr,Vm,Wm;const Zy=class Zy{constructor(e,t,i,r,o,{optionalContentConfig:c,markedContentStack:u=null},d,p){C(this,Qr);this.ctx=e,this.current=new rA(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=r,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new JS(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:r=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,i){const d=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...ht(this.compositeCtx))}this.ctx.save(),Qd(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ht(this.ctx)}executeOperatorList(e,t,i,r){const o=e.argsArray,c=e.fnArray;let u=t||0;const d=o.length;if(d===u)return u;const p=d-u>iA&&typeof i=="function",m=p?Date.now()+QS:0;let v=0;const w=this.commonObjs,A=this.objs;let S;for(;;){if(r!==void 0&&u===r.nextBreakPoint)return r.breakIt(u,i),u;if(S=c[u],S!==vi.dependency)this[S].apply(this,o[u]);else for(const E of o[u]){const P=E.startsWith("g_")?w:A;if(!P.has(E))return P.get(E,i),u}if(u++,u===d)return u;if(p&&++v>iA){if(Date.now()>m)return i(),u;v=0}}}endDrawing(){_(this,Qr,Vm).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),_(this,Qr,Wm).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,r=e.height??e.displayHeight;let o=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),u=i,d=r,p="prescale1",m,v;for(;o>2&&u>1||c>2&&d>1;){let w=u,A=d;o>2&&u>1&&(w=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/w),c>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/A),m=this.cachedCanvases.getCanvas(p,w,A),v=m.context,v.clearRect(0,0,w,A),v.drawImage(e,0,0,u,d,0,0,w,A),e=m.canvas,u=w,d=A,p=p==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:r}=e,o=this.current.fillColor,c=this.current.patternFill,u=ht(t);let d,p,m,v;if((e.bitmap||e.data)&&e.count>1){const X=e.bitmap||e.data.buffer;p=JSON.stringify(c?u:[u.slice(0,4),o]),d=this._cachedBitmapsMap.get(X),d||(d=new Map,this._cachedBitmapsMap.set(X,d));const ee=d.get(p);if(ee&&!c){const se=Math.round(Math.min(u[0],u[2])+u[4]),ie=Math.round(Math.min(u[1],u[3])+u[5]);return{canvas:ee,offsetX:se,offsetY:ie}}m=ee}m||(v=this.cachedCanvases.getCanvas("maskCanvas",i,r),aA(v.context,e));let w=ge.transform(u,[1/i,0,0,-1/r,0,0]);w=ge.transform(w,[1,0,0,1,0,-r]);const[A,S,E,P]=ge.getAxialAlignedBoundingBox([0,0,i,r],w),k=Math.round(E-A)||1,R=Math.round(P-S)||1,F=this.cachedCanvases.getCanvas("fillCanvas",k,R),D=F.context,B=A,H=S;D.translate(-B,-H),D.transform(...w),m||(m=this._scaleImage(v.canvas,ys(D)),m=m.img,d&&c&&d.set(p,m)),D.imageSmoothingEnabled=lA(ht(D),e.interpolate),Yd(D,m,0,0,m.width,m.height,0,0,i,r),D.globalCompositeOperation="source-in";const V=ge.transform(ys(D),[1,0,0,1,-B,-H]);return D.fillStyle=c?o.getPattern(t,this,V,pn.FILL):o,D.fillRect(0,0,i,r),d&&!c&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,F.canvas)),{canvas:F.canvas,offsetX:Math.round(B),offsetY:Math.round(H)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=tE[e]}setLineJoin(e){this.ctx.lineJoin=nE[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const o=this.ctx;o.setTransform(...ht(this.suspendedCtx)),Yc(this.suspendedCtx,o),ZS(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Yc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,r){const o=r[0],c=r[1],u=r[2]-o,d=r[3]-c;u===0||d===0||(this.genericComposeSMask(t.context,i,u,d,t.subtype,t.backdrop,t.transferMap,o,c,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,r,o,c,u,d,p,m,v){let w=e.canvas,A=d-m,S=p-v;if(c){const P=ge.makeHexColor(...c);if(A<0||S<0||A+i>w.width||S+r>w.height){const k=this.cachedCanvases.getCanvas("maskExtension",i,r),R=k.context;R.drawImage(w,-A,-S),R.globalCompositeOperation="destination-atop",R.fillStyle=P,R.fillRect(0,0,i,r),R.globalCompositeOperation="source-over",w=k.canvas,A=S=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const k=new Path2D;k.rect(A,S,i,r),e.clip(k),e.globalCompositeOperation="destination-atop",e.fillStyle=P,e.fillRect(A,S,i,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?t.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(u));const E=new Path2D;E.rect(d,p,i,r),t.clip(E),t.globalCompositeOperation="destination-in",t.drawImage(w,A,S,i,r,d,p,i,r),t.restore()}save(){this.inSMaskMode?(Yc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Yc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,r,o,c){this.ctx.transform(e,t,i,r,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const r=this.ctx,o=this.current;let c=o.x,u=o.y,d,p;const m=ht(r),v=m[0]===0&&m[3]===0||m[1]===0&&m[2]===0,w=v?i.slice(0):null;for(let A=0,S=0,E=e.length;A<E;A++)switch(e[A]|0){case vi.rectangle:c=t[S++],u=t[S++];const P=t[S++],k=t[S++],R=c+P,F=u+k;r.moveTo(c,u),P===0||k===0?r.lineTo(R,F):(r.lineTo(R,u),r.lineTo(R,F),r.lineTo(c,F)),v||o.updateRectMinMax(m,[c,u,R,F]),r.closePath();break;case vi.moveTo:c=t[S++],u=t[S++],r.moveTo(c,u),v||o.updatePathMinMax(m,c,u);break;case vi.lineTo:c=t[S++],u=t[S++],r.lineTo(c,u),v||o.updatePathMinMax(m,c,u);break;case vi.curveTo:d=c,p=u,c=t[S+4],u=t[S+5],r.bezierCurveTo(t[S],t[S+1],t[S+2],t[S+3],c,u),o.updateCurvePathMinMax(m,d,p,t[S],t[S+1],t[S+2],t[S+3],c,u,w),S+=6;break;case vi.curveTo2:d=c,p=u,r.bezierCurveTo(c,u,t[S],t[S+1],t[S+2],t[S+3]),o.updateCurvePathMinMax(m,d,p,c,u,t[S],t[S+1],t[S+2],t[S+3],w),c=t[S+2],u=t[S+3],S+=4;break;case vi.curveTo3:d=c,p=u,c=t[S+2],u=t[S+3],r.bezierCurveTo(t[S],t[S+1],c,u,c,u),o.updateCurvePathMinMax(m,d,p,t[S],t[S+1],c,u,c,u,w),S+=4;break;case vi.closePath:r.closePath();break}v&&o.updateScalingPathMinMax(m,w),o.setCurrentPoint(c,u)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,ys(t),pn.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let o=!1;r&&(t.save(),t.fillStyle=i.getPattern(t,this,ys(t),pn.FILL),o=!0);const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),o&&t.restore(),e&&this.consumePath(c)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=iE}eoClip(){this.pendingClip=cA}beginText(){this.current.textMatrix=IA,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var m;const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||gm,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&Ie("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const o=i.loadedName||"sans-serif",c=((m=i.systemFontInfo)==null?void 0:m.css)||`"${o}", ${i.fallbackName}`;let u="normal";i.black?u="900":i.bold&&(u="bold");const d=i.italic?"italic":"normal";let p=t;t<tA?p=tA:t>nA&&(p=nA),this.current.fontSizeScale=t/p,this.ctx.font=`${d} ${u} ${p}px ${c}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,r,o,c){this.current.textMatrix=[e,t,i,r,o,c],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,r){const o=this.ctx,c=this.current,u=c.font,d=c.textRenderingMode,p=c.fontSize/c.fontSizeScale,m=d&en.FILL_STROKE_MASK,v=!!(d&en.ADD_TO_PATH_FLAG),w=c.patternFill&&!u.missingFile;let A;(u.disableFontFace||v||w)&&(A=u.getPathGenerator(this.commonObjs,e)),u.disableFontFace||w?(o.save(),o.translate(t,i),o.beginPath(),A(o,p),r&&o.setTransform(...r),(m===en.FILL||m===en.FILL_STROKE)&&o.fill(),(m===en.STROKE||m===en.FILL_STROKE)&&o.stroke(),o.restore()):((m===en.FILL||m===en.FILL_STROKE)&&o.fillText(e,t,i),(m===en.STROKE||m===en.FILL_STROKE)&&o.strokeText(e,t,i)),v&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ht(o),x:t,y:i,fontSize:p,addToPath:A})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){i=!0;break}return ze(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const o=this.ctx,c=t.fontSizeScale,u=t.charSpacing,d=t.wordSpacing,p=t.fontDirection,m=t.textHScale*p,v=e.length,w=i.vertical,A=w?1:-1,S=i.defaultVMetrics,E=r*t.fontMatrix[0],P=t.textRenderingMode===en.FILL&&!i.disableFontFace&&!t.patternFill;o.save(),o.transform(...t.textMatrix),o.translate(t.x,t.y+t.textRise),p>0?o.scale(m,-1):o.scale(m,1);let k;if(t.patternFill){o.save();const H=t.fillColor.getPattern(o,this,ys(o),pn.FILL);k=ht(o),o.restore(),o.fillStyle=H}let R=t.lineWidth;const F=t.textMatrixScale;if(F===0||R===0){const H=t.textRenderingMode&en.FILL_STROKE_MASK;(H===en.STROKE||H===en.FILL_STROKE)&&(R=this.getSinglePixelWidth())}else R/=F;if(c!==1&&(o.scale(c,c),R/=c),o.lineWidth=R,i.isInvalidPDFjsFont){const H=[];let V=0;for(const X of e)H.push(X.unicode),V+=X.width;o.fillText(H.join(""),0,0),t.x+=V*E*m,o.restore(),this.compose();return}let D=0,B;for(B=0;B<v;++B){const H=e[B];if(typeof H=="number"){D+=A*H*r/1e3;continue}let V=!1;const X=(H.isSpace?d:0)+u,ee=H.fontChar,se=H.accent;let ie,ye,le=H.width;if(w){const ve=H.vmetric||S,fe=-(H.vmetric?ve[1]:le*.5)*E,Z=ve[2]*E;le=ve?-ve[0]:le,ie=fe/c,ye=(D+Z)/c}else ie=D/c,ye=0;if(i.remeasure&&le>0){const ve=o.measureText(ee).width*1e3/r*c;if(le<ve&&this.isFontSubpixelAAEnabled){const fe=le/ve;V=!0,o.save(),o.scale(fe,1),ie/=fe}else le!==ve&&(ie+=(le-ve)/2e3*r/c)}if(this.contentVisible&&(H.isInFont||i.missingFile)){if(P&&!se)o.fillText(ee,ie,ye);else if(this.paintChar(ee,ie,ye,k),se){const ve=ie+r*se.offset.x/c,fe=ye-r*se.offset.y/c;this.paintChar(se.fontChar,ve,fe,k)}}const ce=w?le*E-X*p:le*E+X*p;D+=ce,V&&o.restore()}w?t.y-=D:t.x+=D*m,o.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,r=i.font,o=i.fontSize,c=i.fontDirection,u=r.vertical?1:-1,d=i.charSpacing,p=i.wordSpacing,m=i.textHScale*c,v=i.fontMatrix||gm,w=e.length,A=i.textRenderingMode===en.INVISIBLE;let S,E,P,k;if(!(A||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(m,c),S=0;S<w;++S){if(E=e[S],typeof E=="number"){k=u*E*o/1e3,this.ctx.translate(k,0),i.x+=k*m;continue}const R=(E.isSpace?p:0)+d,F=r.charProcOperatorList[E.operatorListId];if(!F){Ie(`Type3 character "${E.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=E,this.save(),t.scale(o,o),t.transform(...v),this.executeOperatorList(F),this.restore()),P=ge.applyTransform([E.width,0],v)[0]*o+R,t.translate(P,0),i.x+=P*m}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,r,o,c){this.ctx.rect(i,r,o-i,c-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],r=this.baseTransform||ht(this.ctx),o={createCanvasGraphics:c=>new Zy(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new $m(e,i,this.ctx,o,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=ge.makeHexColor(e,t,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=ge.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=KS(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,ys(t),pn.SHADING);const r=ys(t);if(r){const{width:o,height:c}=t.canvas,[u,d,p,m]=ge.getAxialAlignedBoundingBox([0,0,o,c],r);this.ctx.fillRect(u,d,p-u,m-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){nt("Should not call beginInlineImage")}beginImageData(){nt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=ht(this.ctx),t)){const i=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],i,r),this.current.updateRectMinMax(ht(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||np("TODO: Support non-isolated groups."),e.knockout&&Ie("Knockout groups not supported.");const i=ht(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=ge.getAxialAlignedBoundingBox(e.bbox,ht(t));const o=[0,0,t.canvas.width,t.canvas.height];r=ge.intersect(r,o)||[0,0,0,0];const c=Math.floor(r[0]),u=Math.floor(r[1]),d=Math.max(Math.ceil(r[2])-c,1),p=Math.max(Math.ceil(r[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,p]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(m,d,p),w=v.context;w.translate(-c,-u),w.transform(...i),e.smask?this.smaskStack.push({canvas:v.canvas,context:w,offsetX:c,offsetY:u,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(c,u),t.save()),Yc(t,w),this.ctx=w,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=ht(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const o=ge.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,i,r,o){if(_(this,Qr,Vm).call(this),Qd(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const c=t[2]-t[0],u=t[3]-t[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=c,t[3]=u;const[d,p]=ge.singularValueDecompose2dScale(ht(this.ctx)),{viewportScale:m}=this,v=Math.ceil(c*this.outputScaleX*m),w=Math.ceil(u*this.outputScaleY*m);this.annotationCanvas=this.canvasFactory.create(v,w);const{canvas:A,context:S}=this.annotationCanvas;this.annotationCanvasMap.set(e,A),this.annotationCanvas.savedCtx=this.ctx,this.ctx=S,this.ctx.save(),this.ctx.setTransform(d,0,0,-p,0,u*p),Qd(this.ctx)}else Qd(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],c,u),this.ctx.clip(),this.ctx.beginPath()}this.current=new rA(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),_(this,Qr,Wm).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=eE(e)),r.compiled)){r.compiled(i);return}const o=this._createMaskCanvas(e),c=o.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(c,o.offsetX,o.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,r=0,o,c){if(!this.contentVisible)return;e=this.getObject(e.data,e);const u=this.ctx;u.save();const d=ht(u);u.transform(t,i,r,o,0,0);const p=this._createMaskCanvas(e);u.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]);for(let m=0,v=c.length;m<v;m+=2){const w=ge.transform(d,[t,i,r,o,c[m],c[m+1]]),[A,S]=ge.applyTransform([0,0],w);u.drawImage(p.canvas,A,S)}u.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const o of e){const{data:c,width:u,height:d,transform:p}=o,m=this.cachedCanvases.getCanvas("maskCanvas",u,d),v=m.context;v.save();const w=this.getObject(c,o);aA(v,w),v.globalCompositeOperation="source-in",v.fillStyle=r?i.getPattern(v,this,ys(t),pn.FILL):i,v.fillRect(0,0,u,d),v.restore(),t.save(),t.transform(...p),t.scale(1,-1),Yd(t,m.canvas,0,0,u,d,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Ie("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,r){if(!this.contentVisible)return;const o=this.getObject(e);if(!o){Ie("Dependent image isn't ready yet");return}const c=o.width,u=o.height,d=[];for(let p=0,m=r.length;p<m;p+=2)d.push({transform:[t,0,0,i,r[p],r[p+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(o,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:r}=e,o=this.cachedCanvases.getCanvas("inlineImage",i,r),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(t,0,0),c.filter="none",o.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,r=this.ctx;if(this.save(),!ln){const{filter:u}=r;u!=="none"&&u!==""&&(r.filter="none")}r.scale(1/t,-1/i);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",t,i).context;oA(d,e),o=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(o,ys(r));r.imageSmoothingEnabled=lA(ht(r),e.interpolate),Yd(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const o=e.width,c=e.height,d=this.cachedCanvases.getCanvas("inlineImage",o,c).context;oA(d,e),r=this.applyTransferMapsToCanvas(d)}for(const o of t)i.save(),i.transform(...o.transform),i.scale(1,-1),Yd(i,r,o.x,o.y,o.w,o.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===cA?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ht(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:r,d:o}=this.ctx.getTransform();let c,u;if(i===0&&r===0){const d=Math.abs(t),p=Math.abs(o);if(d===p)if(e===0)c=u=1/d;else{const m=d*e;c=u=m<1?1/m:1}else if(e===0)c=1/d,u=1/p;else{const m=d*e,v=p*e;c=m<1?1/m:1,u=v<1?1/v:1}}else{const d=Math.abs(t*o-i*r),p=Math.hypot(t,i),m=Math.hypot(r,o);if(e===0)c=m/d,u=p/d;else{const v=e*d;c=m>v?m/v:1,u=p>v?p/v:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[r,o]=this.getScaleForStroking();if(t.lineWidth=i||1,r===1&&o===1){t.stroke();return}const c=t.getLineDash();if(e&&t.save(),t.scale(r,o),c.length>0){const u=Math.max(r,o);t.setLineDash(c.map(d=>d/u)),t.lineDashOffset/=u}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Qr=new WeakSet,Vm=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Wm=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let ol=Zy;for(const f in vi)ol.prototype[f]!==void 0&&(ol.prototype[vi[f]]=ol.prototype[f]);var zu,Hu;class Ws{static get workerPort(){return l(this,zu)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");b(this,zu,e)}static get workerSrc(){return l(this,Hu)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");b(this,Hu,e)}}zu=new WeakMap,Hu=new WeakMap,C(Ws,zu,null),C(Ws,Hu,"");const Zd={DATA:1,ERROR:2},bt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Fn(f){switch(f instanceof Error||typeof f=="object"&&f!==null||nt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),f.name){case"AbortException":return new Ea(f.message);case"MissingPDFException":return new Sa(f.message);case"PasswordException":return new mm(f.message,f.code);case"UnexpectedResponseException":return new ip(f.message,f.status);case"UnknownErrorException":return new ym(f.message,f.details);default:return new ym(f.message,f.toString())}}var Sl,ai,yb,vb,wb,uf;class ru{constructor(e,t,i){C(this,ai);C(this,Sl,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",_(this,ai,yb).bind(this),{signal:l(this,Sl).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const r=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(c){o.reject(c)}return o.promise}sendWithStream(e,t,i,r){const o=this.streamId++,c=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:p=>{const m=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:u,action:e,streamId:o,data:t,desiredSize:p.desiredSize},r),m.promise},pull:p=>{const m=Promise.withResolvers();return this.streamControllers[o].pullCall=m,d.postMessage({sourceName:c,targetName:u,stream:bt.PULL,streamId:o,desiredSize:p.desiredSize}),m.promise},cancel:p=>{Mt(p instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[o].cancelCall=m,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:c,targetName:u,stream:bt.CANCEL,streamId:o,reason:Fn(p)}),m.promise}},i)}destroy(){var e;(e=l(this,Sl))==null||e.abort(),b(this,Sl,null)}}Sl=new WeakMap,ai=new WeakSet,yb=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){_(this,ai,wb).call(this,e);return}if(e.callback){const i=e.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Zd.DATA)r.resolve(e.data);else if(e.callback===Zd.ERROR)r.reject(Fn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,r=e.sourceName,o=this.comObj;new Promise(function(c){c(t(e.data))}).then(function(c){o.postMessage({sourceName:i,targetName:r,callback:Zd.DATA,callbackId:e.callbackId,data:c})},function(c){o.postMessage({sourceName:i,targetName:r,callback:Zd.ERROR,callbackId:e.callbackId,reason:Fn(c)})});return}if(e.streamId){_(this,ai,vb).call(this,e);return}t(e.data)},vb=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,o=this.comObj,c=this,u=this.actionHandler[e.action],d={enqueue(p,m=1,v){if(this.isCancelled)return;const w=this.desiredSize;this.desiredSize-=m,w>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:r,stream:bt.ENQUEUE,streamId:t,chunk:p},v)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:r,stream:bt.CLOSE,streamId:t}),delete c.streamSinks[t])},error(p){Mt(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:r,stream:bt.ERROR,streamId:t,reason:Fn(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,new Promise(function(p){p(u(e.data,d))}).then(function(){o.postMessage({sourceName:i,targetName:r,stream:bt.START_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:i,targetName:r,stream:bt.START_COMPLETE,streamId:t,reason:Fn(p)})})},wb=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,o=this.comObj,c=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case bt.START_COMPLETE:e.success?c.startCall.resolve():c.startCall.reject(Fn(e.reason));break;case bt.PULL_COMPLETE:e.success?c.pullCall.resolve():c.pullCall.reject(Fn(e.reason));break;case bt.PULL:if(!u){o.postMessage({sourceName:i,targetName:r,stream:bt.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,new Promise(function(d){var p;d((p=u.onPull)==null?void 0:p.call(u))}).then(function(){o.postMessage({sourceName:i,targetName:r,stream:bt.PULL_COMPLETE,streamId:t,success:!0})},function(d){o.postMessage({sourceName:i,targetName:r,stream:bt.PULL_COMPLETE,streamId:t,reason:Fn(d)})});break;case bt.ENQUEUE:if(Mt(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(e.chunk);break;case bt.CLOSE:if(Mt(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),_(this,ai,uf).call(this,c,t);break;case bt.ERROR:Mt(c,"error should have stream controller"),c.controller.error(Fn(e.reason)),_(this,ai,uf).call(this,c,t);break;case bt.CANCEL_COMPLETE:e.success?c.cancelCall.resolve():c.cancelCall.reject(Fn(e.reason)),_(this,ai,uf).call(this,c,t);break;case bt.CANCEL:if(!u)break;new Promise(function(d){var p;d((p=u.onCancel)==null?void 0:p.call(u,Fn(e.reason)))}).then(function(){o.postMessage({sourceName:i,targetName:r,stream:bt.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){o.postMessage({sourceName:i,targetName:r,stream:bt.CANCEL_COMPLETE,streamId:t,reason:Fn(d)})}),u.sinkCapability.reject(Fn(e.reason)),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},uf=async function(e,t){var i,r,o;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(r=e.pullCall)==null?void 0:r.promise,(o=e.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[t]};var Bo,Bu;class sE{constructor({parsedData:e,rawData:t}){C(this,Bo);C(this,Bu);b(this,Bo,e),b(this,Bu,t)}getRaw(){return l(this,Bu)}get(e){return l(this,Bo).get(e)??null}getAll(){return Oy(l(this,Bo))}has(e){return l(this,Bo).has(e)}}Bo=new WeakMap,Bu=new WeakMap;const tl=Symbol("INTERNAL");var Uu,$u,Vu,El;class rE{constructor(e,{name:t,intent:i,usage:r,rbGroups:o}){C(this,Uu,!1);C(this,$u,!1);C(this,Vu,!1);C(this,El,!0);b(this,Uu,!!(e&Vn.DISPLAY)),b(this,$u,!!(e&Vn.PRINT)),this.name=t,this.intent=i,this.usage=r,this.rbGroups=o}get visible(){if(l(this,Vu))return l(this,El);if(!l(this,El))return!1;const{print:e,view:t}=this.usage;return l(this,Uu)?(t==null?void 0:t.viewState)!=="OFF":l(this,$u)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==tl&&nt("Internal method `_setVisible` called."),b(this,Vu,i),b(this,El,t)}}Uu=new WeakMap,$u=new WeakMap,Vu=new WeakMap,El=new WeakMap;var Mr,Xe,Cl,kl,Wu,Gm;class oE{constructor(e,t=Vn.DISPLAY){C(this,Wu);C(this,Mr,null);C(this,Xe,new Map);C(this,Cl,null);C(this,kl,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,b(this,kl,e.order);for(const i of e.groups)l(this,Xe).set(i.id,new rE(t,i));if(e.baseState==="OFF")for(const i of l(this,Xe).values())i._setVisible(tl,!1);for(const i of e.on)l(this,Xe).get(i)._setVisible(tl,!0);for(const i of e.off)l(this,Xe).get(i)._setVisible(tl,!1);b(this,Cl,this.getHash())}}isVisible(e){if(l(this,Xe).size===0)return!0;if(!e)return np("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,Xe).has(e.id)?l(this,Xe).get(e.id).visible:(Ie(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return _(this,Wu,Gm).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,Xe).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(l(this,Xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,Xe).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(!l(this,Xe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,Xe).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(!l(this,Xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,Xe).has(t))return Ie(`Optional content group not found: ${t}`),!0;if(l(this,Xe).get(t).visible)return!1}return!0}return Ie(`Unknown optional content policy ${e.policy}.`),!0}return Ie(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var o;const r=l(this,Xe).get(e);if(!r){Ie(`Optional content group not found: ${e}`);return}if(i&&t&&r.rbGroups.length)for(const c of r.rbGroups)for(const u of c)u!==e&&((o=l(this,Xe).get(u))==null||o._setVisible(tl,!1,!0));r._setVisible(tl,!!t,!0),b(this,Mr,null)}setOCGState({state:e,preserveRB:t}){let i;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const o=l(this,Xe).get(r);if(o)switch(i){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!o.visible,t);break}}b(this,Mr,null)}get hasInitialVisibility(){return l(this,Cl)===null||this.getHash()===l(this,Cl)}getOrder(){return l(this,Xe).size?l(this,kl)?l(this,kl).slice():[...l(this,Xe).keys()]:null}getGroups(){return l(this,Xe).size>0?Oy(l(this,Xe)):null}getGroup(e){return l(this,Xe).get(e)||null}getHash(){if(l(this,Mr)!==null)return l(this,Mr);const e=new ob;for(const[t,i]of l(this,Xe))e.update(`${t}:${i.visible}`);return b(this,Mr,e.hexdigest())}}Mr=new WeakMap,Xe=new WeakMap,Cl=new WeakMap,kl=new WeakMap,Wu=new WeakSet,Gm=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let r=1;r<t;r++){const o=e[r];let c;if(Array.isArray(o))c=_(this,Wu,Gm).call(this,o);else if(l(this,Xe).has(o))c=l(this,Xe).get(o).visible;else return Ie(`Optional content group not found: ${o}`),!0;switch(i){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return i==="And"};class aE{constructor(e,{disableRange:t=!1,disableStream:i=!1}){Mt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:o,progressiveDone:c,contentDispositionFilename:u}=e;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,(o==null?void 0:o.length)>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,p)=>{this._onReceiveData({begin:d,chunk:p})}),e.addProgressListener((d,p)=>{this._onProgress({loaded:d,total:p})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(i),!0)});Mt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,r,o;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(o=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||o.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Mt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new lE(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new cE(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class lE{constructor(e,t,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=Hy(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class cE{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function uE(f){let e=!0,t=i("filename\\*","i").exec(f);if(t){t=t[1];let m=u(t);return m=unescape(m),m=d(m),m=p(m),o(m)}if(t=c(f),t){const m=p(t);return o(m)}if(t=i("filename","i").exec(f),t){t=t[1];let m=u(t);return m=p(m),o(m)}function i(m,v){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',v)}function r(m,v){if(m){if(!/^[\x00-\xFF]+$/.test(v))return v;try{const w=new TextDecoder(m,{fatal:!0}),A=sp(v);v=w.decode(A),e=!1}catch{}}return v}function o(m){return e&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),e&&(m=r("iso-8859-1",m))),m}function c(m){const v=[];let w;const A=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(w=A.exec(m))!==null;){let[,E,P,k]=w;if(E=parseInt(E,10),E in v){if(E===0)break;continue}v[E]=[P,k]}const S=[];for(let E=0;E<v.length&&E in v;++E){let[P,k]=v[E];k=u(k),P&&(k=unescape(k),E===0&&(k=d(k))),S.push(k)}return S.join("")}function u(m){if(m.startsWith('"')){const v=m.slice(1).split('\\"');for(let w=0;w<v.length;++w){const A=v[w].indexOf('"');A!==-1&&(v[w]=v[w].slice(0,A),v.length=w+1),v[w]=v[w].replaceAll(/\\(.)/g,"$1")}m=v.join('"')}return m}function d(m){const v=m.indexOf("'");if(v===-1)return m;const w=m.slice(0,v),S=m.slice(v+1).replace(/^[^']*'/,"");return r(w,S)}function p(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(v,w,A,S){if(A==="q"||A==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,P){return String.fromCharCode(parseInt(P,16))}),r(w,S);try{S=atob(S)}catch{}return r(w,S)})}return""}function Wy(f,e){const t=new Headers;if(!f||!e||typeof e!="object")return t;for(const i in e){const r=e[i];r!==void 0&&t.append(i,r)}return t}function Gy({responseHeaders:f,isHttp:e,rangeChunkSize:t,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(f.get("Content-Length"),10);return!Number.isInteger(o)||(r.suggestedLength=o,o<=2*t)||i||!e||f.get("Accept-Ranges")!=="bytes"||(f.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Xy(f){const e=f.get("Content-Disposition");if(e){let t=uE(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Hy(t))return t}return null}function ap(f,e){return f===404||f===0&&e.startsWith("file:")?new Sa('Missing PDF "'+e+'".'):new ip(`Unexpected server response (${f}) while retrieving PDF "${e}".`,f)}function Ab(f){return f===200||f===206}function bb(f,e,t){return{method:"GET",headers:f,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function xb(f){return f instanceof Uint8Array?f.buffer:f instanceof ArrayBuffer?f:(Ie(`getArrayBuffer - unexpected data format: ${f}`),new Uint8Array(f).buffer)}class uA{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Wy(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Mt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new hE(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new dE(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class hE{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),r=t.url;fetch(r,bb(i,this._withCredentials,this._abortController)).then(o=>{if(!Ab(o.status))throw ap(o.status,r);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:u,suggestedLength:d}=Gy({responseHeaders:c,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=Xy(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ea("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:xb(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class dE{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const o=new Headers(e.headers);o.append("Range",`bytes=${t}-${i-1}`);const c=r.url;fetch(c,bb(o,this._withCredentials,this._abortController)).then(u=>{if(!Ab(u.status))throw ap(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:xb(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const hm=200,dm=206;function fE(f){const e=f.response;return typeof e!="string"?e:sp(e).buffer}class pE{constructor({url:e,httpHeaders:t,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=Wy(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const r={begin:e,end:t};for(const o in i)r[o]=i[o];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[o,c]of this.headers)t.setRequestHeader(o,c);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=dm):r.expectedStatus=hm,t.responseType="arraybuffer",e.onError&&(t.onerror=function(o){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var r;const i=this.pendingRequests[e];i&&((r=i.onProgress)==null||r.call(i,t))}onStateChange(e,t){var d,p,m;const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){(d=i.onError)==null||d.call(i,r.status);return}const o=r.status||hm;if(!(o===hm&&i.expectedStatus===dm)&&o!==i.expectedStatus){(p=i.onError)==null||p.call(i,r.status);return}const u=fE(r);if(o===dm){const v=r.getResponseHeader("Content-Range"),w=/bytes (\d+)-(\d+)\/(\d+)/.exec(v);i.onDone({begin:parseInt(w[1],10),chunk:u})}else u?i.onDone({begin:0,chunk:u}):(m=i.onError)==null||m.call(i,r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class gE{constructor(e){this._source=e,this._manager=new pE(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Mt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new mE(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new yE(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class mE{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(c=>{const[u,...d]=c.split(": ");return[u,d.join(": ")]})),{allowRangeRequests:r,suggestedLength:o}=Gy({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=Xy(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=ap(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class yE{constructor(e,t,i){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=ap(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const vE=/^[a-z][a-z0-9\-+.]+:/i;function wE(f){if(vE.test(f))return new URL(f);const e=Kr.get("url");return new URL(e.pathToFileURL(f))}function _b(f,e,t){return f.protocol==="http:"?Kr.get("http").request(f,{headers:e},t):Kr.get("https").request(f,{headers:e},t)}class AE{constructor(e){this.source=e,this.url=wE(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=Wy(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Mt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new _E(this):new bE(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new SE(this,e,t):new xE(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class Sb{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ea("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Eb{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class bE extends Sb{constructor(e){super(e);const t=Object.fromEntries(e.headers),i=r=>{if(r.statusCode===404){const d=new Sa(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(r);const o=new Headers(this._readableStream.headers),{allowRangeRequests:c,suggestedLength:u}=Gy({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=u||this._contentLength,this._filename=Xy(o)};this._request=_b(this._url,t,i),this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class xE extends Eb{constructor(e,t,i){super(e);const r=Object.fromEntries(e.headers);r.Range=`bytes=${t}-${i-1}`;const o=c=>{if(c.statusCode===404){const u=new Sa(`Missing PDF "${this._url}".`);this._storedError=u;return}this._setReadableStream(c)};this._request=_b(this._url,r,o),this._request.on("error",c=>{this._storedError=c}),this._request.end()}}class _E extends Sb{constructor(e){super(e);const t=Kr.get("fs");t.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new Sa(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class SE extends Eb{constructor(e,t,i){super(e);const r=Kr.get("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:i-1}))}}const EE=1e5,Sn=30,CE=.8;var RA,Ir,kn,Gu,Xu,Uo,ks,qu,Ku,$o,Tl,Pl,Nr,Rl,Yu,Ll,Vo,Qu,Zu,pt,Wo,Go,Ju,Fr,Ml,Ks,Cb,kb,qm,Gn,hf,Km,Tb,Pb;let Xm=(pt=class{constructor({textContentSource:e,container:t,viewport:i}){C(this,Ks);C(this,Ir,Promise.withResolvers());C(this,kn,null);C(this,Gu,!1);C(this,Xu,!!((RA=globalThis.FontInspector)!=null&&RA.enabled));C(this,Uo,null);C(this,ks,null);C(this,qu,0);C(this,Ku,0);C(this,$o,null);C(this,Tl,null);C(this,Pl,0);C(this,Nr,0);C(this,Rl,Object.create(null));C(this,Yu,[]);C(this,Ll,null);C(this,Vo,[]);C(this,Qu,new WeakMap);C(this,Zu,null);var d;if(e instanceof ReadableStream)b(this,Ll,e);else if(typeof e=="object")b(this,Ll,new ReadableStream({start(p){p.enqueue(e),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,kn,b(this,Tl,t)),b(this,Nr,i.scale*(globalThis.devicePixelRatio||1)),b(this,Pl,i.rotation),b(this,ks,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:o,pageX:c,pageY:u}=i.rawDims;b(this,Zu,[1,0,0,-1,-c,u+o]),b(this,Ku,r),b(this,qu,o),_(d=pt,Gn,Tb).call(d),va(t,i),l(this,Ir).promise.finally(()=>{l(pt,Ml).delete(this),b(this,ks,null),b(this,Rl,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=gn.platform;return ze(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,$o).read().then(({value:t,done:i})=>{if(i){l(this,Ir).resolve();return}l(this,Uo)??b(this,Uo,t.lang),Object.assign(l(this,Rl),t.styles),_(this,Ks,Cb).call(this,t.items),e()},l(this,Ir).reject)};return b(this,$o,l(this,Ll).getReader()),l(pt,Ml).add(this),e(),l(this,Ir).promise}update({viewport:e,onBefore:t=null}){var o;const i=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==l(this,Pl)&&(t==null||t(),b(this,Pl,r),va(l(this,Tl),{rotation:r})),i!==l(this,Nr)){t==null||t(),b(this,Nr,i);const c={div:null,properties:null,ctx:_(o=pt,Gn,hf).call(o,l(this,Uo))};for(const u of l(this,Vo))c.properties=l(this,Qu).get(u),c.div=u,_(this,Ks,qm).call(this,c)}}cancel(){var t;const e=new Ea("TextLayer task cancelled.");(t=l(this,$o))==null||t.cancel(e).catch(()=>{}),b(this,$o,null),l(this,Ir).reject(e)}get textDivs(){return l(this,Vo)}get textContentItemsStr(){return l(this,Yu)}static cleanup(){if(!(l(this,Ml).size>0)){l(this,Wo).clear();for(const{canvas:e}of l(this,Go).values())e.remove();l(this,Go).clear()}}},Ir=new WeakMap,kn=new WeakMap,Gu=new WeakMap,Xu=new WeakMap,Uo=new WeakMap,ks=new WeakMap,qu=new WeakMap,Ku=new WeakMap,$o=new WeakMap,Tl=new WeakMap,Pl=new WeakMap,Nr=new WeakMap,Rl=new WeakMap,Yu=new WeakMap,Ll=new WeakMap,Vo=new WeakMap,Qu=new WeakMap,Zu=new WeakMap,Wo=new WeakMap,Go=new WeakMap,Ju=new WeakMap,Fr=new WeakMap,Ml=new WeakMap,Ks=new WeakSet,Cb=function(e){var r,o;if(l(this,Gu))return;(o=l(this,ks)).ctx??(o.ctx=_(r=pt,Gn,hf).call(r,l(this,Uo)));const t=l(this,Vo),i=l(this,Yu);for(const c of e){if(t.length>EE){Ie("Ignoring additional textDivs for performance reasons."),b(this,Gu,!0);return}if(c.str===void 0){if(c.type==="beginMarkedContentProps"||c.type==="beginMarkedContent"){const u=l(this,kn);b(this,kn,document.createElement("span")),l(this,kn).classList.add("markedContent"),c.id!==null&&l(this,kn).setAttribute("id",`${c.id}`),u.append(l(this,kn))}else c.type==="endMarkedContent"&&b(this,kn,l(this,kn).parentNode);continue}i.push(c.str),_(this,Ks,kb).call(this,c)}},kb=function(e){var E;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,Vo).push(t);const r=ge.transform(l(this,Zu),e.transform);let o=Math.atan2(r[1],r[0]);const c=l(this,Rl)[e.fontName];c.vertical&&(o+=Math.PI/2);let u=l(this,Xu)&&c.fontSubstitution||c.fontFamily;u=pt.fontFamilyMap.get(u)||u;const d=Math.hypot(r[2],r[3]),p=d*_(E=pt,Gn,Pb).call(E,u,l(this,Uo));let m,v;o===0?(m=r[4],v=r[5]-p):(m=r[4]+p*Math.sin(o),v=r[5]-p*Math.cos(o));const w="calc(var(--scale-factor)*",A=t.style;l(this,kn)===l(this,Tl)?(A.left=`${(100*m/l(this,Ku)).toFixed(2)}%`,A.top=`${(100*v/l(this,qu)).toFixed(2)}%`):(A.left=`${w}${m.toFixed(2)}px)`,A.top=`${w}${v.toFixed(2)}px)`),A.fontSize=`${w}${(l(pt,Fr)*d).toFixed(2)}px)`,A.fontFamily=u,i.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,Xu)&&(t.dataset.fontName=c.fontSubstitutionLoadedName||e.fontName),o!==0&&(i.angle=o*(180/Math.PI));let S=!1;if(e.str.length>1)S=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const P=Math.abs(e.transform[0]),k=Math.abs(e.transform[3]);P!==k&&Math.max(P,k)/Math.min(P,k)>1.5&&(S=!0)}if(S&&(i.canvasWidth=c.vertical?e.height:e.width),l(this,Qu).set(t,i),l(this,ks).div=t,l(this,ks).properties=i,_(this,Ks,qm).call(this,l(this,ks)),i.hasText&&l(this,kn).append(t),i.hasEOL){const P=document.createElement("br");P.setAttribute("role","presentation"),l(this,kn).append(P)}},qm=function(e){var u;const{div:t,properties:i,ctx:r}=e,{style:o}=t;let c="";if(l(pt,Fr)>1&&(c=`scale(${1/l(pt,Fr)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:d}=o,{canvasWidth:p,fontSize:m}=i;_(u=pt,Gn,Km).call(u,r,m*l(this,Nr),d);const{width:v}=r.measureText(t.textContent);v>0&&(c=`scaleX(${p*l(this,Nr)/v}) ${c}`)}i.angle!==0&&(c=`rotate(${i.angle}deg) ${c}`),c.length>0&&(o.transform=c)},Gn=new WeakSet,hf=function(e=null){let t=l(this,Go).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Go).set(e,t),l(this,Ju).set(t,{size:0,family:""})}return t},Km=function(e,t,i){const r=l(this,Ju).get(e);t===r.size&&i===r.family||(e.font=`${t}px ${i}`,r.size=t,r.family=i)},Tb=function(){if(l(this,Fr)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),b(this,Fr,e.getBoundingClientRect().height),e.remove()},Pb=function(e,t){const i=l(this,Wo).get(e);if(i)return i;const r=_(this,Gn,hf).call(this,t);r.canvas.width=r.canvas.height=Sn,_(this,Gn,Km).call(this,r,Sn,e);const o=r.measureText("");let c=o.fontBoundingBoxAscent,u=Math.abs(o.fontBoundingBoxDescent);if(c){const m=c/(c+u);return l(this,Wo).set(e,m),r.canvas.width=r.canvas.height=0,m}r.strokeStyle="red",r.clearRect(0,0,Sn,Sn),r.strokeText("g",0,0);let d=r.getImageData(0,0,Sn,Sn).data;u=0;for(let m=d.length-1-3;m>=0;m-=4)if(d[m]>0){u=Math.ceil(m/4/Sn);break}r.clearRect(0,0,Sn,Sn),r.strokeText("A",0,Sn),d=r.getImageData(0,0,Sn,Sn).data,c=0;for(let m=0,v=d.length;m<v;m+=4)if(d[m]>0){c=Sn-Math.floor(m/4/Sn);break}r.canvas.width=r.canvas.height=0;const p=c?c/(c+u):CE;return l(this,Wo).set(e,p),p},C(pt,Gn),C(pt,Wo,new Map),C(pt,Go,new Map),C(pt,Ju,new WeakMap),C(pt,Fr,null),C(pt,Ml,new Set),pt);class yu{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function r(o){var d;if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(yu.shouldBuildText(u))(d=o==null?void 0:o.attributes)!=null&&d.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&t.push({str:c}),!!o.children)for(const p of o.children)r(p)}return r(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const kE=65536,TE=100,PE=5e3,RE=ln?US:zS,LE=ln?$S:hb,ME=ln?BS:HS,IE=ln?VS:gb;function NE(f={}){typeof f=="string"||f instanceof URL?f={url:f}:(f instanceof ArrayBuffer||ArrayBuffer.isView(f))&&(f={data:f});const e=new Ym,{docId:t}=e,i=f.url?FE(f.url):null,r=f.data?DE(f.data):null,o=f.httpHeaders||null,c=f.withCredentials===!0,u=f.password??null,d=f.range instanceof Rb?f.range:null,p=Number.isInteger(f.rangeChunkSize)&&f.rangeChunkSize>0?f.rangeChunkSize:kE;let m=f.worker instanceof al?f.worker:null;const v=f.verbosity,w=typeof f.docBaseUrl=="string"&&!op(f.docBaseUrl)?f.docBaseUrl:null,A=typeof f.cMapUrl=="string"?f.cMapUrl:null,S=f.cMapPacked!==!1,E=f.CMapReaderFactory||LE,P=typeof f.standardFontDataUrl=="string"?f.standardFontDataUrl:null,k=f.StandardFontDataFactory||IE,R=f.stopAtErrors!==!0,F=Number.isInteger(f.maxImageSize)&&f.maxImageSize>-1?f.maxImageSize:-1,D=f.isEvalSupported!==!1,B=typeof f.isOffscreenCanvasSupported=="boolean"?f.isOffscreenCanvasSupported:!ln,H=typeof f.isChrome=="boolean"?f.isChrome:!gn.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),V=Number.isInteger(f.canvasMaxAreaInBytes)?f.canvasMaxAreaInBytes:-1,X=typeof f.disableFontFace=="boolean"?f.disableFontFace:ln,ee=f.fontExtraProperties===!0,se=f.enableXfa===!0,ie=f.ownerDocument||globalThis.document,ye=f.disableRange===!0,le=f.disableStream===!0,ce=f.disableAutoFetch===!0,ve=f.pdfBug===!0,fe=f.CanvasFactory||RE,Z=f.FilterFactory||ME,U=f.enableHWA===!0,G=d?d.length:f.length??NaN,W=typeof f.useSystemFonts=="boolean"?f.useSystemFonts:!ln&&!X,N=typeof f.useWorkerFetch=="boolean"?f.useWorkerFetch:E===hb&&k===gb&&A&&P&&Zc(A,document.baseURI)&&Zc(P,document.baseURI);f.canvasFactory&&Zw("`canvasFactory`-instance option, please use `CanvasFactory` instead."),f.filterFactory&&Zw("`filterFactory`-instance option, please use `FilterFactory` instead.");const $=null;mS(v);const ue={canvasFactory:new fe({ownerDocument:ie,enableHWA:U}),filterFactory:new Z({docId:t,ownerDocument:ie}),cMapReaderFactory:N?null:new E({baseUrl:A,isCompressed:S}),standardFontDataFactory:N?null:new k({baseUrl:P})};if(!m){const we={verbosity:v,port:Ws.workerPort};m=we.port?al.fromPort(we):new al(we),e._worker=m}const be={docId:t,apiVersion:"4.8.69",data:r,password:u,disableAutoFetch:ce,rangeChunkSize:p,length:G,docBaseUrl:w,enableXfa:se,evaluatorOptions:{maxImageSize:F,disableFontFace:X,ignoreErrors:R,isEvalSupported:D,isOffscreenCanvasSupported:B,isChrome:H,canvasMaxAreaInBytes:V,fontExtraProperties:ee,useSystemFonts:W,cMapUrl:N?A:null,standardFontDataUrl:N?P:null}},ke={disableFontFace:X,fontExtraProperties:ee,ownerDocument:ie,pdfBug:ve,styleElement:$,loadingParams:{disableAutoFetch:ce,enableXfa:se}};return m.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const we=m.messageHandler.sendWithPromise("GetDocRequest",be,r?[r.buffer]:null);let me;if(d)me=new aE(d,{disableRange:ye,disableStream:le});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Le;ln?Le=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Zc(i)?uA:AE:Le=Zc(i)?uA:gE,me=new Le({url:i,length:G,httpHeaders:o,withCredentials:c,rangeChunkSize:p,disableRange:ye,disableStream:le})}return we.then(Le=>{if(e.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Oe=new ru(t,Le,m.port),Ne=new HE(Oe,e,me,ke,ue);e._transport=Ne,Oe.send("Ready",null)})}).catch(e._capability.reject),e}function FE(f){if(f instanceof URL)return f.href;try{return new URL(f,window.location).href}catch{if(ln&&typeof f=="string")return f}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function DE(f){if(ln&&typeof Buffer<"u"&&f instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength)return f;if(typeof f=="string")return sp(f);if(f instanceof ArrayBuffer||ArrayBuffer.isView(f)||typeof f=="object"&&!isNaN(f==null?void 0:f.length))return new Uint8Array(f);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function hA(f){return typeof f=="object"&&Number.isInteger(f==null?void 0:f.num)&&f.num>=0&&Number.isInteger(f==null?void 0:f.gen)&&f.gen>=0}var Gf;const Xf=class Xf{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${hn(Xf,Gf)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Gf=new WeakMap,C(Xf,Gf,0);let Ym=Xf,Rb=class{constructor(e,t,i=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){nt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class OE{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ze(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Dr,Ts,ri,nl,df;class jE{constructor(e,t,i,r=!1){C(this,ri);C(this,Dr,null);C(this,Ts,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=r?new Qw:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new Lb,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:o=!1}={}){return new Ih({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ze(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:r=Ar.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:v=!1}){var D,B;(D=this._stats)==null||D.time("Overall");const w=this._transport.getRenderingIntent(i,r,m,v),{renderingIntent:A,cacheKey:S}=w;b(this,Ts,!1),_(this,ri,df).call(this),u||(u=this._transport.getOptionalContentConfig(A));let E=this._intentStates.get(S);E||(E=Object.create(null),this._intentStates.set(S,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const P=!!(A&Vn.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(B=this._stats)==null||B.time("Page Request"),this._pumpOperatorList(w));const k=H=>{var V;E.renderTasks.delete(R),(this._maybeCleanupAfterRender||P)&&b(this,Ts,!0),_(this,ri,nl).call(this,!P),H?(R.capability.reject(H),this._abortOperatorList({intentState:E,reason:H instanceof Error?H:new Error(H)})):R.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(V=globalThis.Stats)!=null&&V.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},R=new Zm({callback:k,params:{canvasContext:e,viewport:t,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!P,pdfBug:this._pdfBug,pageColors:p});(E.renderTasks||(E.renderTasks=new Set)).add(R);const F=R.task;return Promise.all([E.displayReadyCapability.promise,u]).then(([H,V])=>{var X;if(this.destroyed){k();return}if((X=this._stats)==null||X.time("Rendering"),!(V.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");R.initializeGraphics({transparency:H,optionalContentConfig:V}),R.operatorListChanged()}).catch(k),F}getOperatorList({intent:e="display",annotationMode:t=Ar.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){var p;function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(e,t,i,r,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>yu.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,r){function o(){c.read().then(function({value:d,done:p}){if(p){i(u);return}u.lang??(u.lang=d.lang),Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},r)}const c=t.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),b(this,Ts,!1),_(this,ri,df).call(this),Promise.all(e)}cleanup(e=!1){b(this,Ts,!0);const t=_(this,ri,nl).call(this,!1);return e&&t&&this._stats&&(this._stats=new Qw),t}_startRenderPage(e,t){var r,o;const i=this._intentStates.get(t);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(o=i.displayReadyCapability)==null||o.resolve(e))}_renderPageChunk(e,t){for(let i=0,r=e.length;i<r;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&_(this,ri,nl).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:r}){const{map:o,transfer:c}=i,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:r},c).getReader(),p=this._intentStates.get(t);p.streamReader=d;const m=()=>{d.read().then(({value:v,done:w})=>{if(w){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(v,p),m())},v=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const w of p.renderTasks)w.operatorListChanged();_(this,ri,nl).call(this,!0)}if(p.displayReadyCapability)p.displayReadyCapability.reject(v);else if(p.opListReadCapability)p.opListReadCapability.reject(v);else throw v}})};m()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof zy){let r=TE;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Ea(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,o]of this._intentStates)if(o===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Dr=new WeakMap,Ts=new WeakMap,ri=new WeakSet,nl=function(e=!1){if(_(this,ri,df).call(this),!l(this,Ts)||this.destroyed)return!1;if(e)return b(this,Dr,setTimeout(()=>{b(this,Dr,null),_(this,ri,nl).call(this,!1)},PE)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,Ts,!1),!0},df=function(){l(this,Dr)&&(clearTimeout(l(this,Dr)),b(this,Dr,null))};var Ps,qf;class zE{constructor(){C(this,Ps,new Map);C(this,qf,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};l(this,qf).then(()=>{for(const[r]of l(this,Ps))r.call(this,i)})}addEventListener(e,t,i=null){let r=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:o}=i;if(o.aborted){Ie("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(e,t);r=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}l(this,Ps).set(t,r)}removeEventListener(e,t){const i=l(this,Ps).get(t);i==null||i(),l(this,Ps).delete(t)}terminate(){for(const[,e]of l(this,Ps))e==null||e();l(this,Ps).clear()}}Ps=new WeakMap,qf=new WeakMap;var Kf,Xo,qo,Il,ff,Nl,pf;const rt=class rt{constructor({name:e=null,port:t=null,verbosity:i=yS()}={}){C(this,Il);var r;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=l(rt,qo))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(l(rt,qo)||b(rt,qo,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return ln?Promise.all([Kr.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new ru("main","worker",e),this._messageHandler.on("ready",function(){}),_(this,Il,ff).call(this)}_initialize(){if(l(rt,Xo)||l(rt,Nl,pf)){this._setupFakeWorker();return}let{workerSrc:e}=rt;try{rt._isSameOrigin(window.location.href,e)||(e=rt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new ru("main","worker",t),r=()=>{o.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:o.signal}),i.on("test",u=>{if(o.abort(),this.destroyed||!u){r();return}this._messageHandler=i,this._port=t,this._webWorker=t,_(this,Il,ff).call(this)}),i.on("ready",u=>{if(o.abort(),this.destroyed){r();return}try{c()}catch{this._setupFakeWorker()}});const c=()=>{const u=new Uint8Array;i.send("test",u,[u.buffer])};c();return}catch{np("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(rt,Xo)||(Ie("Setting up fake worker."),b(rt,Xo,!0)),rt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new zE;this._port=t;const i=`fake${hn(rt,Kf)._++}`,r=new ru(i+"_worker",i,t);e.setup(r,t),this._messageHandler=new ru(i,i+"_worker",t),_(this,Il,ff).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=l(rt,qo))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=l(this,qo))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new rt(e)}static get workerSrc(){if(Ws.workerSrc)return Ws.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ze(this,"_setupFakeWorkerGlobal",(async()=>l(this,Nl,pf)?l(this,Nl,pf):(await import(this.workerSrc)).WorkerMessageHandler)())}};Kf=new WeakMap,Xo=new WeakMap,qo=new WeakMap,Il=new WeakSet,ff=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Nl=new WeakSet,pf=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},C(rt,Nl),C(rt,Kf,0),C(rt,Xo,!1),C(rt,qo),ln&&(b(rt,Xo,!0),Ws.workerSrc||(Ws.workerSrc="./pdf.worker.mjs")),rt._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}const r=new URL(t,i);return i.origin===r.origin},rt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let al=rt;var Rs,Zi,Fl,Dl,Ji,Ko,ou;class HE{constructor(e,t,i,r,o){C(this,Ko);C(this,Rs,new Map);C(this,Zi,new Map);C(this,Fl,new Map);C(this,Dl,new Map);C(this,Ji,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Lb,this.fontLoader=new OS({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ze(this,"annotationStorage",new $y)}getRenderingIntent(e,t=Ar.ENABLE,i=null,r=!1,o=!1){let c=Vn.DISPLAY,u=jm;switch(e){case"any":c=Vn.ANY;break;case"display":break;case"print":c=Vn.PRINT;break;default:Ie(`getRenderingIntent - invalid intent: ${e}`)}const d=c&Vn.PRINT&&i instanceof lb?i:this.annotationStorage;switch(t){case Ar.DISABLE:c+=Vn.ANNOTATIONS_DISABLE;break;case Ar.ENABLE:break;case Ar.ENABLE_FORMS:c+=Vn.ANNOTATIONS_FORMS;break;case Ar.ENABLE_STORAGE:c+=Vn.ANNOTATIONS_STORAGE,u=d.serializable;break;default:Ie(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(c+=Vn.IS_EDITING),o&&(c+=Vn.OPLIST);const{ids:p,hash:m}=d.modifiedIds,v=[c,u.hash,m];return{renderingIntent:c,cacheKey:v.join("_"),annotationStorageSerializable:u,modifiedIds:p}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=l(this,Ji))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of l(this,Zi).values())e.push(r._destroy());l(this,Zi).clear(),l(this,Fl).clear(),l(this,Dl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r;this.commonObjs.clear(),this.fontLoader.clear(),l(this,Rs).clear(),this.filterFactory.destroy(),Xm.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Ea("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,r)=>{Mt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},r.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){r.close();return}Mt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{this._fullReader.cancel(o),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("ReaderHeadersReady",async i=>{var u;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:o,contentLength:c}=this._fullReader;return(!r||!o)&&(this._lastProgress&&((u=t.onProgress)==null||u.call(t,this._lastProgress)),this._fullReader.onProgress=d=>{var p;(p=t.onProgress)==null||p.call(t,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:r,isRangeSupported:o,contentLength:c}}),e.on("GetRangeReader",(i,r)=>{Mt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(i.begin,i.end);if(!o){r.close();return}r.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){r.close();return}Mt(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{o.cancel(c),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new OE(i,this))}),e.on("DocException",function(i){let r;switch(i.name){case"PasswordException":r=new mm(i.message,i.code);break;case"InvalidPDFException":r=new NA(i.message);break;case"MissingPDFException":r=new Sa(i.message);break;case"UnexpectedResponseException":r=new ip(i.message,i.status);break;case"UnknownErrorException":r=new ym(i.message,i.details);break;default:nt("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",i=>{if(b(this,Ji,Promise.withResolvers()),t.onPassword){const r=o=>{o instanceof Error?l(this,Ji).reject(o):l(this,Ji).resolve({password:o})};try{t.onPassword(r,i.code)}catch(o){l(this,Ji).reject(o)}}else l(this,Ji).reject(new mm(i.message,i.code));return l(this,Ji).promise}),e.on("DataLoaded",i=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;l(this,Zi).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,r,o])=>{var c;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:u,fontExtraProperties:d,pdfBug:p}=this._params;if("error"in o){const A=o.error;Ie(`Error during font loading: ${A}`),this.commonObjs.resolve(i,A);break}const m=p&&((c=globalThis.FontInspector)!=null&&c.enabled)?(A,S)=>globalThis.FontInspector.fontAdded(A,S):null,v=new jS(o,{disableFontFace:u,inspectFont:m});this.fontLoader.bind(v).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!d&&v.data&&(v.data=null),this.commonObjs.resolve(i,v)});break;case"CopyLocalImage":const{imageRef:w}=o;Mt(w,"The imageRef must be defined.");for(const A of l(this,Zi).values())for(const[,S]of A.objs)if((S==null?void 0:S.ref)===w)return S.dataLen?(this.commonObjs.resolve(i,structuredClone(S)),S.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,o);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([i,r,o,c])=>{var d;if(this.destroyed)return;const u=l(this,Zi).get(r);if(!u.objs.has(i)){if(u._intentStates.size===0){(d=c==null?void 0:c.bitmap)==null||d.close();return}switch(o){case"Image":u.objs.resolve(i,c),(c==null?void 0:c.dataLen)>dS&&(u._maybeCleanupAfterRender=!0);break;case"Pattern":u.objs.resolve(i,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",i=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),e.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&Ie("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=l(this,Fl).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&l(this,Dl).set(o.refStr,e);const c=new jE(t,o,this,this._params.pdfBug);return l(this,Zi).set(t,c),c});return l(this,Fl).set(t,r),r}getPageIndex(e){return hA(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return _(this,Ko,ou).call(this,"GetFieldObjects")}hasJSActions(){return _(this,Ko,ou).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return _(this,Ko,ou).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return _(this,Ko,ou).call(this,"GetOptionalContentConfig").then(t=>new oE(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,Rs).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(r=>{var o,c;return{info:r[0],metadata:r[1]?new sE(r[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((c=this._fullReader)==null?void 0:c.contentLength)??null}});return l(this,Rs).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,Zi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,Rs).clear(),this.filterFactory.destroy(!0),Xm.cleanup()}}cachedPageNumber(e){if(!hA(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,Dl).get(t)??null}}Rs=new WeakMap,Zi=new WeakMap,Fl=new WeakMap,Dl=new WeakMap,Ji=new WeakMap,Ko=new WeakSet,ou=function(e,t=null){const i=l(this,Rs).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,t);return l(this,Rs).set(e,r),r};const Jd=Symbol("INITIAL_DATA");var Si,eh,Qm;class Lb{constructor(){C(this,eh);C(this,Si,Object.create(null))}get(e,t=null){if(t){const r=_(this,eh,Qm).call(this,e);return r.promise.then(()=>t(r.data)),null}const i=l(this,Si)[e];if(!i||i.data===Jd)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=l(this,Si)[e];return!!t&&t.data!==Jd}resolve(e,t=null){const i=_(this,eh,Qm).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in l(this,Si)){const{data:i}=l(this,Si)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}b(this,Si,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,Si)){const{data:t}=l(this,Si)[e];t!==Jd&&(yield[e,t])}}}Si=new WeakMap,eh=new WeakSet,Qm=function(e){var t;return(t=l(this,Si))[e]||(t[e]={...Promise.withResolvers(),data:Jd})};var Or;class BE{constructor(e){C(this,Or,null);b(this,Or,e),this.onContinue=null}get promise(){return l(this,Or).capability.promise}cancel(e=0){l(this,Or).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,Or).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,Or);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Or=new WeakMap;var jr,Yo;const bo=class bo{constructor({callback:e,params:t,objs:i,commonObjs:r,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:d,filterFactory:p,useRequestAnimationFrame:m=!1,pdfBug:v=!1,pageColors:w=null}){C(this,jr,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=p,this._pdfBug=v,this.pageColors=w,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new BE(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var u,d;if(this.cancelled)return;if(this._canvas){if(l(bo,Yo).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(bo,Yo).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:o,background:c}=this.params;this.gfx=new ol(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:r,transparency:e,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),l(this,jr)&&(window.cancelAnimationFrame(l(this,jr)),b(this,jr,null)),l(bo,Yo).delete(this._canvas),this.callback(e||new zy(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,jr,window.requestAnimationFrame(()=>{b(this,jr,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(bo,Yo).delete(this._canvas),this.callback())))}};jr=new WeakMap,Yo=new WeakMap,C(bo,Yo,new WeakSet);let Zm=bo;const UE="4.8.69",$E="3634dab10";function dA(f){return Math.floor(Math.max(0,Math.min(1,f))*255).toString(16).padStart(2,"0")}function Qc(f){return Math.max(0,Math.min(255,255*f))}class fA{static CMYK_G([e,t,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Qc(e),[e,e,e]}static G_HTML([e]){const t=dA(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(Qc)}static RGB_HTML(e){return`#${e.map(dA).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,i,r]){return[Qc(1-Math.min(1,e+r)),Qc(1-Math.min(1,i+r)),Qc(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const r=1-e,o=1-t,c=1-i,u=Math.min(r,o,c);return["CMYK",r,o,c,u]}}class VE{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){nt("Abstract method `_createSVG` called.")}}class qy extends VE{_createSVG(e){return document.createElementNS(vs,e)}}class Mb{static setupStorage(e,t,i,r,o){const c=r.getValue(t,{value:null});switch(i.name){case"textarea":if(c.value!==null&&(e.textContent=c.value),o==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(c.value===i.attributes.xfaOn?e.setAttribute("checked",!0):c.value===i.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",u=>{r.setValue(t,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&e.setAttribute("value",c.value),o==="print")break;e.addEventListener("input",u=>{r.setValue(t,{value:u.target.value})})}break;case"select":if(c.value!==null){e.setAttribute("value",c.value);for(const u of i.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const d=u.target.options,p=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(t,{value:p})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:r,linkService:o}){const{attributes:c}=t,u=e instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[d,p]of Object.entries(c))if(p!=null)switch(d){case"class":p.length&&e.setAttribute(d,p.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",p);break;case"style":Object.assign(e.style,p);break;case"textContent":e.textContent=p;break;default:(!u||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,p)}u&&o.addLinkAttributes(e,c.href,c.newWindow),i&&c.dataId&&this.setupStorage(e,c.dataId,t,i)}static render(e){var v,w;const t=e.annotationStorage,i=e.linkService,r=e.xfaHtml,o=e.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:o,linkService:i});const u=o!=="richText",d=e.div;if(d.append(c),e.viewport){const A=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=A}u&&d.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const A=document.createTextNode(r.value);c.append(A),u&&yu.shouldBuildText(r.name)&&p.push(A)}return{textDivs:p}}const m=[[r,-1,c]];for(;m.length>0;){const[A,S,E]=m.at(-1);if(S+1===A.children.length){m.pop();continue}const P=A.children[++m.at(-1)[1]];if(P===null)continue;const{name:k}=P;if(k==="#text"){const F=document.createTextNode(P.value);p.push(F),E.append(F);continue}const R=(v=P==null?void 0:P.attributes)!=null&&v.xmlns?document.createElementNS(P.attributes.xmlns,k):document.createElement(k);if(E.append(R),P.attributes&&this.setAttributes({html:R,element:P,storage:t,intent:o,linkService:i}),((w=P.children)==null?void 0:w.length)>0)m.push([P,-1,R]);else if(P.value){const F=document.createTextNode(P.value);u&&yu.shouldBuildText(k)&&p.push(F),R.append(F)}}for(const A of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))A.setAttribute("readOnly",!0);return{textDivs:p}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Fh=1e3,WE=9,Aa=new WeakSet;function Gs(f){return{width:f[2]-f[0],height:f[3]-f[1]}}class GE{static create(e){switch(e.data.annotationType){case Tt.LINK:return new Ib(e);case Tt.TEXT:return new XE(e);case Tt.WIDGET:switch(e.data.fieldType){case"Tx":return new qE(e);case"Btn":return e.data.radioButton?new Db(e):e.data.checkBox?new YE(e):new QE(e);case"Ch":return new ZE(e);case"Sig":return new KE(e)}return new Ca(e);case Tt.POPUP:return new ey(e);case Tt.FREETEXT:return new Bb(e);case Tt.LINE:return new eC(e);case Tt.SQUARE:return new tC(e);case Tt.CIRCLE:return new nC(e);case Tt.POLYLINE:return new Ub(e);case Tt.CARET:return new sC(e);case Tt.INK:return new Ky(e);case Tt.POLYGON:return new iC(e);case Tt.HIGHLIGHT:return new $b(e);case Tt.UNDERLINE:return new rC(e);case Tt.SQUIGGLY:return new oC(e);case Tt.STRIKEOUT:return new aC(e);case Tt.STAMP:return new Vb(e);case Tt.FILEATTACHMENT:return new lC(e);default:return new wt(e)}}}var Qo,Ol,jl,th,Jm;const Jy=class Jy{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){C(this,th);C(this,Qo,null);C(this,Ol,!1);C(this,jl,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Jy._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;l(this,Qo)||b(this,Qo,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&_(this,th,Jm).call(this,t),(i=l(this,jl))==null||i.popup.updateEdited(e)}resetEdited(){var e;l(this,Qo)&&(_(this,th,Jm).call(this,l(this,Qo).rect),(e=l(this,jl))==null||e.popup.resetEdited(),b(this,Qo,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),this instanceof Ca||(o.tabIndex=Fh);const{style:c}=o;if(c.zIndex=this.parent.zIndex++,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof ey){const{rotation:E}=t;return!t.hasOwnCanvas&&E!==0&&this.setRotation(E,o),o}const{width:u,height:d}=Gs(t.rect);if(!e&&t.borderStyle.width>0){c.borderWidth=`${t.borderStyle.width}px`;const E=t.borderStyle.horizontalCornerRadius,P=t.borderStyle.verticalCornerRadius;if(E>0||P>0){const R=`calc(${E}px * var(--scale-factor)) / calc(${P}px * var(--scale-factor))`;c.borderRadius=R}else if(this instanceof Db){const R=`calc(${u}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;c.borderRadius=R}switch(t.borderStyle.style){case Kc.SOLID:c.borderStyle="solid";break;case Kc.DASHED:c.borderStyle="dashed";break;case Kc.BEVELED:Ie("Unimplemented border style: beveled");break;case Kc.INSET:Ie("Unimplemented border style: inset");break;case Kc.UNDERLINE:c.borderBottomStyle="solid";break}const k=t.borderColor||null;k?(b(this,Ol,!0),c.borderColor=ge.makeHexColor(k[0]|0,k[1]|0,k[2]|0)):c.borderWidth=0}const p=ge.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:m,pageHeight:v,pageX:w,pageY:A}=r.rawDims;c.left=`${100*(p[0]-w)/m}%`,c.top=`${100*(p[1]-A)/v}%`;const{rotation:S}=t;return t.hasOwnCanvas||S===0?(c.width=`${100*u/m}%`,c.height=`${100*d/v}%`):this.setRotation(S,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:o,height:c}=Gs(this.data.rect);let u,d;e%180===0?(u=100*o/i,d=100*c/r):(u=100*c/i,d=100*o/r),t.style.width=`${u}%`,t.style.height=`${d}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,r)=>{const o=r.detail[t],c=o[0],u=o.slice(1);r.target.style[i]=fA[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[i]:fA[`${c}_rgb`](u)})};return ze(this,"_commonActions",{display:t=>{const{display:i}=t.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const r of Object.keys(t.detail)){const o=e[r]||i[r];o==null||o(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[r,o]of Object.entries(t)){const c=i[r];if(c){const u={detail:{[r]:o},target:e};c(u),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,r,o]=this.data.rect.map(E=>Math.fround(E));if(e.length===8){const[E,P,k,R]=e.subarray(2,6);if(r===E&&o===P&&t===k&&i===R)return}const{style:c}=this.container;let u;if(l(this,Ol)){const{borderColor:E,borderWidth:P}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${E}" stroke-width="${P}">`],this.container.classList.add("hasBorder")}const d=r-t,p=o-i,{svgFactory:m}=this,v=m.createElement("svg");v.classList.add("quadrilateralsContainer"),v.setAttribute("width",0),v.setAttribute("height",0);const w=m.createElement("defs");v.append(w);const A=m.createElement("clipPath"),S=`clippath_${this.data.id}`;A.setAttribute("id",S),A.setAttribute("clipPathUnits","objectBoundingBox"),w.append(A);for(let E=2,P=e.length;E<P;E+=8){const k=e[E],R=e[E+1],F=e[E+2],D=e[E+3],B=m.createElement("rect"),H=(F-t)/d,V=(o-R)/p,X=(k-F)/d,ee=(R-D)/p;B.setAttribute("x",H),B.setAttribute("y",V),B.setAttribute("width",X),B.setAttribute("height",ee),A.append(B),u==null||u.push(`<rect vector-effect="non-scaling-stroke" x="${H}" y="${V}" width="${X}" height="${ee}"/>`)}l(this,Ol)&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(v),this.container.style.clipPath=`url(#${S})`}_createPopup(){const{data:e}=this,t=b(this,jl,new ey({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){nt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:o,id:c,exportValues:u}of r){if(o===-1||c===t)continue;const d=typeof u=="string"?u:null,p=document.querySelector(`[data-element-id="${c}"]`);if(p&&!Aa.has(p)){Ie(`_getElementsByName - element not allowed: ${c}`);continue}i.push({id:c,exportValue:d,domElement:p})}return i}for(const r of document.getElementsByName(e)){const{exportValue:o}=r,c=r.getAttribute("data-element-id");c!==t&&Aa.has(r)&&i.push({id:c,exportValue:o,domElement:r})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Qo=new WeakMap,Ol=new WeakMap,jl=new WeakMap,th=new WeakSet,Jm=function(e){const{container:{style:t},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:d}}}}=this;i==null||i.splice(0,4,...e);const{width:p,height:m}=Gs(e);t.left=`${100*(e[0]-u)/o}%`,t.top=`${100*(c-e[3]+d)/c}%`,r===0?(t.width=`${100*p/o}%`,t.height=`${100*m/c}%`):this.setRotation(r)};let wt=Jy;var Wn,mo,Nb,Fb;class Ib extends wt{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});C(this,Wn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let o=!1;return t.url?(i.addLinkAttributes(r,t.url,t.newWindow),o=!0):t.action?(this._bindNamedAction(r,t.action),o=!0):t.attachment?(_(this,Wn,Nb).call(this,r,t.attachment,t.attachmentDest),o=!0):t.setOCGState?(_(this,Wn,Fb).call(this,r,t.setOCGState),o=!0):t.dest?(this._bindLink(r,t.dest),o=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),o=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(r,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(r),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&_(this,Wn,mo).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),_(this,Wn,mo).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(i.actions)){const c=r.get(o);c&&(t[c]=()=>{var u;return(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:o}}),!1})}t.onclick||(t.onclick=()=>!1),_(this,Wn,mo).call(this)}_bindResetFormAction(t,i){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),_(this,Wn,mo).call(this),!this._fieldObjects){Ie('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var v;r==null||r();const{fields:o,refs:c,include:u}=i,d=[];if(o.length!==0||c.length!==0){const w=new Set(c);for(const A of o){const S=this._fieldObjects[A]||[];for(const{id:E}of S)w.add(E)}for(const A of Object.values(this._fieldObjects))for(const S of A)w.has(S.id)===u&&d.push(S)}else for(const w of Object.values(this._fieldObjects))d.push(...w);const p=this.annotationStorage,m=[];for(const w of d){const{id:A}=w;switch(m.push(A),w.type){case"text":{const E=w.defaultValue||"";p.setValue(A,{value:E});break}case"checkbox":case"radiobutton":{const E=w.defaultValue===w.exportValues;p.setValue(A,{value:E});break}case"combobox":case"listbox":{const E=w.defaultValue||"";p.setValue(A,{value:E});break}default:continue}const S=document.querySelector(`[data-element-id="${A}"]`);if(S){if(!Aa.has(S)){Ie(`_bindResetFormAction - element not allowed: ${A}`);continue}}else continue;S.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}Wn=new WeakSet,mo=function(){this.container.setAttribute("data-internal-link","")},Nb=function(t,i,r=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(i.content,i.filename,r),!1},_(this,Wn,mo).call(this)},Fb=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),_(this,Wn,mo).call(this)};class XE extends wt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Ca extends wt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return gn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,r,o){i.includes("mouse")?e.addEventListener(i,c=>{var u;(u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):e.addEventListener(i,c=>{var u;if(i==="blur"){if(!t.focused||!c.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}o&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:o(c)}}))})}_setEventListeners(e,t,i,r){var o,c,u;for(const[d,p]of i)(p==="Action"||(o=this.data.actions)!=null&&o[p])&&((p==="Focus"||p==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,d,p,r),p==="Focus"&&!((c=this.data.actions)!=null&&c.Blur)?this._setEventListener(e,t,"blur","Blur",null):p==="Blur"&&!((u=this.data.actions)!=null&&u.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ge.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||WE,o=e.style;let c;const u=2,d=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u),m=Math.round(p/(am*r))||1,v=p/m;c=Math.min(r,d(v/am))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(r,d(p/am))}o.fontSize=`calc(${c}px * var(--scale-factor))`,o.color=ge.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class qE extends Ca{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,r){const o=this.annotationStorage;for(const c of this._getElementsByName(e.name,e.id))c.domElement&&(c.domElement[t]=i),o.setValue(c.id,{[r]:i})}render(){var r,o;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const c=e.getValue(t,{value:this.data.fieldValue});let u=c.value||"";const d=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;d&&u.length>d&&(u=u.slice(0,d));let p=c.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const m={userValue:u,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=p??u,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",p??u),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Aa.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Fh,this._setRequired(i,this.data.required),d&&(i.maxLength=d),i.addEventListener("input",w=>{e.setValue(t,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),m.formattedValue=null}),i.addEventListener("resetform",w=>{const A=this.data.defaultFieldValue??"";i.value=m.userValue=A,m.formattedValue=null});let v=w=>{const{formattedValue:A}=m;A!=null&&(w.target.value=A),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",A=>{var E;if(m.focused)return;const{target:S}=A;m.userValue&&(S.value=m.userValue),m.lastCommittedValue=S.value,m.commitKey=1,(E=this.data.actions)!=null&&E.Focus||(m.focused=!0)}),i.addEventListener("updatefromsandbox",A=>{this.showElementAndHideCanvas(A.target);const S={value(E){m.userValue=E.detail.value??"",e.setValue(t,{value:m.userValue.toString()}),E.target.value=m.userValue},formattedValue(E){const{formattedValue:P}=E.detail;m.formattedValue=P,P!=null&&E.target!==document.activeElement&&(E.target.value=P),e.setValue(t,{formattedValue:P})},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{var F;const{charLimit:P}=E.detail,{target:k}=E;if(P===0){k.removeAttribute("maxLength");return}k.setAttribute("maxLength",P);let R=m.userValue;!R||R.length<=P||(R=R.slice(0,P),k.value=m.userValue=R,e.setValue(t,{value:R}),(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:k.selectionStart,selEnd:k.selectionEnd}}))}};this._dispatchEventFromSandbox(S,A)}),i.addEventListener("keydown",A=>{var P;m.commitKey=1;let S=-1;if(A.key==="Escape"?S=0:A.key==="Enter"&&!this.data.multiLine?S=2:A.key==="Tab"&&(m.commitKey=3),S===-1)return;const{value:E}=A.target;m.lastCommittedValue!==E&&(m.lastCommittedValue=E,m.userValue=E,(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:S,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}}))});const w=v;v=null,i.addEventListener("blur",A=>{var E,P;if(!m.focused||!A.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(m.focused=!1);const{value:S}=A.target;m.userValue=S,m.lastCommittedValue!==S&&((P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:m.commitKey,selStart:A.target.selectionStart,selEnd:A.target.selectionEnd}})),w(A)}),(o=this.data.actions)!=null&&o.Keystroke&&i.addEventListener("beforeinput",A=>{var B;m.lastCommittedValue=null;const{data:S,target:E}=A,{value:P,selectionStart:k,selectionEnd:R}=E;let F=k,D=R;switch(A.inputType){case"deleteWordBackward":{const H=P.substring(0,k).match(/\w*[^\w]*$/);H&&(F-=H[0].length);break}case"deleteWordForward":{const H=P.substring(k).match(/^[^\w]*\w*/);H&&(D+=H[0].length);break}case"deleteContentBackward":k===R&&(F-=1);break;case"deleteContentForward":k===R&&(D+=1);break}A.preventDefault(),(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:P,change:S||"",willCommit:!1,selStart:F,selEnd:D}})}),this._setEventListeners(i,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],A=>A.target.value)}if(v&&i.addEventListener("blur",v),this.data.comb){const A=(this.data.rect[2]-this.data.rect[0])/d;i.classList.add("comb"),i.style.letterSpacing=`calc(${A}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class KE extends Ca{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class YE extends Ca{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Aa.add(o),o.setAttribute("data-element-id",i),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=Fh,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const p of this._getElementsByName(u,i)){const m=d&&p.exportValue===t.exportValue;p.domElement&&(p.domElement.checked=m),e.setValue(p.id,{value:m})}e.setValue(i,{value:d})}),o.addEventListener("resetform",c=>{const u=t.defaultFieldValue||"Off";c.target.checked=u===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(i,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Db extends Ca{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(i,{value:r})),r)for(const c of this._getElementsByName(t.fieldName,i))e.setValue(c.id,{value:!1});const o=document.createElement("input");if(Aa.add(o),o.setAttribute("data-element-id",i),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,r&&o.setAttribute("checked",!0),o.tabIndex=Fh,o.addEventListener("change",c=>{const{name:u,checked:d}=c.target;for(const p of this._getElementsByName(u,i))e.setValue(p.id,{value:!1});e.setValue(i,{value:d})}),o.addEventListener("resetform",c=>{const u=t.defaultFieldValue;c.target.checked=u!=null&&u===t.buttonValue}),this.enableScripting&&this.hasJSActions){const c=t.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:p=>{const m=c===p.detail.value;for(const v of this._getElementsByName(p.target.name)){const w=m&&v.id===i;v.domElement&&(v.domElement.checked=w),e.setValue(v.id,{value:w})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class QE extends Ib{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class ZE extends Ca{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Aa.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=Fh;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const v=this.data.defaultFieldValue;for(const w of r.options)w.selected=w.value===v});for(const m of this.data.options){const v=document.createElement("option");v.textContent=m.displayValue,v.value=m.exportValue,i.value.includes(m.exportValue)&&(v.setAttribute("selected",!0),o=!1),r.append(v)}let c=null;if(o){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),c=()=>{m.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const u=m=>{const v=m?"value":"textContent",{options:w,multiple:A}=r;return A?Array.prototype.filter.call(w,S=>S.selected).map(S=>S[v]):w.selectedIndex===-1?null:w[w.selectedIndex][v]};let d=u(!1);const p=m=>{const v=m.target.options;return Array.prototype.map.call(v,w=>({displayValue:w.textContent,exportValue:w.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const v={value(w){c==null||c();const A=w.detail.value,S=new Set(Array.isArray(A)?A:[A]);for(const E of r.options)E.selected=S.has(E.value);e.setValue(t,{value:u(!0)}),d=u(!1)},multipleSelection(w){r.multiple=!0},remove(w){const A=r.options,S=w.detail.remove;A[S].selected=!1,r.remove(S),A.length>0&&Array.prototype.findIndex.call(A,P=>P.selected)===-1&&(A[0].selected=!0),e.setValue(t,{value:u(!0),items:p(w)}),d=u(!1)},clear(w){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),d=u(!1)},insert(w){const{index:A,displayValue:S,exportValue:E}=w.detail.insert,P=r.children[A],k=document.createElement("option");k.textContent=S,k.value=E,P?P.before(k):r.append(k),e.setValue(t,{value:u(!0),items:p(w)}),d=u(!1)},items(w){const{items:A}=w.detail;for(;r.length!==0;)r.remove(0);for(const S of A){const{displayValue:E,exportValue:P}=S,k=document.createElement("option");k.textContent=E,k.value=P,r.append(k)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:u(!0),items:p(w)}),d=u(!1)},indices(w){const A=new Set(w.detail.indices);for(const S of w.target.options)S.selected=A.has(S.index);e.setValue(t,{value:u(!0)}),d=u(!1)},editable(w){w.target.disabled=!w.detail.editable}};this._dispatchEventFromSandbox(v,m)}),r.addEventListener("input",m=>{var A;const v=u(!0),w=u(!1);e.setValue(t,{value:v}),m.preventDefault(),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:w,changeEx:v,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){e.setValue(t,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class ey extends wt{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:wt._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new JE({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${jy}${i}`).join(",")),this.container}}var zl,Yf,Qf,Hl,Zo,ft,Ls,Bl,nh,ih,Ul,Ms,Ei,Is,sh,Ns,rh,Jo,ea,Ye,gf,ty,Ob,jb,zb,Hb,mf,yf,ny;class JE{constructor({container:e,color:t,elements:i,titleObj:r,modificationDate:o,contentsObj:c,richText:u,parent:d,rect:p,parentRect:m,open:v}){C(this,Ye);C(this,zl,_(this,Ye,zb).bind(this));C(this,Yf,_(this,Ye,ny).bind(this));C(this,Qf,_(this,Ye,yf).bind(this));C(this,Hl,_(this,Ye,mf).bind(this));C(this,Zo,null);C(this,ft,null);C(this,Ls,null);C(this,Bl,null);C(this,nh,null);C(this,ih,null);C(this,Ul,null);C(this,Ms,!1);C(this,Ei,null);C(this,Is,null);C(this,sh,null);C(this,Ns,null);C(this,rh,null);C(this,Jo,null);C(this,ea,!1);var w;b(this,ft,e),b(this,rh,r),b(this,Ls,c),b(this,Ns,u),b(this,ih,d),b(this,Zo,t),b(this,sh,p),b(this,Ul,m),b(this,nh,i),b(this,Bl,By.toDateObject(o)),this.trigger=i.flatMap(A=>A.getElementsToTriggerPopup());for(const A of this.trigger)A.addEventListener("click",l(this,Hl)),A.addEventListener("mouseenter",l(this,Qf)),A.addEventListener("mouseleave",l(this,Yf)),A.classList.add("popupTriggerArea");for(const A of i)(w=A.container)==null||w.addEventListener("keydown",l(this,zl));l(this,ft).hidden=!0,v&&_(this,Ye,mf).call(this)}render(){if(l(this,Ei))return;const e=b(this,Ei,document.createElement("div"));if(e.className="popup",l(this,Zo)){const o=e.style.outlineColor=ge.makeHexColor(...l(this,Zo));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`:e.style.backgroundColor=ge.makeHexColor(...l(this,Zo).map(u=>Math.floor(.7*(255-u)+u)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=l(this,rh),e.append(t),l(this,Bl)){const o=document.createElement("span");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,Bl).valueOf()})),t.append(o)}const r=l(this,Ye,gf);if(r)Mb.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(l(this,Ls));e.append(o)}l(this,ft).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let o=0,c=r.length;o<c;++o){const u=r[o];i.append(document.createTextNode(u)),o<c-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;l(this,Jo)||b(this,Jo,{contentsObj:l(this,Ls),richText:l(this,Ns)}),e&&b(this,Is,null),t&&(b(this,Ns,_(this,Ye,jb).call(this,t)),b(this,Ls,null)),(i=l(this,Ei))==null||i.remove(),b(this,Ei,null)}resetEdited(){var e;l(this,Jo)&&({contentsObj:hn(this,Ls)._,richText:hn(this,Ns)._}=l(this,Jo),b(this,Jo,null),(e=l(this,Ei))==null||e.remove(),b(this,Ei,null),b(this,Is,null))}forceHide(){b(this,ea,this.isVisible),l(this,ea)&&(l(this,ft).hidden=!0)}maybeShow(){l(this,ea)&&(l(this,Ei)||_(this,Ye,yf).call(this),b(this,ea,!1),l(this,ft).hidden=!1)}get isVisible(){return l(this,ft).hidden===!1}}zl=new WeakMap,Yf=new WeakMap,Qf=new WeakMap,Hl=new WeakMap,Zo=new WeakMap,ft=new WeakMap,Ls=new WeakMap,Bl=new WeakMap,nh=new WeakMap,ih=new WeakMap,Ul=new WeakMap,Ms=new WeakMap,Ei=new WeakMap,Is=new WeakMap,sh=new WeakMap,Ns=new WeakMap,rh=new WeakMap,Jo=new WeakMap,ea=new WeakMap,Ye=new WeakSet,gf=function(){const e=l(this,Ns),t=l(this,Ls);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,Ns).html||null},ty=function(){var e,t,i;return((i=(t=(e=l(this,Ye,gf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},Ob=function(){var e,t,i;return((i=(t=(e=l(this,Ye,gf))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},jb=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:l(this,Ye,Ob),fontSize:l(this,Ye,ty)?`calc(${l(this,Ye,ty)}px * var(--scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:r});return i},zb=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,Ms))&&_(this,Ye,mf).call(this)},Hb=function(){if(l(this,Is)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:r,pageY:o}}}=l(this,ih);let c=!!l(this,Ul),u=c?l(this,Ul):l(this,sh);for(const S of l(this,nh))if(!u||ge.intersect(S.data.rect,u)!==null){u=S.data.rect,c=!0;break}const d=ge.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),m=c?u[2]-u[0]+5:0,v=d[0]+m,w=d[1];b(this,Is,[100*(v-r)/t,100*(w-o)/i]);const{style:A}=l(this,ft);A.left=`${l(this,Is)[0]}%`,A.top=`${l(this,Is)[1]}%`},mf=function(){b(this,Ms,!l(this,Ms)),l(this,Ms)?(_(this,Ye,yf).call(this),l(this,ft).addEventListener("click",l(this,Hl)),l(this,ft).addEventListener("keydown",l(this,zl))):(_(this,Ye,ny).call(this),l(this,ft).removeEventListener("click",l(this,Hl)),l(this,ft).removeEventListener("keydown",l(this,zl)))},yf=function(){l(this,Ei)||this.render(),this.isVisible?l(this,Ms)&&l(this,ft).classList.add("focused"):(_(this,Ye,Hb).call(this),l(this,ft).hidden=!1,l(this,ft).style.zIndex=parseInt(l(this,ft).style.zIndex)+1e3)},ny=function(){l(this,ft).classList.remove("focused"),!(l(this,Ms)||!this.isVisible)&&(l(this,ft).hidden=!0,l(this,ft).style.zIndex=parseInt(l(this,ft).style.zIndex)-1e3)};class Bb extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Re.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var oh;class eC extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,oh,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:r}=Gs(t.rect),o=this.svgFactory.create(i,r,!0),c=b(this,oh,this.svgFactory.createElement("svg:line"));return c.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),c.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),c.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),c.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),c.setAttribute("stroke-width",t.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,oh)}addHighlightArea(){this.container.classList.add("highlightArea")}}oh=new WeakMap;var ah;class tC extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,ah,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:r}=Gs(t.rect),o=this.svgFactory.create(i,r,!0),c=t.borderStyle.width,u=b(this,ah,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",c/2),u.setAttribute("y",c/2),u.setAttribute("width",i-c),u.setAttribute("height",r-c),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,ah)}addHighlightArea(){this.container.classList.add("highlightArea")}}ah=new WeakMap;var lh;class nC extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,lh,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:r}=Gs(t.rect),o=this.svgFactory.create(i,r,!0),c=t.borderStyle.width,u=b(this,lh,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",i/2),u.setAttribute("cy",r/2),u.setAttribute("rx",i/2-c/2),u.setAttribute("ry",r/2-c/2),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,lh)}addHighlightArea(){this.container.classList.add("highlightArea")}}lh=new WeakMap;var ch;class Ub extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,ch,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:r,popupRef:o}}=this;if(!i)return this.container;const{width:c,height:u}=Gs(t),d=this.svgFactory.create(c,u,!0);let p=[];for(let v=0,w=i.length;v<w;v+=2){const A=i[v]-t[0],S=t[3]-i[v+1];p.push(`${A},${S}`)}p=p.join(" ");const m=b(this,ch,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",p),m.setAttribute("stroke-width",r.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),d.append(m),this.container.append(d),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,ch)}addHighlightArea(){this.container.classList.add("highlightArea")}}ch=new WeakMap;class iC extends Ub{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class sC extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var uh;class Ky extends wt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});C(this,uh,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Re.HIGHLIGHT:Re.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:i,borderStyle:r,popupRef:o}}=this,{width:c,height:u}=Gs(t),d=this.svgFactory.create(c,u,!0);for(const p of i){let m=[];for(let w=0,A=p.length;w<A;w+=2){const S=p[w]-t[0],E=t[3]-p[w+1];m.push(`${S},${E}`)}m=m.join(" ");const v=this.svgFactory.createElement(this.svgElementName);l(this,uh).push(v),v.setAttribute("points",m),v.setAttribute("stroke-width",r.width||1),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),d.append(v)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return l(this,uh)}addHighlightArea(){this.container.classList.add("highlightArea")}}uh=new WeakMap;class $b extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Re.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class rC extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class oC extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class aC extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Vb extends wt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Re.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var hh,dh,iy;class lC extends wt{constructor(t){var r;super(t,{isRenderable:!0});C(this,dh);C(this,hh,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",_(this,dh,iy).bind(this)),b(this,hh,r);const{isMac:o}=gn.platform;return t.addEventListener("keydown",c=>{c.key==="Enter"&&(o?c.metaKey:c.ctrlKey)&&_(this,dh,iy).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return l(this,hh)}addHighlightArea(){this.container.classList.add("highlightArea")}}hh=new WeakMap,dh=new WeakSet,iy=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var fh,ta,na,ph,xa,Wb,sy,LA;let cC=(LA=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:r,page:o,viewport:c,structTreeLayer:u}){C(this,xa);C(this,fh,null);C(this,ta,null);C(this,na,new Map);C(this,ph,null);this.div=e,b(this,fh,t),b(this,ta,i),b(this,ph,u||null),this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return l(this,na).size>0}async render(e){var c;const{annotations:t}=e,i=this.div;va(i,this.viewport);const r=new Map,o={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new qy,annotationStorage:e.annotationStorage||new $y,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of t){if(u.noHTML)continue;const d=u.annotationType===Tt.POPUP;if(d){const v=r.get(u.id);if(!v)continue;o.elements=v}else{const{width:v,height:w}=Gs(u.rect);if(v<=0||w<=0)continue}o.data=u;const p=GE.create(o);if(!p.isRenderable)continue;if(!d&&u.popupRef){const v=r.get(u.popupRef);v?v.push(p):r.set(u.popupRef,[p])}const m=p.render();u.hidden&&(m.style.visibility="hidden"),await _(this,xa,Wb).call(this,m,u.id),p._isEditable&&(l(this,na).set(p.data.id,p),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(p))}_(this,xa,sy).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,va(t,{rotation:e.rotation}),_(this,xa,sy).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,na).values())}getEditableAnnotation(e){return l(this,na).get(e)}},fh=new WeakMap,ta=new WeakMap,na=new WeakMap,ph=new WeakMap,xa=new WeakSet,Wb=async function(e,t){var c,u;const i=e.firstChild||e,r=i.id=`${jy}${t}`,o=await((c=l(this,ph))==null?void 0:c.getAriaAttributes(r));if(o)for(const[d,p]of o)i.setAttribute(d,p);this.div.append(e),(u=l(this,fh))==null||u.moveElementInDOM(this.div,e,i,!1)},sy=function(){if(!l(this,ta))return;const e=this.div;for(const[t,i]of l(this,ta)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):r.append(i)}l(this,ta).clear()},LA);const ef=/\r\n?|\n/g;var Ci,jn,gh,ia,zn,_t,Gb,Xb,qb,vf,qs,wf,Af,Kb,oy,Yb;const Je=class Je extends qe{constructor(t){super({...t,name:"freeTextEditor"});C(this,_t);C(this,Ci);C(this,jn,"");C(this,gh,`${this.id}-editor`);C(this,ia,null);C(this,zn);b(this,Ci,t.color||Je._defaultColor||qe._defaultLineColor),b(this,zn,t.fontSize||Je._defaultFontSize)}static get _keyboardManager(){const t=Je.prototype,i=c=>c.isEmpty(),r=wa.TRANSLATE_SMALL,o=wa.TRANSLATE_BIG;return ze(this,"_keyboardManager",new Nh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,o],checker:i}]]))}static initialize(t,i){qe.initialize(t,i);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case Ce.FREETEXT_SIZE:Je._defaultFontSize=i;break;case Ce.FREETEXT_COLOR:Je._defaultColor=i;break}}updateParams(t,i){switch(t){case Ce.FREETEXT_SIZE:_(this,_t,Gb).call(this,i);break;case Ce.FREETEXT_COLOR:_(this,_t,Xb).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ce.FREETEXT_SIZE,Je._defaultFontSize],[Ce.FREETEXT_COLOR,Je._defaultColor||qe._defaultLineColor]]}get propertiesToUpdate(){return[[Ce.FREETEXT_SIZE,l(this,zn)],[Ce.FREETEXT_COLOR,l(this,Ci)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-Je._internalPadding*t,-(Je._internalPadding+l(this,zn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Re.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),b(this,ia,new AbortController);const t=this._uiManager.combinedSignal(l(this,ia));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,gh)),this._isDraggable=!0,(t=l(this,ia))==null||t.abort(),b(this,ia,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,jn),i=b(this,jn,_(this,_t,qb).call(this).trimEnd());if(t===i)return;const r=o=>{if(b(this,jn,o),!o){this.remove();return}_(this,_t,Af).call(this),this._uiManager.rebuild(this),_(this,_t,vf).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(t)},mustExec:!1}),_(this,_t,vf).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Je._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,gh)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${l(this,zn)}px * var(--scale-factor))`,r.color=l(this,Ci),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Mf(this,this.div,["dblclick","keydown"]),this.width){const[o,c]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[d,p]=this.getInitialTranslation();[d,p]=this.pageTranslationToScreen(d,p);const[m,v]=this.pageDimensions,[w,A]=this.pageTranslation;let S,E;switch(this.rotation){case 0:S=t+(u[0]-w)/m,E=i+this.height-(u[1]-A)/v;break;case 90:S=t+(u[0]-w)/m,E=i-(u[1]-A)/v,[d,p]=[p,-d];break;case 180:S=t-this.width+(u[0]-w)/m,E=i-(u[1]-A)/v,[d,p]=[-d,-p];break;case 270:S=t+(u[0]-w-this.height*v)/m,E=i+(u[1]-A-this.width*m)/v,[d,p]=[-p,d];break}this.setAt(S*o,E*c,d,p)}else this.setAt(t*o,i*c,this.width*o,this.height*c);_(this,_t,Af).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var S,E,P;const i=t.clipboardData||window.clipboardData,{types:r}=i;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const o=_(S=Je,qs,oy).call(S,i.getData("text")||"").replaceAll(ef,`
`);if(!o)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const u=c.getRangeAt(0);if(!o.includes(`
`)){u.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),c.collapseToStart();return}const{startContainer:d,startOffset:p}=u,m=[],v=[];if(d.nodeType===Node.TEXT_NODE){const k=d.parentElement;if(v.push(d.nodeValue.slice(p).replaceAll(ef,"")),k!==this.editorDiv){let R=m;for(const F of this.editorDiv.childNodes){if(F===k){R=v;continue}R.push(_(E=Je,qs,wf).call(E,F))}}m.push(d.nodeValue.slice(0,p).replaceAll(ef,""))}else if(d===this.editorDiv){let k=m,R=0;for(const F of this.editorDiv.childNodes)R++===p&&(k=v),k.push(_(P=Je,qs,wf).call(P,F))}b(this,jn,`${m.join(`
`)}${o}${v.join(`
`)}`),_(this,_t,Af).call(this);const w=new Range;let A=m.reduce((k,R)=>k+R.length,0);for(const{firstChild:k}of this.editorDiv.childNodes)if(k.nodeType===Node.TEXT_NODE){const R=k.nodeValue.length;if(A<=R){w.setStart(k,A),w.setEnd(k,A);break}A-=R}c.removeAllRanges(),c.addRange(w)}get contentDiv(){return this.editorDiv}static async deserialize(t,i,r){var u;let o=null;if(t instanceof Bb){const{data:{defaultAppearanceData:{fontSize:d,fontColor:p},rect:m,rotation:v,id:w,popupRef:A},textContent:S,textPosition:E,parent:{page:{pageNumber:P}}}=t;if(!S||S.length===0)return null;o=t={annotationType:Re.FREETEXT,color:Array.from(p),fontSize:d,value:S.join(`
`),position:E,pageIndex:P-1,rect:m.slice(0),rotation:v,id:w,deleted:!1,popupRef:A}}const c=await super.deserialize(t,i,r);return b(c,zn,t.fontSize),b(c,Ci,ge.makeHexColor(...t.color)),b(c,jn,_(u=Je,qs,oy).call(u,t.value)),c.annotationElementId=t.id||null,c._initialData=o,c}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Je._internalPadding*this.parentScale,r=this.getRect(i,i),o=qe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,Ci)),c={annotationType:Re.FREETEXT,color:o,fontSize:l(this,zn),value:_(this,_t,Kb).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?c:this.annotationElementId&&!_(this,_t,Yb).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:r}=i;r.fontSize=`calc(${l(this,zn)}px * var(--scale-factor))`,r.color=l(this,Ci),i.replaceChildren();for(const c of l(this,jn).split(`
`)){const u=document.createElement("div");u.append(c?document.createTextNode(c):document.createElement("br")),i.append(u)}const o=Je._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(o,o),popupContent:l(this,jn)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Ci=new WeakMap,jn=new WeakMap,gh=new WeakMap,ia=new WeakMap,zn=new WeakMap,_t=new WeakSet,Gb=function(t){const i=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-l(this,zn))*this.parentScale),b(this,zn,o),_(this,_t,vf).call(this)},r=l(this,zn);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Xb=function(t){const i=o=>{b(this,Ci,this.editorDiv.style.color=o)},r=l(this,Ci);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},qb=function(){var r;const t=[];this.editorDiv.normalize();let i=null;for(const o of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(t.push(_(r=Je,qs,wf).call(r,o)),i=o);return t.join(`
`)},vf=function(){const[t,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:o,div:c}=this,u=c.style.display,d=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",o.div.append(this.div),r=c.getBoundingClientRect(),c.remove(),c.style.display=u,c.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/i):(this.width=r.height/t,this.height=r.width/i),this.fixAndSetPosition()},qs=new WeakSet,wf=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(ef,"")},Af=function(){if(this.editorDiv.replaceChildren(),!!l(this,jn))for(const t of l(this,jn).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},Kb=function(){return l(this,jn).replaceAll(" "," ")},oy=function(t){return t.replaceAll(" "," ")},Yb=function(t){const{value:i,fontSize:r,color:o,pageIndex:c}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==r||t.color.some((u,d)=>u!==o[d])||t.pageIndex!==c},C(Je,qs),Ee(Je,"_freeTextDefaultContent",""),Ee(Je,"_internalPadding",0),Ee(Je,"_defaultColor",null),Ee(Je,"_defaultFontSize",10),Ee(Je,"_type","freetext"),Ee(Je,"_editorType",Re.FREETEXT);let ry=Je;class Qb{toSVGPath(){nt("Abstract method `toSVGPath` must be implemented.")}get box(){nt("Abstract getter `box` must be implemented.")}serialize(e,t){nt("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){nt("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){nt("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var Hn,ki,$l,Vl,es,De,sa,ra,mh,yh,Wl,Gl,zr,vh,Zf,Jf,It,au,Zb,Jb,ex,tx,nx,ix;const As=class As{constructor({x:e,y:t},i,r,o,c,u=0){C(this,It);C(this,Hn);C(this,ki,[]);C(this,$l);C(this,Vl);C(this,es,[]);C(this,De,new Float64Array(18));C(this,sa);C(this,ra);C(this,mh);C(this,yh);C(this,Wl);C(this,Gl);C(this,zr,[]);b(this,Hn,i),b(this,Gl,o*r),b(this,Vl,c),l(this,De).set([NaN,NaN,NaN,NaN,e,t],6),b(this,$l,u),b(this,yh,l(As,vh)*r),b(this,mh,l(As,Jf)*r),b(this,Wl,r),l(this,zr).push(e,t)}isEmpty(){return isNaN(l(this,De)[8])}add({x:e,y:t}){var ee;b(this,sa,e),b(this,ra,t);const[i,r,o,c]=l(this,Hn);let[u,d,p,m]=l(this,De).subarray(8,12);const v=e-p,w=t-m,A=Math.hypot(v,w);if(A<l(this,mh))return!1;const S=A-l(this,yh),E=S/A,P=E*v,k=E*w;let R=u,F=d;u=p,d=m,p+=P,m+=k,(ee=l(this,zr))==null||ee.push(e,t);const D=-k/S,B=P/S,H=D*l(this,Gl),V=B*l(this,Gl);return l(this,De).set(l(this,De).subarray(2,8),0),l(this,De).set([p+H,m+V],4),l(this,De).set(l(this,De).subarray(14,18),12),l(this,De).set([p-H,m-V],16),isNaN(l(this,De)[6])?(l(this,es).length===0&&(l(this,De).set([u+H,d+V],2),l(this,es).push(NaN,NaN,NaN,NaN,(u+H-i)/o,(d+V-r)/c),l(this,De).set([u-H,d-V],14),l(this,ki).push(NaN,NaN,NaN,NaN,(u-H-i)/o,(d-V-r)/c)),l(this,De).set([R,F,u,d,p,m],6),!this.isEmpty()):(l(this,De).set([R,F,u,d,p,m],6),Math.abs(Math.atan2(F-d,R-u)-Math.atan2(k,P))<Math.PI/2?([u,d,p,m]=l(this,De).subarray(2,6),l(this,es).push(NaN,NaN,NaN,NaN,((u+p)/2-i)/o,((d+m)/2-r)/c),[u,d,R,F]=l(this,De).subarray(14,18),l(this,ki).push(NaN,NaN,NaN,NaN,((R+u)/2-i)/o,((F+d)/2-r)/c),!0):([R,F,u,d,p,m]=l(this,De).subarray(0,6),l(this,es).push(((R+5*u)/6-i)/o,((F+5*d)/6-r)/c,((5*u+p)/6-i)/o,((5*d+m)/6-r)/c,((u+p)/2-i)/o,((d+m)/2-r)/c),[p,m,u,d,R,F]=l(this,De).subarray(12,18),l(this,ki).push(((R+5*u)/6-i)/o,((F+5*d)/6-r)/c,((5*u+p)/6-i)/o,((5*d+m)/6-r)/c,((u+p)/2-i)/o,((d+m)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,es),t=l(this,ki);if(isNaN(l(this,De)[6])&&!this.isEmpty())return _(this,It,Zb).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);_(this,It,ex).call(this,i);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return _(this,It,Jb).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,r,o,c){return new sx(e,t,i,r,o,c)}getOutlines(){var v;const e=l(this,es),t=l(this,ki),i=l(this,De),[r,o,c,u]=l(this,Hn),d=new Float64Array((((v=l(this,zr))==null?void 0:v.length)??0)+2);for(let w=0,A=d.length-2;w<A;w+=2)d[w]=(l(this,zr)[w]-r)/c,d[w+1]=(l(this,zr)[w+1]-o)/u;if(d[d.length-2]=(l(this,sa)-r)/c,d[d.length-1]=(l(this,ra)-o)/u,isNaN(i[6])&&!this.isEmpty())return _(this,It,tx).call(this,d);const p=new Float64Array(l(this,es).length+24+l(this,ki).length);let m=e.length;for(let w=0;w<m;w+=2){if(isNaN(e[w])){p[w]=p[w+1]=NaN;continue}p[w]=e[w],p[w+1]=e[w+1]}m=_(this,It,ix).call(this,p,m);for(let w=t.length-6;w>=6;w-=6)for(let A=0;A<6;A+=2){if(isNaN(t[w+A])){p[m]=p[m+1]=NaN,m+=2;continue}p[m]=t[w+A],p[m+1]=t[w+A+1],m+=2}return _(this,It,nx).call(this,p,m),this.newFreeDrawOutline(p,d,l(this,Hn),l(this,Wl),l(this,$l),l(this,Vl))}};Hn=new WeakMap,ki=new WeakMap,$l=new WeakMap,Vl=new WeakMap,es=new WeakMap,De=new WeakMap,sa=new WeakMap,ra=new WeakMap,mh=new WeakMap,yh=new WeakMap,Wl=new WeakMap,Gl=new WeakMap,zr=new WeakMap,vh=new WeakMap,Zf=new WeakMap,Jf=new WeakMap,It=new WeakSet,au=function(){const e=l(this,De).subarray(4,6),t=l(this,De).subarray(16,18),[i,r,o,c]=l(this,Hn);return[(l(this,sa)+(e[0]-t[0])/2-i)/o,(l(this,ra)+(e[1]-t[1])/2-r)/c,(l(this,sa)+(t[0]-e[0])/2-i)/o,(l(this,ra)+(t[1]-e[1])/2-r)/c]},Zb=function(){const[e,t,i,r]=l(this,Hn),[o,c,u,d]=_(this,It,au).call(this);return`M${(l(this,De)[2]-e)/i} ${(l(this,De)[3]-t)/r} L${(l(this,De)[4]-e)/i} ${(l(this,De)[5]-t)/r} L${o} ${c} L${u} ${d} L${(l(this,De)[16]-e)/i} ${(l(this,De)[17]-t)/r} L${(l(this,De)[14]-e)/i} ${(l(this,De)[15]-t)/r} Z`},Jb=function(e){const t=l(this,ki);e.push(`L${t[4]} ${t[5]} Z`)},ex=function(e){const[t,i,r,o]=l(this,Hn),c=l(this,De).subarray(4,6),u=l(this,De).subarray(16,18),[d,p,m,v]=_(this,It,au).call(this);e.push(`L${(c[0]-t)/r} ${(c[1]-i)/o} L${d} ${p} L${m} ${v} L${(u[0]-t)/r} ${(u[1]-i)/o}`)},tx=function(e){const t=l(this,De),[i,r,o,c]=l(this,Hn),[u,d,p,m]=_(this,It,au).call(this),v=new Float64Array(36);return v.set([NaN,NaN,NaN,NaN,(t[2]-i)/o,(t[3]-r)/c,NaN,NaN,NaN,NaN,(t[4]-i)/o,(t[5]-r)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(t[16]-i)/o,(t[17]-r)/c,NaN,NaN,NaN,NaN,(t[14]-i)/o,(t[15]-r)/c],0),this.newFreeDrawOutline(v,e,l(this,Hn),l(this,Wl),l(this,$l),l(this,Vl))},nx=function(e,t){const i=l(this,ki);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},ix=function(e,t){const i=l(this,De).subarray(4,6),r=l(this,De).subarray(16,18),[o,c,u,d]=l(this,Hn),[p,m,v,w]=_(this,It,au).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-o)/u,(i[1]-c)/d,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,v,w,NaN,NaN,NaN,NaN,(r[0]-o)/u,(r[1]-c)/d],t),t+=24},C(As,vh,8),C(As,Zf,2),C(As,Jf,l(As,vh)+l(As,Zf));let Nf=As;var Xl,oa,Fs,wh,Bn,Ah,vt,Rn,lu,cu,rx;class sx extends Qb{constructor(t,i,r,o,c,u){super();C(this,Rn);C(this,Xl);C(this,oa,null);C(this,Fs);C(this,wh);C(this,Bn);C(this,Ah);C(this,vt);b(this,vt,t),b(this,Bn,i),b(this,Xl,r),b(this,Ah,o),b(this,Fs,c),b(this,wh,u),_(this,Rn,rx).call(this,u);const{x:d,y:p,width:m,height:v}=l(this,oa);for(let w=0,A=t.length;w<A;w+=2)t[w]=(t[w]-d)/m,t[w+1]=(t[w+1]-p)/v;for(let w=0,A=i.length;w<A;w+=2)i[w]=(i[w]-d)/m,i[w+1]=(i[w+1]-p)/v}toSVGPath(){const t=[`M${l(this,vt)[4]} ${l(this,vt)[5]}`];for(let i=6,r=l(this,vt).length;i<r;i+=6){if(isNaN(l(this,vt)[i])){t.push(`L${l(this,vt)[i+4]} ${l(this,vt)[i+5]}`);continue}t.push(`C${l(this,vt)[i]} ${l(this,vt)[i+1]} ${l(this,vt)[i+2]} ${l(this,vt)[i+3]} ${l(this,vt)[i+4]} ${l(this,vt)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,r,o],c){const u=r-t,d=o-i;let p,m;switch(c){case 0:p=_(this,Rn,lu).call(this,l(this,vt),t,o,u,-d),m=_(this,Rn,lu).call(this,l(this,Bn),t,o,u,-d);break;case 90:p=_(this,Rn,cu).call(this,l(this,vt),t,i,u,d),m=_(this,Rn,cu).call(this,l(this,Bn),t,i,u,d);break;case 180:p=_(this,Rn,lu).call(this,l(this,vt),r,i,-u,d),m=_(this,Rn,lu).call(this,l(this,Bn),r,i,-u,d);break;case 270:p=_(this,Rn,cu).call(this,l(this,vt),r,o,-u,-d),m=_(this,Rn,cu).call(this,l(this,Bn),r,o,-u,-d);break}return{outline:Array.from(p),points:[Array.from(m)]}}get box(){return l(this,oa)}newOutliner(t,i,r,o,c,u=0){return new Nf(t,i,r,o,c,u)}getNewOutline(t,i){const{x:r,y:o,width:c,height:u}=l(this,oa),[d,p,m,v]=l(this,Xl),w=c*m,A=u*v,S=r*m+d,E=o*v+p,P=this.newOutliner({x:l(this,Bn)[0]*w+S,y:l(this,Bn)[1]*A+E},l(this,Xl),l(this,Ah),t,l(this,wh),i??l(this,Fs));for(let k=2;k<l(this,Bn).length;k+=2)P.add({x:l(this,Bn)[k]*w+S,y:l(this,Bn)[k+1]*A+E});return P.getOutlines()}get mustRemoveSelfIntersections(){return!0}}Xl=new WeakMap,oa=new WeakMap,Fs=new WeakMap,wh=new WeakMap,Bn=new WeakMap,Ah=new WeakMap,vt=new WeakMap,Rn=new WeakSet,lu=function(t,i,r,o,c){const u=new Float64Array(t.length);for(let d=0,p=t.length;d<p;d+=2)u[d]=i+t[d]*o,u[d+1]=r+t[d+1]*c;return u},cu=function(t,i,r,o,c){const u=new Float64Array(t.length);for(let d=0,p=t.length;d<p;d+=2)u[d]=i+t[d+1]*o,u[d+1]=r+t[d]*c;return u},rx=function(t){const i=l(this,vt);let r=i[4],o=i[5],c=r,u=o,d=r,p=o,m=r,v=o;const w=t?Math.max:Math.min;for(let k=6,R=i.length;k<R;k+=6){if(isNaN(i[k]))c=Math.min(c,i[k+4]),u=Math.min(u,i[k+5]),d=Math.max(d,i[k+4]),p=Math.max(p,i[k+5]),v<i[k+5]?(m=i[k+4],v=i[k+5]):v===i[k+5]&&(m=w(m,i[k+4]));else{const F=ge.bezierBoundingBox(r,o,...i.slice(k,k+6));c=Math.min(c,F[0]),u=Math.min(u,F[1]),d=Math.max(d,F[2]),p=Math.max(p,F[3]),v<F[3]?(m=F[2],v=F[3]):v===F[3]&&(m=w(m,F[2]))}r=i[k+4],o=i[k+5]}const A=c-l(this,Fs),S=u-l(this,Fs),E=d-c+2*l(this,Fs),P=p-u+2*l(this,Fs);b(this,oa,{x:A,y:S,width:E,height:P,lastPoint:[m,v]})};var bh,Hr,Ti,yn,ox,bf,ax,lx,ay;class pA{constructor(e,t=0,i=0,r=!0){C(this,yn);C(this,bh);C(this,Hr,[]);C(this,Ti,[]);let o=1/0,c=-1/0,u=1/0,d=-1/0;const p=10**-4;for(const{x:P,y:k,width:R,height:F}of e){const D=Math.floor((P-t)/p)*p,B=Math.ceil((P+R+t)/p)*p,H=Math.floor((k-t)/p)*p,V=Math.ceil((k+F+t)/p)*p,X=[D,H,V,!0],ee=[B,H,V,!1];l(this,Hr).push(X,ee),o=Math.min(o,D),c=Math.max(c,B),u=Math.min(u,H),d=Math.max(d,V)}const m=c-o+2*i,v=d-u+2*i,w=o-i,A=u-i,S=l(this,Hr).at(r?-1:-2),E=[S[0],S[2]];for(const P of l(this,Hr)){const[k,R,F]=P;P[0]=(k-w)/m,P[1]=(R-A)/v,P[2]=(F-A)/v}b(this,bh,{x:w,y:A,width:m,height:v,lastPoint:E})}getOutlines(){l(this,Hr).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of l(this,Hr))t[3]?(e.push(..._(this,yn,ay).call(this,t)),_(this,yn,ax).call(this,t)):(_(this,yn,lx).call(this,t),e.push(..._(this,yn,ay).call(this,t)));return _(this,yn,ox).call(this,e)}}bh=new WeakMap,Hr=new WeakMap,Ti=new WeakMap,yn=new WeakSet,ox=function(e){const t=[],i=new Set;for(const c of e){const[u,d,p]=c;t.push([u,d,c],[u,p,c])}t.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=t.length;c<u;c+=2){const d=t[c][2],p=t[c+1][2];d.push(p),p.push(d),i.add(d),i.add(p)}const r=[];let o;for(;i.size>0;){const c=i.values().next().value;let[u,d,p,m,v]=c;i.delete(c);let w=u,A=d;for(o=[u,p],r.push(o);;){let S;if(i.has(m))S=m;else if(i.has(v))S=v;else break;i.delete(S),[u,d,p,m,v]=S,w!==u&&(o.push(w,A,u,A===d?d:p),w=u),A=A===d?p:d}o.push(w,A)}return new uC(r,l(this,bh))},bf=function(e){const t=l(this,Ti);let i=0,r=t.length-1;for(;i<=r;){const o=i+r>>1,c=t[o][0];if(c===e)return o;c<e?i=o+1:r=o-1}return r+1},ax=function([,e,t]){const i=_(this,yn,bf).call(this,e);l(this,Ti).splice(i,0,[e,t])},lx=function([,e,t]){const i=_(this,yn,bf).call(this,e);for(let r=i;r<l(this,Ti).length;r++){const[o,c]=l(this,Ti)[r];if(o!==e)break;if(o===e&&c===t){l(this,Ti).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[o,c]=l(this,Ti)[r];if(o!==e)break;if(o===e&&c===t){l(this,Ti).splice(r,1);return}}},ay=function(e){const[t,i,r]=e,o=[[t,i,r]],c=_(this,yn,bf).call(this,r);for(let u=0;u<c;u++){const[d,p]=l(this,Ti)[u];for(let m=0,v=o.length;m<v;m++){const[,w,A]=o[m];if(!(p<=w||A<=d)){if(w>=d){if(A>p)o[m][1]=p;else{if(v===1)return[];o.splice(m,1),m--,v--}continue}o[m][2]=d,A>p&&o.push([t,p,A])}}}return o};var xh,ql;class uC extends Qb{constructor(t,i){super();C(this,xh);C(this,ql);b(this,ql,t),b(this,xh,i)}toSVGPath(){const t=[];for(const i of l(this,ql)){let[r,o]=i;t.push(`M${r} ${o}`);for(let c=2;c<i.length;c+=2){const u=i[c],d=i[c+1];u===r?(t.push(`V${d}`),o=d):d===o&&(t.push(`H${u}`),r=u)}t.push("Z")}return t.join(" ")}serialize([t,i,r,o],c){const u=[],d=r-t,p=o-i;for(const m of l(this,ql)){const v=new Array(m.length);for(let w=0;w<m.length;w+=2)v[w]=t+m[w]*d,v[w+1]=o-m[w+1]*p;u.push(v)}return u}get box(){return l(this,xh)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}xh=new WeakMap,ql=new WeakMap;class ly extends Nf{newFreeDrawOutline(e,t,i,r,o,c){return new hC(e,t,i,r,o,c)}get classNamesForDrawing(){return["highlight","free"]}}class hC extends sx{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,i,r,o,c=0){return new ly(e,t,i,r,o,c)}}var Pi,aa,Kl,Rt,_h,Yl,Sh,Eh,Br,Ri,Ql,Ch,Ke,cy,uy,hy,yo,cx,wr;const En=class En{constructor({editor:e=null,uiManager:t=null}){C(this,Ke);C(this,Pi,null);C(this,aa,null);C(this,Kl);C(this,Rt,null);C(this,_h,!1);C(this,Yl,!1);C(this,Sh,null);C(this,Eh);C(this,Br,null);C(this,Ri,null);C(this,Ql);var i;e?(b(this,Yl,!1),b(this,Ql,Ce.HIGHLIGHT_COLOR),b(this,Sh,e)):(b(this,Yl,!0),b(this,Ql,Ce.HIGHLIGHT_DEFAULT_COLOR)),b(this,Ri,(e==null?void 0:e._uiManager)||t),b(this,Eh,l(this,Ri)._eventBus),b(this,Kl,(e==null?void 0:e.color)||((i=l(this,Ri))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),l(En,Ch)||b(En,Ch,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ze(this,"_keyboardManager",new Nh([[["Escape","mac+Escape"],En.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],En.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],En.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],En.prototype._moveToPrevious],[["Home","mac+Home"],En.prototype._moveToBeginning],[["End","mac+End"],En.prototype._moveToEnd]]))}renderButton(){const e=b(this,Pi,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=l(this,Ri)._signal;e.addEventListener("click",_(this,Ke,yo).bind(this),{signal:t}),e.addEventListener("keydown",_(this,Ke,hy).bind(this),{signal:t});const i=b(this,aa,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=l(this,Kl),e.append(i),e}renderMainDropdown(){const e=b(this,Rt,_(this,Ke,cy).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===l(this,Pi)){_(this,Ke,yo).call(this,e);return}const t=e.target.getAttribute("data-color");t&&_(this,Ke,uy).call(this,t,e)}_moveToNext(e){var t,i;if(!l(this,Ke,wr)){_(this,Ke,yo).call(this,e);return}if(e.target===l(this,Pi)){(t=l(this,Rt).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=l(this,Rt))==null?void 0:t.firstChild)||e.target===l(this,Pi)){l(this,Ke,wr)&&this._hideDropdownFromKeyboard();return}l(this,Ke,wr)||_(this,Ke,yo).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!l(this,Ke,wr)){_(this,Ke,yo).call(this,e);return}(t=l(this,Rt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,Ke,wr)){_(this,Ke,yo).call(this,e);return}(t=l(this,Rt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,Rt))==null||e.classList.add("hidden"),(t=l(this,Br))==null||t.abort(),b(this,Br,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,Yl)){if(!l(this,Ke,wr)){(e=l(this,Sh))==null||e.unselect();return}this.hideDropdown(),l(this,Pi).focus({preventScroll:!0,focusVisible:l(this,_h)})}}updateColor(e){if(l(this,aa)&&(l(this,aa).style.backgroundColor=e),!l(this,Rt))return;const t=l(this,Ri).highlightColors.values();for(const i of l(this,Rt).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=l(this,Pi))==null||e.remove(),b(this,Pi,null),b(this,aa,null),(t=l(this,Rt))==null||t.remove(),b(this,Rt,null)}};Pi=new WeakMap,aa=new WeakMap,Kl=new WeakMap,Rt=new WeakMap,_h=new WeakMap,Yl=new WeakMap,Sh=new WeakMap,Eh=new WeakMap,Br=new WeakMap,Ri=new WeakMap,Ql=new WeakMap,Ch=new WeakMap,Ke=new WeakSet,cy=function(){const e=document.createElement("div"),t=l(this,Ri)._signal;e.addEventListener("contextmenu",li,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of l(this,Ri).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",r),o.title=i,o.setAttribute("data-l10n-id",l(En,Ch)[i]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=r,o.setAttribute("aria-selected",r===l(this,Kl)),o.addEventListener("click",_(this,Ke,uy).bind(this,r),{signal:t}),e.append(o)}return e.addEventListener("keydown",_(this,Ke,hy).bind(this),{signal:t}),e},uy=function(e,t){t.stopPropagation(),l(this,Eh).dispatch("switchannotationeditorparams",{source:this,type:l(this,Ql),value:e})},hy=function(e){En._keyboardManager.exec(this,e)},yo=function(e){if(l(this,Ke,wr)){this.hideDropdown();return}if(b(this,_h,e.detail===0),l(this,Br)||(b(this,Br,new AbortController),window.addEventListener("pointerdown",_(this,Ke,cx).bind(this),{signal:l(this,Ri).combinedSignal(l(this,Br))})),l(this,Rt)){l(this,Rt).classList.remove("hidden");return}const t=b(this,Rt,_(this,Ke,cy).call(this));l(this,Pi).append(t)},cx=function(e){var t;(t=l(this,Rt))!=null&&t.contains(e.target)||this.hideDropdown()},wr=function(){return l(this,Rt)&&!l(this,Rt).classList.contains("hidden")},C(En,Ch,null);let Ff=En;var Zl,kh,Ds,la,Jl,ni,Th,Ph,ca,Li,rn,Tn,ec,Os,Lt,tc,ii,Rh,Pe,dy,xf,ux,hx,dx,fy,vo,oi,il,fx,_f,uu,px,gx,mx,yx,vx;const $e=class $e extends qe{constructor(t){super({...t,name:"highlightEditor"});C(this,Pe);C(this,Zl,null);C(this,kh,0);C(this,Ds);C(this,la,null);C(this,Jl,null);C(this,ni,null);C(this,Th,null);C(this,Ph,0);C(this,ca,null);C(this,Li,null);C(this,rn,null);C(this,Tn,!1);C(this,ec,null);C(this,Os);C(this,Lt,null);C(this,tc,"");C(this,ii);C(this,Rh,"");this.color=t.color||$e._defaultColor,b(this,ii,t.thickness||$e._defaultThickness),b(this,Os,t.opacity||$e._defaultOpacity),b(this,Ds,t.boxes||null),b(this,Rh,t.methodOfCreation||""),b(this,tc,t.text||""),this._isDraggable=!1,t.highlightId>-1?(b(this,Tn,!0),_(this,Pe,xf).call(this,t),_(this,Pe,vo).call(this)):l(this,Ds)&&(b(this,Zl,t.anchorNode),b(this,kh,t.anchorOffset),b(this,Th,t.focusNode),b(this,Ph,t.focusOffset),_(this,Pe,dy).call(this),_(this,Pe,vo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=$e.prototype;return ze(this,"_keyboardManager",new Nh([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,Tn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,ii),methodOfCreation:l(this,Rh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var r;qe.initialize(t,i),$e._defaultColor||($e._defaultColor=((r=i.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case Ce.HIGHLIGHT_DEFAULT_COLOR:$e._defaultColor=i;break;case Ce.HIGHLIGHT_THICKNESS:$e._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return l(this,ec)}updateParams(t,i){switch(t){case Ce.HIGHLIGHT_COLOR:_(this,Pe,ux).call(this,i);break;case Ce.HIGHLIGHT_THICKNESS:_(this,Pe,hx).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ce.HIGHLIGHT_DEFAULT_COLOR,$e._defaultColor],[Ce.HIGHLIGHT_THICKNESS,$e._defaultThickness]]}get propertiesToUpdate(){return[[Ce.HIGHLIGHT_COLOR,this.color||$e._defaultColor],[Ce.HIGHLIGHT_THICKNESS,l(this,ii)||$e._defaultThickness],[Ce.HIGHLIGHT_FREE,l(this,Tn)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(b(this,Jl,new Ff({editor:this})),t.addColorPicker(l(this,Jl))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(_(this,Pe,uu).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,_(this,Pe,uu).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){_(this,Pe,fy).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(_(this,Pe,vo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let i=!1;this.parent&&!t?_(this,Pe,fy).call(this):t&&(_(this,Pe,vo).call(this,t),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var o,c,u;const{drawLayer:i}=this.parent;let r;l(this,Tn)?(t=(t-this.rotation+360)%360,r=_(o=$e,oi,il).call(o,l(this,Li).box,t)):r=_(c=$e,oi,il).call(c,this,t),i.rotate(l(this,rn),t),i.rotate(l(this,Lt),t),i.updateBox(l(this,rn),r),i.updateBox(l(this,Lt),_(u=$e,oi,il).call(u,l(this,ni).box,t))}render(){if(this.div)return this.div;const t=super.render();l(this,tc)&&(t.setAttribute("aria-label",l(this,tc)),t.setAttribute("role","mark")),l(this,Tn)?t.classList.add("free"):this.div.addEventListener("keydown",_(this,Pe,fx).bind(this),{signal:this._uiManager._signal});const i=b(this,ca,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=l(this,la);const[r,o]=this.parentDimensions;return this.setDims(this.width*r,this.height*o),Mf(this,l(this,ca),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(l(this,Lt),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(l(this,Lt),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:_(this,Pe,_f).call(this,!0);break;case 1:case 3:_(this,Pe,_f).call(this,!1);break}}select(){var t,i;super.select(),l(this,Lt)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,Lt),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(l(this,Lt),"selected"))}unselect(){var t;super.unselect(),l(this,Lt)&&((t=this.parent)==null||t.drawLayer.removeClass(l(this,Lt),"selected"),l(this,Tn)||_(this,Pe,_f).call(this,!1))}get _mustFixPosition(){return!l(this,Tn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(l(this,rn),t),this.parent.drawLayer.show(l(this,Lt),t))}static startHighlighting(t,i,{target:r,x:o,y:c}){const{x:u,y:d,width:p,height:m}=r.getBoundingClientRect(),v=new AbortController,w=t.combinedSignal(v),A=E=>{E.preventDefault(),E.stopPropagation()},S=E=>{v.abort(),_(this,oi,yx).call(this,t,E)};window.addEventListener("blur",S,{signal:w}),window.addEventListener("pointerup",S,{signal:w}),window.addEventListener("pointerdown",A,{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",li,{signal:w}),r.addEventListener("pointermove",_(this,oi,mx).bind(this,t),{signal:w}),this._freeHighlight=new ly({x:o,y:c},[u,d,p,m],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,i,r){var E,P,k,R;let o=null;if(t instanceof $b){const{data:{quadPoints:F,rect:D,rotation:B,id:H,color:V,opacity:X,popupRef:ee},parent:{page:{pageNumber:se}}}=t;o=t={annotationType:Re.HIGHLIGHT,color:Array.from(V),opacity:X,quadPoints:F,boxes:null,pageIndex:se-1,rect:D.slice(0),rotation:B,id:H,deleted:!1,popupRef:ee}}else if(t instanceof Ky){const{data:{inkLists:F,rect:D,rotation:B,id:H,color:V,borderStyle:{rawWidth:X},popupRef:ee},parent:{page:{pageNumber:se}}}=t;o=t={annotationType:Re.HIGHLIGHT,color:Array.from(V),thickness:X,inkLists:F,boxes:null,pageIndex:se-1,rect:D.slice(0),rotation:B,id:H,deleted:!1,popupRef:ee}}const{color:c,quadPoints:u,inkLists:d,opacity:p}=t,m=await super.deserialize(t,i,r);m.color=ge.makeHexColor(...c),b(m,Os,p||1),d&&b(m,ii,t.thickness),m.annotationElementId=t.id||null,m._initialData=o;const[v,w]=m.pageDimensions,[A,S]=m.pageTranslation;if(u){const F=b(m,Ds,[]);for(let D=0;D<u.length;D+=8)F.push({x:(u[D]-A)/v,y:1-(u[D+1]-S)/w,width:(u[D+2]-u[D])/v,height:(u[D+1]-u[D+5])/w});_(E=m,Pe,dy).call(E),_(P=m,Pe,vo).call(P),m.rotate(m.rotation)}else if(d){b(m,Tn,!0);const F=d[0],D={x:F[0]-A,y:w-(F[1]-S)},B=new ly(D,[0,0,v,w],1,l(m,ii)/2,!0,.001);for(let X=0,ee=F.length;X<ee;X+=2)D.x=F[X]-A,D.y=w-(F[X+1]-S),B.add(D);const{id:H,clipPathId:V}=i.drawLayer.draw(B,m.color,m._defaultOpacity,!0);_(k=m,Pe,xf).call(k,{highlightOutlines:B.getOutlines(),highlightId:H,clipPathId:V}),_(R=m,Pe,vo).call(R)}return m}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),r=qe._colorManager.convert(this.color),o={annotationType:Re.HIGHLIGHT,color:r,opacity:l(this,Os),thickness:l(this,ii),quadPoints:_(this,Pe,px).call(this),outlines:_(this,Pe,gx).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:_(this,Pe,uu).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!_(this,Pe,vx).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Zl=new WeakMap,kh=new WeakMap,Ds=new WeakMap,la=new WeakMap,Jl=new WeakMap,ni=new WeakMap,Th=new WeakMap,Ph=new WeakMap,ca=new WeakMap,Li=new WeakMap,rn=new WeakMap,Tn=new WeakMap,ec=new WeakMap,Os=new WeakMap,Lt=new WeakMap,tc=new WeakMap,ii=new WeakMap,Rh=new WeakMap,Pe=new WeakSet,dy=function(){const t=new pA(l(this,Ds),.001);b(this,Li,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=l(this,Li).box;const i=new pA(l(this,Ds),.0025,.001,this._uiManager.direction==="ltr");b(this,ni,i.getOutlines());const{lastPoint:r}=l(this,ni).box;b(this,ec,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},xf=function({highlightOutlines:t,highlightId:i,clipPathId:r}){var v,w;if(b(this,Li,t),b(this,ni,t.getNewOutline(l(this,ii)/2+1.5,.0025)),i>=0)b(this,rn,i),b(this,la,r),this.parent.drawLayer.finalizeLine(i,t),b(this,Lt,this.parent.drawLayer.drawOutline(l(this,ni)));else if(this.parent){const A=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(l(this,rn),t),this.parent.drawLayer.updateBox(l(this,rn),_(v=$e,oi,il).call(v,l(this,Li).box,(A-this.rotation+360)%360)),this.parent.drawLayer.updateLine(l(this,Lt),l(this,ni)),this.parent.drawLayer.updateBox(l(this,Lt),_(w=$e,oi,il).call(w,l(this,ni).box,A))}const{x:c,y:u,width:d,height:p}=t.box;switch(this.rotation){case 0:this.x=c,this.y=u,this.width=d,this.height=p;break;case 90:{const[A,S]=this.parentDimensions;this.x=u,this.y=1-c,this.width=d*S/A,this.height=p*A/S;break}case 180:this.x=1-c,this.y=1-u,this.width=d,this.height=p;break;case 270:{const[A,S]=this.parentDimensions;this.x=1-u,this.y=c,this.width=d*S/A,this.height=p*A/S;break}}const{lastPoint:m}=l(this,ni).box;b(this,ec,[(m[0]-c)/d,(m[1]-u)/p])},ux=function(t){const i=(c,u)=>{var d,p,m;this.color=c,(d=this.parent)==null||d.drawLayer.changeColor(l(this,rn),c),(p=l(this,Jl))==null||p.updateColor(c),b(this,Os,u),(m=this.parent)==null||m.drawLayer.changeOpacity(l(this,rn),u)},r=this.color,o=l(this,Os);this.addCommands({cmd:i.bind(this,t,$e._defaultOpacity),undo:i.bind(this,r,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},hx=function(t){const i=l(this,ii),r=o=>{b(this,ii,o),_(this,Pe,dx).call(this,o)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},dx=function(t){if(!l(this,Tn))return;_(this,Pe,xf).call(this,{highlightOutlines:l(this,Li).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)},fy=function(){l(this,rn)===null||!this.parent||(this.parent.drawLayer.remove(l(this,rn)),b(this,rn,null),this.parent.drawLayer.remove(l(this,Lt)),b(this,Lt,null))},vo=function(t=this.parent){l(this,rn)===null&&({id:hn(this,rn)._,clipPathId:hn(this,la)._}=t.drawLayer.draw(l(this,Li),this.color,l(this,Os)),b(this,Lt,t.drawLayer.drawOutline(l(this,ni))),l(this,ca)&&(l(this,ca).style.clipPath=l(this,la)))},oi=new WeakSet,il=function({x:t,y:i,width:r,height:o},c){switch(c){case 90:return{x:1-i-o,y:t,width:o,height:r};case 180:return{x:1-t-r,y:1-i-o,width:r,height:o};case 270:return{x:i,y:1-t-r,width:o,height:r}}return{x:t,y:i,width:r,height:o}},fx=function(t){$e._keyboardManager.exec(this,t)},_f=function(t){if(!l(this,Zl))return;const i=window.getSelection();t?i.setPosition(l(this,Zl),l(this,kh)):i.setPosition(l(this,Th),l(this,Ph))},uu=function(){return l(this,Tn)?this.rotation:0},px=function(){if(l(this,Tn))return null;const[t,i]=this.pageDimensions,[r,o]=this.pageTranslation,c=l(this,Ds),u=new Float32Array(c.length*8);let d=0;for(const{x:p,y:m,width:v,height:w}of c){const A=p*t+r,S=(1-m-w)*i+o;u[d]=u[d+4]=A,u[d+1]=u[d+3]=S,u[d+2]=u[d+6]=A+v*t,u[d+5]=u[d+7]=S+w*i,d+=8}return u},gx=function(t){return l(this,Li).serialize(t,_(this,Pe,uu).call(this))},mx=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},yx=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},vx=function(t){const{color:i}=this._initialData;return t.color.some((r,o)=>r!==i[o])},C($e,oi),Ee($e,"_defaultColor",null),Ee($e,"_defaultOpacity",1),Ee($e,"_defaultThickness",12),Ee($e,"_type","highlight"),Ee($e,"_editorType",Re.HIGHLIGHT),Ee($e,"_freeHighlightId",-1),Ee($e,"_freeHighlight",null),Ee($e,"_freeHighlightClipId","");let Df=$e;var ua,ha,ts,js,si,da,fa,pa,zs,nc,ga,ma,Ur,te,wx,Ax,bx,xx,gy,_x,my,Sx,Ex,Cx,kx,Tx,wo,yy,vy,wy,Sf,Ef,sl,Ay,Cf,Ys,Px,by,Rx,Lx,xy,kf,hu;const lt=class lt extends qe{constructor(t){super({...t,name:"inkEditor"});C(this,te);C(this,ua,0);C(this,ha,0);C(this,ts,null);C(this,js,new Path2D);C(this,si,!1);C(this,da,null);C(this,fa,!1);C(this,pa,!1);C(this,zs,null);C(this,nc,null);C(this,ga,0);C(this,ma,0);C(this,Ur,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,i){qe.initialize(t,i)}static updateDefaultParams(t,i){switch(t){case Ce.INK_THICKNESS:lt._defaultThickness=i;break;case Ce.INK_COLOR:lt._defaultColor=i;break;case Ce.INK_OPACITY:lt._defaultOpacity=i/100;break}}updateParams(t,i){switch(t){case Ce.INK_THICKNESS:_(this,te,wx).call(this,i);break;case Ce.INK_COLOR:_(this,te,Ax).call(this,i);break;case Ce.INK_OPACITY:_(this,te,bx).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[Ce.INK_THICKNESS,lt._defaultThickness],[Ce.INK_COLOR,lt._defaultColor||qe._defaultLineColor],[Ce.INK_OPACITY,Math.round(lt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Ce.INK_THICKNESS,this.thickness||lt._defaultThickness],[Ce.INK_COLOR,this.color||lt._defaultColor||qe._defaultLineColor],[Ce.INK_OPACITY,Math.round(100*(this.opacity??lt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(_(this,te,Sf).call(this),_(this,te,Ef).call(this)),this.isAttachedToDOM||(this.parent.add(this),_(this,te,sl).call(this)),_(this,te,hu).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,ts)&&(clearTimeout(l(this,ts)),b(this,ts,null)),(t=l(this,zs))==null||t.disconnect(),b(this,zs,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,i]=this.parentDimensions,r=this.width*t,o=this.height*i;this.setDimensions(r,o)}enableEditMode(){l(this,si)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,_(this,te,yy).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),_(this,te,vy).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){l(this,si)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),b(this,si,!0),this.div.classList.add("disabled"),_(this,te,hu).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||l(this,si)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),_(this,te,_x).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),_(this,te,my).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),_(this,te,wy).call(this,t)}canvasPointerleave(t){_(this,te,wy).call(this,t)}get isResizable(){return!this.isEmpty()&&l(this,si)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,o,c,u]=_(this,te,xx).call(this);if(this.setAt(r,o,0,0),this.setDims(c,u),_(this,te,Sf).call(this),this.width){const[d,p]=this.parentDimensions;this.setAspectRatio(this.width*d,this.height*p),this.setAt(t*d,i*p,this.width*d,this.height*p),b(this,pa,!0),_(this,te,sl).call(this),this.setDims(this.width*d,this.height*p),_(this,te,wo).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return _(this,te,Ef).call(this),this.div}setDimensions(t,i){const r=Math.round(t),o=Math.round(i);if(l(this,ga)===r&&l(this,ma)===o)return;b(this,ga,r),b(this,ma,o),this.canvas.style.visibility="hidden";const[c,u]=this.parentDimensions;this.width=t/c,this.height=i/u,this.fixAndSetPosition(),l(this,si)&&_(this,te,Ay).call(this,t,i),_(this,te,sl).call(this),_(this,te,wo).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,i,r){var P,k,R;if(t instanceof Ky)return null;const o=await super.deserialize(t,i,r);o.thickness=t.thickness,o.color=ge.makeHexColor(...t.color),o.opacity=t.opacity;const[c,u]=o.pageDimensions,d=o.width*c,p=o.height*u,m=o.parentScale,v=t.thickness/2;b(o,si,!0),b(o,ga,Math.round(d)),b(o,ma,Math.round(p));const{paths:w,rect:A,rotation:S}=t;for(let{bezier:F}of w){F=_(P=lt,Ys,Rx).call(P,F,A,S);const D=[];o.paths.push(D);let B=m*(F[0]-v),H=m*(F[1]-v);for(let X=2,ee=F.length;X<ee;X+=6){const se=m*(F[X]-v),ie=m*(F[X+1]-v),ye=m*(F[X+2]-v),le=m*(F[X+3]-v),ce=m*(F[X+4]-v),ve=m*(F[X+5]-v);D.push([[B,H],[se,ie],[ye,le],[ce,ve]]),B=ce,H=ve}const V=_(this,Ys,Px).call(this,D);o.bezierPath2D.push(V)}const E=_(k=o,te,xy).call(k);return b(o,ha,Math.max(qe.MIN_SIZE,E[2]-E[0])),b(o,ua,Math.max(qe.MIN_SIZE,E[3]-E[1])),_(R=o,te,Ay).call(R,d,p),o}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),i=qe._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Re.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:_(this,te,Lx).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};ua=new WeakMap,ha=new WeakMap,ts=new WeakMap,js=new WeakMap,si=new WeakMap,da=new WeakMap,fa=new WeakMap,pa=new WeakMap,zs=new WeakMap,nc=new WeakMap,ga=new WeakMap,ma=new WeakMap,Ur=new WeakMap,te=new WeakSet,wx=function(t){const i=o=>{this.thickness=o,_(this,te,hu).call(this)},r=this.thickness;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Ax=function(t){const i=o=>{this.color=o,_(this,te,wo).call(this)},r=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},bx=function(t){const i=o=>{this.opacity=o,_(this,te,wo).call(this)};t/=100;const r=this.opacity;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},xx=function(){const{parentRotation:t,parentDimensions:[i,r]}=this;switch(t){case 90:return[0,r,r,i];case 180:return[i,r,i,r];case 270:return[i,0,r,i];default:return[0,0,i,r]}},gy=function(){const{ctx:t,color:i,opacity:r,thickness:o,parentScale:c,scaleFactor:u}=this;t.lineWidth=o*c/u,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${i}${IS(r)}`},_x=function(t,i){this.canvas.addEventListener("contextmenu",li,{signal:this._uiManager._signal}),_(this,te,vy).call(this),b(this,da,new AbortController);const r=this._uiManager.combinedSignal(l(this,da));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:r}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:r}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:r}),this.isEditing=!0,l(this,pa)||(b(this,pa,!0),_(this,te,sl).call(this),this.thickness||(this.thickness=lt._defaultThickness),this.color||(this.color=lt._defaultColor||qe._defaultLineColor),this.opacity??(this.opacity=lt._defaultOpacity)),this.currentPath.push([t,i]),b(this,fa,!1),_(this,te,gy).call(this),b(this,Ur,()=>{_(this,te,Cx).call(this),l(this,Ur)&&window.requestAnimationFrame(l(this,Ur))}),window.requestAnimationFrame(l(this,Ur))},my=function(t,i){const[r,o]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===r&&i===o)return;const c=this.currentPath;let u=l(this,js);if(c.push([t,i]),b(this,fa,!0),c.length<=2){u.moveTo(...c[0]),u.lineTo(t,i);return}c.length===3&&(b(this,js,u=new Path2D),u.moveTo(...c[0])),_(this,te,kx).call(this,u,...c.at(-3),...c.at(-2),t,i)},Sx=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);l(this,js).lineTo(...t)},Ex=function(t,i){b(this,Ur,null),t=Math.min(Math.max(t,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),_(this,te,my).call(this,t,i),_(this,te,Sx).call(this);let r;if(this.currentPath.length!==1)r=_(this,te,Tx).call(this);else{const p=[t,i];r=[[p,p.slice(),p.slice(),p]]}const o=l(this,js),c=this.currentPath;this.currentPath=[],b(this,js,new Path2D);const u=()=>{this.allRawPaths.push(c),this.paths.push(r),this.bezierPath2D.push(o),this._uiManager.rebuild(this)},d=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(_(this,te,Sf).call(this),_(this,te,Ef).call(this)),_(this,te,hu).call(this))};this.addCommands({cmd:u,undo:d,mustExec:!0})},Cx=function(){if(!l(this,fa))return;b(this,fa,!1);const t=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),r=i.map(u=>u[0]),o=i.map(u=>u[1]);Math.min(...r)-t,Math.max(...r)+t,Math.min(...o)-t,Math.max(...o)+t;const{ctx:c}=this;c.save(),c.clearRect(0,0,this.canvas.width,this.canvas.height);for(const u of this.bezierPath2D)c.stroke(u);c.stroke(l(this,js)),c.restore()},kx=function(t,i,r,o,c,u,d){const p=(i+o)/2,m=(r+c)/2,v=(o+u)/2,w=(c+d)/2;t.bezierCurveTo(p+2*(o-p)/3,m+2*(c-m)/3,v+2*(o-v)/3,w+2*(c-w)/3,v,w)},Tx=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const i=[];let r,[o,c]=t[0];for(r=1;r<t.length-2;r++){const[A,S]=t[r],[E,P]=t[r+1],k=(A+E)/2,R=(S+P)/2,F=[o+2*(A-o)/3,c+2*(S-c)/3],D=[k+2*(A-k)/3,R+2*(S-R)/3];i.push([[o,c],F,D,[k,R]]),[o,c]=[k,R]}const[u,d]=t[r],[p,m]=t[r+1],v=[o+2*(u-o)/3,c+2*(d-c)/3],w=[p+2*(u-p)/3,m+2*(d-m)/3];return i.push([[o,c],v,w,[p,m]]),i},wo=function(){if(this.isEmpty()){_(this,te,Cf).call(this);return}_(this,te,gy).call(this);const{canvas:t,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),_(this,te,Cf).call(this);for(const r of this.bezierPath2D)i.stroke(r)},yy=function(){if(l(this,nc))return;b(this,nc,new AbortController);const t=this._uiManager.combinedSignal(l(this,nc));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},vy=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},wy=function(t){var i;(i=l(this,da))==null||i.abort(),b(this,da,null),_(this,te,yy).call(this),l(this,ts)&&clearTimeout(l(this,ts)),b(this,ts,setTimeout(()=>{b(this,ts,null),this.canvas.removeEventListener("contextmenu",li)},10)),_(this,te,Ex).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Sf=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Ef=function(){b(this,zs,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),l(this,zs).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,zs))==null||t.disconnect(),b(this,zs,null)},{once:!0})},sl=function(){if(!l(this,pa))return;const[t,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*i),_(this,te,Cf).call(this)},Ay=function(t,i){const r=_(this,te,kf).call(this),o=(t-r)/l(this,ha),c=(i-r)/l(this,ua);this.scaleFactor=Math.min(o,c)},Cf=function(){const t=_(this,te,kf).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},Ys=new WeakSet,Px=function(t){const i=new Path2D;for(let r=0,o=t.length;r<o;r++){const[c,u,d,p]=t[r];r===0&&i.moveTo(...c),i.bezierCurveTo(u[0],u[1],d[0],d[1],p[0],p[1])}return i},by=function(t,i,r){const[o,c,u,d]=i;switch(r){case 0:for(let p=0,m=t.length;p<m;p+=2)t[p]+=o,t[p+1]=d-t[p+1];break;case 90:for(let p=0,m=t.length;p<m;p+=2){const v=t[p];t[p]=t[p+1]+o,t[p+1]=v+c}break;case 180:for(let p=0,m=t.length;p<m;p+=2)t[p]=u-t[p],t[p+1]+=c;break;case 270:for(let p=0,m=t.length;p<m;p+=2){const v=t[p];t[p]=u-t[p+1],t[p+1]=d-v}break;default:throw new Error("Invalid rotation")}return t},Rx=function(t,i,r){const[o,c,u,d]=i;switch(r){case 0:for(let p=0,m=t.length;p<m;p+=2)t[p]-=o,t[p+1]=d-t[p+1];break;case 90:for(let p=0,m=t.length;p<m;p+=2){const v=t[p];t[p]=t[p+1]-c,t[p+1]=v-o}break;case 180:for(let p=0,m=t.length;p<m;p+=2)t[p]=u-t[p],t[p+1]-=c;break;case 270:for(let p=0,m=t.length;p<m;p+=2){const v=t[p];t[p]=d-t[p+1],t[p+1]=u-v}break;default:throw new Error("Invalid rotation")}return t},Lx=function(t,i,r,o){var m,v;const c=[],u=this.thickness/2,d=t*i+u,p=t*r+u;for(const w of this.paths){const A=[],S=[];for(let E=0,P=w.length;E<P;E++){const[k,R,F,D]=w[E];if(k[0]===D[0]&&k[1]===D[1]&&P===1){const le=t*k[0]+d,ce=t*k[1]+p;A.push(le,ce),S.push(le,ce);break}const B=t*k[0]+d,H=t*k[1]+p,V=t*R[0]+d,X=t*R[1]+p,ee=t*F[0]+d,se=t*F[1]+p,ie=t*D[0]+d,ye=t*D[1]+p;E===0&&(A.push(B,H),S.push(B,H)),A.push(V,X,ee,se,ie,ye),S.push(V,X),E===P-1&&S.push(ie,ye)}c.push({bezier:_(m=lt,Ys,by).call(m,A,o,this.rotation),points:_(v=lt,Ys,by).call(v,S,o,this.rotation)})}return c},xy=function(){let t=1/0,i=-1/0,r=1/0,o=-1/0;for(const c of this.paths)for(const[u,d,p,m]of c){const v=ge.bezierBoundingBox(...u,...d,...p,...m);t=Math.min(t,v[0]),r=Math.min(r,v[1]),i=Math.max(i,v[2]),o=Math.max(o,v[3])}return[t,r,i,o]},kf=function(){return l(this,si)?Math.ceil(this.thickness*this.parentScale):0},hu=function(t=!1){if(this.isEmpty())return;if(!l(this,si)){_(this,te,wo).call(this);return}const i=_(this,te,xy).call(this),r=_(this,te,kf).call(this);b(this,ha,Math.max(qe.MIN_SIZE,i[2]-i[0])),b(this,ua,Math.max(qe.MIN_SIZE,i[3]-i[1]));const o=Math.ceil(r+l(this,ha)*this.scaleFactor),c=Math.ceil(r+l(this,ua)*this.scaleFactor),[u,d]=this.parentDimensions;this.width=o/u,this.height=c/d,this.setAspectRatio(o,c);const p=this.translationX,m=this.translationY;this.translationX=-i[0],this.translationY=-i[1],_(this,te,sl).call(this),_(this,te,wo).call(this),b(this,ga,o),b(this,ma,c),this.setDims(o,c);const v=t?r/this.scaleFactor/2:0;this.translate(p-this.translationX-v,m-this.translationY-v)},C(lt,Ys),Ee(lt,"_defaultColor",null),Ee(lt,"_defaultOpacity",1),Ee(lt,"_defaultThickness",1),Ee(lt,"_type","ink"),Ee(lt,"_editorType",Re.INK);let py=lt;var ut,qt,$r,Hs,Vr,ic,ns,Bs,is,Un,sc,je,du,fu,Tf,Sy,Mx,Pf,Ey,Rf,Ix,Nx;const mu=class mu extends qe{constructor(t){super({...t,name:"stampEditor"});C(this,je);C(this,ut,null);C(this,qt,null);C(this,$r,null);C(this,Hs,null);C(this,Vr,null);C(this,ic,"");C(this,ns,null);C(this,Bs,null);C(this,is,null);C(this,Un,!1);C(this,sc,!1);b(this,Hs,t.bitmapUrl),b(this,Vr,t.bitmapFile)}static initialize(t,i){qe.initialize(t,i)}static get supportedTypes(){return ze(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return ze(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(Re.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:c,height:u}=t||this.copyCanvas(null,null,!0).imageData,d=await r.guess({name:"altText",request:{data:o,width:c,height:u,channels:o.length/(c*u)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const p=d.output;return await this.setGuessedAltText(p),i&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var t,i;l(this,qt)&&(b(this,ut,null),this._uiManager.imageManager.deleteId(l(this,qt)),(t=l(this,ns))==null||t.remove(),b(this,ns,null),(i=l(this,Bs))==null||i.disconnect(),b(this,Bs,null),l(this,is)&&(clearTimeout(l(this,is)),b(this,is,null))),super.remove()}rebuild(){if(!this.parent){l(this,qt)&&_(this,je,Tf).call(this);return}super.rebuild(),this.div!==null&&(l(this,qt)&&l(this,ns)===null&&_(this,je,Tf).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(l(this,$r)||l(this,ut)||l(this,Hs)||l(this,Vr)||l(this,qt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),l(this,ut)?_(this,je,Sy).call(this):_(this,je,Tf).call(this),this.width&&!this.annotationElementId){const[r,o]=this.parentDimensions;this.setAt(t*r,i*o,this.width*r,this.height*o)}return this.div}copyCanvas(t,i,r=!1){var A;t||(t=224);const{width:o,height:c}=l(this,ut),u=new wm;let d=l(this,ut),p=o,m=c,v=null;if(i){if(o>i||c>i){const X=Math.min(i/o,i/c);p=Math.floor(o*X),m=Math.floor(c*X)}v=document.createElement("canvas");const S=v.width=Math.ceil(p*u.sx),E=v.height=Math.ceil(m*u.sy);l(this,Un)||(d=_(this,je,Pf).call(this,S,E));const P=v.getContext("2d");P.filter=this._uiManager.hcmFilter;let k="white",R="#cfcfd8";this._uiManager.hcmFilter!=="none"?R="black":(A=window.matchMedia)!=null&&A.call(window,"(prefers-color-scheme: dark)").matches&&(k="#8f8f9d",R="#42414d");const F=15,D=F*u.sx,B=F*u.sy,H=new OffscreenCanvas(D*2,B*2),V=H.getContext("2d");V.fillStyle=k,V.fillRect(0,0,D*2,B*2),V.fillStyle=R,V.fillRect(0,0,D,B),V.fillRect(D,B,D,B),P.fillStyle=P.createPattern(H,"repeat"),P.fillRect(0,0,S,E),P.drawImage(d,0,0,d.width,d.height,0,0,S,E)}let w=null;if(r){let S,E;if(u.symmetric&&d.width<t&&d.height<t)S=d.width,E=d.height;else if(d=l(this,ut),o>t||c>t){const R=Math.min(t/o,t/c);S=Math.floor(o*R),E=Math.floor(c*R),l(this,Un)||(d=_(this,je,Pf).call(this,S,E))}const k=new OffscreenCanvas(S,E).getContext("2d",{willReadFrequently:!0});k.drawImage(d,0,0,d.width,d.height,0,0,S,E),w={width:S,height:E,data:k.getImageData(0,0,S,E).data}}return{canvas:v,width:p,height:m,imageData:w}}getImageForAltText(){return l(this,ns)}static async deserialize(t,i,r){var E;let o=null;if(t instanceof Vb){const{data:{rect:P,rotation:k,id:R,structParent:F,popupRef:D},container:B,parent:{page:{pageNumber:H}}}=t,V=B.querySelector("canvas"),X=r.imageManager.getFromCanvas(B.id,V);V.remove();const ee=((E=await i._structTree.getAriaAttributes(`${jy}${R}`))==null?void 0:E.get("aria-label"))||"";o=t={annotationType:Re.STAMP,bitmapId:X.id,bitmap:X.bitmap,pageIndex:H-1,rect:P.slice(0),rotation:k,id:R,deleted:!1,accessibilityData:{decorative:!1,altText:ee},isSvg:!1,structParent:F,popupRef:D}}const c=await super.deserialize(t,i,r),{rect:u,bitmap:d,bitmapUrl:p,bitmapId:m,isSvg:v,accessibilityData:w}=t;m&&r.imageManager.isValidId(m)?(b(c,qt,m),d&&b(c,ut,d)):b(c,Hs,p),b(c,Un,v);const[A,S]=c.pageDimensions;return c.width=(u[2]-u[0])/A,c.height=(u[3]-u[1])/S,c.annotationElementId=t.id||null,w&&(c.altTextData=w),c._initialData=o,b(c,sc,!!o),c}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:Re.STAMP,bitmapId:l(this,qt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,Un),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=_(this,je,Rf).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:o,altText:c}=this.serializeAltText(!1);if(!o&&c&&(r.accessibilityData={type:"Figure",alt:c}),this.annotationElementId){const d=_(this,je,Nx).call(this,r);if(d.isSame)return null;d.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,i===null)return r;i.stamps||(i.stamps=new Map);const u=l(this,Un)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(l(this,qt)))i.stamps.set(l(this,qt),{area:u,serialized:r}),r.bitmap=_(this,je,Rf).call(this,!1);else if(l(this,Un)){const d=i.stamps.get(l(this,qt));u>d.area&&(d.area=u,d.serialized.bitmap.close(),d.serialized.bitmap=_(this,je,Rf).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};ut=new WeakMap,qt=new WeakMap,$r=new WeakMap,Hs=new WeakMap,Vr=new WeakMap,ic=new WeakMap,ns=new WeakMap,Bs=new WeakMap,is=new WeakMap,Un=new WeakMap,sc=new WeakMap,je=new WeakSet,du=function(t,i=!1){if(!t){this.remove();return}b(this,ut,t.bitmap),i||(b(this,qt,t.id),b(this,Un,t.isSvg)),t.file&&b(this,ic,t.file.name),_(this,je,Sy).call(this)},fu=function(){if(b(this,$r,null),this._uiManager.enableWaiting(!1),!!l(this,ns)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,ut)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,ut)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Tf=function(){if(l(this,qt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,qt)).then(r=>_(this,je,du).call(this,r,!0)).finally(()=>_(this,je,fu).call(this));return}if(l(this,Hs)){const r=l(this,Hs);b(this,Hs,null),this._uiManager.enableWaiting(!0),b(this,$r,this._uiManager.imageManager.getFromUrl(r).then(o=>_(this,je,du).call(this,o)).finally(()=>_(this,je,fu).call(this)));return}if(l(this,Vr)){const r=l(this,Vr);b(this,Vr,null),this._uiManager.enableWaiting(!0),b(this,$r,this._uiManager.imageManager.getFromFile(r).then(o=>_(this,je,du).call(this,o)).finally(()=>_(this,je,fu).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=mu.supportedTypesStr;const i=this._uiManager._signal;b(this,$r,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),_(this,je,du).call(this,o)}r()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>_(this,je,fu).call(this))),t.click()},Sy=function(){const{div:t}=this;let{width:i,height:r}=l(this,ut);const[o,c]=this.pageDimensions,u=.75;if(this.width)i=this.width*o,r=this.height*c;else if(i>u*o||r>u*c){const v=Math.min(u*o/i,u*c/r);i*=v,r*=v}const[d,p]=this.parentDimensions;this.setDims(i*d/o,r*p/c),this._uiManager.enableWaiting(!1);const m=b(this,ns,document.createElement("canvas"));m.setAttribute("role","img"),this.addContainer(m),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),_(this,je,Ey).call(this,i,r),_(this,je,Ix).call(this),l(this,sc)||(this.parent.addUndoableEditor(this),b(this,sc,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,ic)&&m.setAttribute("aria-label",l(this,ic))},Mx=function(t,i){var u;const[r,o]=this.parentDimensions;this.width=t/r,this.height=i/o,(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,l(this,is)!==null&&clearTimeout(l(this,is)),b(this,is,setTimeout(()=>{b(this,is,null),_(this,je,Ey).call(this,t,i)},200))},Pf=function(t,i){const{width:r,height:o}=l(this,ut);let c=r,u=o,d=l(this,ut);for(;c>2*t||u>2*i;){const p=c,m=u;c>2*t&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),u>2*i&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const v=new OffscreenCanvas(c,u);v.getContext("2d").drawImage(d,0,0,p,m,0,0,c,u),d=v.transferToImageBitmap()}return d},Ey=function(t,i){const r=new wm,o=Math.ceil(t*r.sx),c=Math.ceil(i*r.sy),u=l(this,ns);if(!u||u.width===o&&u.height===c)return;u.width=o,u.height=c;const d=l(this,Un)?l(this,ut):_(this,je,Pf).call(this,o,c),p=u.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(d,0,0,d.width,d.height,0,0,o,c)},Rf=function(t){if(t){if(l(this,Un)){const o=this._uiManager.imageManager.getSvgUrl(l(this,qt));if(o)return o}const i=document.createElement("canvas");return{width:i.width,height:i.height}=l(this,ut),i.getContext("2d").drawImage(l(this,ut),0,0),i.toDataURL()}if(l(this,Un)){const[i,r]=this.pageDimensions,o=Math.round(this.width*i*qr.PDF_TO_CSS_UNITS),c=Math.round(this.height*r*qr.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(o,c);return u.getContext("2d").drawImage(l(this,ut),0,0,l(this,ut).width,l(this,ut).height,0,0,o,c),u.transferToImageBitmap()}return structuredClone(l(this,ut))},Ix=function(){this._uiManager._signal&&(b(this,Bs,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&_(this,je,Mx).call(this,i.width,i.height)})),l(this,Bs).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=l(this,Bs))==null||t.disconnect(),b(this,Bs,null)},{once:!0}))},Nx=function(t){var p;const{rect:i,pageIndex:r,accessibilityData:{altText:o}}=this._initialData,c=t.rect.every((m,v)=>Math.abs(m-i[v])<1),u=t.pageIndex===r,d=(((p=t.accessibilityData)==null?void 0:p.alt)||"")===o;return{isSame:c&&u&&d,isSameAltText:d}},Ee(mu,"_type","stamp"),Ee(mu,"_editorType",Re.STAMP);let _y=mu;var ya,rc,ss,Wr,Us,$n,Gr,oc,ac,on,$s,Ae,Xr,Kt,Fx,ky,Ty,Py,Lf;const yi=class yi{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:r,accessibilityManager:o,annotationLayer:c,drawLayer:u,textLayer:d,viewport:p,l10n:m}){C(this,Kt);C(this,ya);C(this,rc,!1);C(this,ss,null);C(this,Wr,null);C(this,Us,null);C(this,$n,new Map);C(this,Gr,!1);C(this,oc,!1);C(this,ac,!1);C(this,on,null);C(this,$s,null);C(this,Ae);const v=[...l(yi,Xr).values()];if(!yi._initialized){yi._initialized=!0;for(const w of v)w.initialize(m,e)}e.registerEditorTypes(v),b(this,Ae,e),this.pageIndex=t,this.div=i,b(this,ya,o),b(this,ss,c),this.viewport=p,b(this,on,d),this.drawLayer=u,this._structTree=r,l(this,Ae).addLayer(this)}get isEmpty(){return l(this,$n).size===0}get isInvisible(){return this.isEmpty&&l(this,Ae).getMode()===Re.NONE}updateToolbar(e){l(this,Ae).updateToolbar(e)}updateMode(e=l(this,Ae).getMode()){switch(_(this,Kt,Lf).call(this),e){case Re.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Re.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Re.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of l(yi,Xr).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,on))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(l(this,Ae).getMode()!==Re.INK)return;if(!e){for(const i of l(this,$n).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){l(this,Ae).setEditingState(e)}addCommands(e){l(this,Ae).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,ss))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of l(this,$n).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(l(this,Ae).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!l(this,ss))return;const t=l(this,ss).getEditableAnnotations();for(const i of t){if(i.hide(),l(this,Ae).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){var r;b(this,ac,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const o of l(this,$n).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){e.set(o.annotationElementId,o);continue}else t.set(o.annotationElementId,o);(r=this.getEditableAnnotation(o.annotationElementId))==null||r.show(),o.remove()}if(l(this,ss)){const o=l(this,ss).getEditableAnnotations();for(const c of o){const{id:u}=c.data;if(l(this,Ae).isDeletedAnnotationElement(u))continue;let d=t.get(u);if(d){d.resetAnnotationElement(c),d.show(!1),c.show();continue}d=e.get(u),d&&(l(this,Ae).addChangedExistingAnnotation(d),d.renderAnnotationElement(c)&&d.show(!1)),c.show()}}_(this,Kt,Lf).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const o of l(yi,Xr).values())i.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),b(this,ac,!1)}getEditableAnnotation(e){var t;return((t=l(this,ss))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,Ae).getActive()!==e&&l(this,Ae).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,on))!=null&&e.div&&!l(this,$s)){b(this,$s,new AbortController);const t=l(this,Ae).combinedSignal(l(this,$s));l(this,on).div.addEventListener("pointerdown",_(this,Kt,Fx).bind(this),{signal:t}),l(this,on).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,on))!=null&&e.div&&l(this,$s)&&(l(this,$s).abort(),b(this,$s,null),l(this,on).div.classList.remove("highlighting"))}enableClick(){if(l(this,Wr))return;b(this,Wr,new AbortController);const e=l(this,Ae).combinedSignal(l(this,Wr));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=l(this,Wr))==null||e.abort(),b(this,Wr,null)}attach(e){l(this,$n).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,Ae).isDeletedAnnotationElement(t)&&l(this,Ae).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,$n).delete(e.id),(t=l(this,ya))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,ac)&&e.annotationElementId&&l(this,Ae).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,Ae).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,l(this,oc)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,Ae).addDeletedAnnotationElement(e.annotationElementId),qe.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,Ae).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),l(this,Ae).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,Us)&&(e._focusEventsAllowed=!1,b(this,Us,setTimeout(()=>{b(this,Us,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,Ae)._signal}),t.focus())},0))),e._structTreeParentId=(i=l(this,ya))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return l(this,Ae).getId()}combinedSignal(e){return l(this,Ae).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,Kt,ky))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){l(this,Ae).updateToolbar(e),l(this,Ae).updateMode(e);const{offsetX:i,offsetY:r}=_(this,Kt,Py).call(this),o=this.getNextId(),c=_(this,Kt,Ty).call(this,{parent:this,id:o,x:i,y:r,uiManager:l(this,Ae),isCentered:!0,...t});c&&this.add(c)}async deserialize(e){var t;return await((t=l(yi,Xr).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,Ae)))||null}createAndAddNewEditor(e,t,i={}){const r=this.getNextId(),o=_(this,Kt,Ty).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:l(this,Ae),isCentered:t,...i});return o&&this.add(o),o}addNewEditor(){this.createAndAddNewEditor(_(this,Kt,Py).call(this),!0)}setSelected(e){l(this,Ae).setSelected(e)}toggleSelected(e){l(this,Ae).toggleSelected(e)}unselect(e){l(this,Ae).unselect(e)}pointerup(e){const{isMac:t}=gn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&l(this,Gr)){if(b(this,Gr,!1),!l(this,rc)){b(this,rc,!0);return}if(l(this,Ae).getMode()===Re.STAMP){l(this,Ae).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(l(this,Ae).getMode()===Re.HIGHLIGHT&&this.enableTextSelection(),l(this,Gr)){b(this,Gr,!1);return}const{isMac:t}=gn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;b(this,Gr,!0);const i=l(this,Ae).getActive();b(this,rc,!i||i.isEmpty())}findNewParent(e,t,i){const r=l(this,Ae).findParent(t,i);return r===null||r===this?!1:(r.changeParent(e),!0)}destroy(){var e,t;((e=l(this,Ae).getActive())==null?void 0:e.parent)===this&&(l(this,Ae).commitOrRemove(),l(this,Ae).setActiveEditor(null)),l(this,Us)&&(clearTimeout(l(this,Us)),b(this,Us,null));for(const i of l(this,$n).values())(t=l(this,ya))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,l(this,$n).clear(),l(this,Ae).removeLayer(this)}render({viewport:e}){this.viewport=e,va(this.div,e);for(const t of l(this,Ae).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,Ae).commitOrRemove(),_(this,Kt,Lf).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,va(this.div,{rotation:i}),t!==i)for(const r of l(this,$n).values())r.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,Ae).viewParameters.realScale}};ya=new WeakMap,rc=new WeakMap,ss=new WeakMap,Wr=new WeakMap,Us=new WeakMap,$n=new WeakMap,Gr=new WeakMap,oc=new WeakMap,ac=new WeakMap,on=new WeakMap,$s=new WeakMap,Ae=new WeakMap,Xr=new WeakMap,Kt=new WeakSet,Fx=function(e){l(this,Ae).unselectAll();const{target:t}=e;if(t===l(this,on).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,on).div.contains(t)){const{isMac:i}=gn.platform;if(e.button!==0||e.ctrlKey&&i)return;l(this,Ae).showAllEditors("highlight",!0,!0),l(this,on).div.classList.add("free"),this.toggleDrawing(),Df.startHighlighting(this,l(this,Ae).direction==="ltr",{target:l(this,on).div,x:e.x,y:e.y}),l(this,on).div.addEventListener("pointerup",()=>{l(this,on).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,Ae)._signal}),e.preventDefault()}},ky=function(){return l(yi,Xr).get(l(this,Ae).getMode())},Ty=function(e){const t=l(this,Kt,ky);return t?new t.prototype.constructor(e):null},Py=function(){const{x:e,y:t,width:i,height:r}=this.div.getBoundingClientRect(),o=Math.max(0,e),c=Math.max(0,t),u=Math.min(window.innerWidth,e+i),d=Math.min(window.innerHeight,t+r),p=(o+u)/2-e,m=(c+d)/2-t,[v,w]=this.viewport.rotation%180===0?[p,m]:[m,p];return{offsetX:v,offsetY:w}},Lf=function(){b(this,oc,!0);for(const e of l(this,$n).values())e.isEmpty()&&e.remove();b(this,oc,!1)},Ee(yi,"_initialized",!1),C(yi,Xr,new Map([ry,py,_y,Df].map(e=>[e._editorType,e])));let Cy=yi;var rs,Lh,xt,Vs,Mh,Ly,_a,My,Dx;const Wt=class Wt{constructor({pageIndex:e}){C(this,_a);C(this,rs,null);C(this,Lh,0);C(this,xt,new Map);C(this,Vs,new Map);this.pageIndex=e}setParent(e){if(!l(this,rs)){b(this,rs,e);return}if(l(this,rs)!==e){if(l(this,xt).size>0)for(const t of l(this,xt).values())t.remove(),e.append(t);b(this,rs,e)}}static get _svgFactory(){return ze(this,"_svgFactory",new qy)}draw(e,t,i,r=!1){const o=hn(this,Lh)._++,c=_(this,_a,My).call(this,e.box);c.classList.add(...e.classNamesForDrawing);const u=Wt._svgFactory.createElement("defs");c.append(u);const d=Wt._svgFactory.createElement("path");u.append(d);const p=`path_p${this.pageIndex}_${o}`;d.setAttribute("id",p),d.setAttribute("d",e.toSVGPath()),r&&l(this,Vs).set(o,d);const m=_(this,_a,Dx).call(this,u,p),v=Wt._svgFactory.createElement("use");return c.append(v),c.setAttribute("fill",t),c.setAttribute("fill-opacity",i),v.setAttribute("href",`#${p}`),l(this,xt).set(o,c),{id:o,clipPathId:`url(#${m})`}}drawOutline(e){const t=hn(this,Lh)._++,i=_(this,_a,My).call(this,e.box);i.classList.add(...e.classNamesForOutlining);const r=Wt._svgFactory.createElement("defs");i.append(r);const o=Wt._svgFactory.createElement("path");r.append(o);const c=`path_p${this.pageIndex}_${t}`;o.setAttribute("id",c),o.setAttribute("d",e.toSVGPath()),o.setAttribute("vector-effect","non-scaling-stroke");let u;if(e.mustRemoveSelfIntersections){const m=Wt._svgFactory.createElement("mask");r.append(m),u=`mask_p${this.pageIndex}_${t}`,m.setAttribute("id",u),m.setAttribute("maskUnits","objectBoundingBox");const v=Wt._svgFactory.createElement("rect");m.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const w=Wt._svgFactory.createElement("use");m.append(w),w.setAttribute("href",`#${c}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const d=Wt._svgFactory.createElement("use");i.append(d),d.setAttribute("href",`#${c}`),u&&d.setAttribute("mask",`url(#${u})`);const p=d.cloneNode();return i.append(p),d.classList.add("mainOutline"),p.classList.add("secondaryOutline"),l(this,xt).set(t,i),t}finalizeLine(e,t){const i=l(this,Vs).get(e);l(this,Vs).delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){l(this,xt).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){l(this,Vs).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var i;_(i=Wt,Mh,Ly).call(i,l(this,xt).get(e),t)}show(e,t){l(this,xt).get(e).classList.toggle("hidden",!t)}rotate(e,t){l(this,xt).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){l(this,xt).get(e).setAttribute("fill",t)}changeOpacity(e,t){l(this,xt).get(e).setAttribute("fill-opacity",t)}addClass(e,t){l(this,xt).get(e).classList.add(t)}removeClass(e,t){l(this,xt).get(e).classList.remove(t)}getSVGRoot(e){return l(this,xt).get(e)}remove(e){l(this,Vs).delete(e),l(this,rs)!==null&&(l(this,xt).get(e).remove(),l(this,xt).delete(e))}destroy(){b(this,rs,null);for(const e of l(this,xt).values())e.remove();l(this,xt).clear(),l(this,Vs).clear()}};rs=new WeakMap,Lh=new WeakMap,xt=new WeakMap,Vs=new WeakMap,Mh=new WeakSet,Ly=function(e,{x:t=0,y:i=0,width:r=1,height:o=1}={}){const{style:c}=e;c.top=`${100*i}%`,c.left=`${100*t}%`,c.width=`${100*r}%`,c.height=`${100*o}%`},_a=new WeakSet,My=function(e){var i;const t=Wt._svgFactory.create(1,1,!0);return l(this,rs).append(t),t.setAttribute("aria-hidden",!0),_(i=Wt,Mh,Ly).call(i,t,e),t},Dx=function(e,t){const i=Wt._svgFactory.createElement("clipPath");e.append(i);const r=`clip_${t}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const o=Wt._svgFactory.createElement("use");return i.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),r},C(Wt,Mh);let Ry=Wt;var dC=Te.AbortException,fC=Te.AnnotationEditorLayer,pC=Te.AnnotationEditorParamsType,gC=Te.AnnotationEditorType,mC=Te.AnnotationEditorUIManager,Ox=Te.AnnotationLayer,jx=Te.AnnotationMode,yC=Te.ColorPicker,vC=Te.DOMSVGFactory,wC=Te.DrawLayer,AC=Te.FeatureTest,Yy=Te.GlobalWorkerOptions,bC=Te.ImageKind,xC=Te.InvalidPDFException,_C=Te.MissingPDFException,SC=Te.OPS,EC=Te.OutputScale,CC=Te.PDFDataRangeTransport,kC=Te.PDFDateString,TC=Te.PDFWorker,PC=Te.PasswordResponses,RC=Te.PermissionFlag,LC=Te.PixelsPerInch,MC=Te.RenderingCancelledException,zx=Te.TextLayer,IC=Te.UnexpectedResponseException,NC=Te.Util,FC=Te.VerbosityLevel,DC=Te.XfaLayer,OC=Te.build,jC=Te.createValidAbsoluteUrl,zC=Te.fetchData,Hx=Te.getDocument,HC=Te.getFilenameFromUrl,BC=Te.getPdfFilenameFromUrl,UC=Te.getXfaPageViewport,$C=Te.isDataScheme,VC=Te.isPdfFile,WC=Te.noContextMenu,GC=Te.normalizeUnicode,XC=Te.setLayerDimensions,qC=Te.shadow,KC=Te.version;const YC=Object.freeze(Object.defineProperty({__proto__:null,AbortException:dC,AnnotationEditorLayer:fC,AnnotationEditorParamsType:pC,AnnotationEditorType:gC,AnnotationEditorUIManager:mC,AnnotationLayer:Ox,AnnotationMode:jx,ColorPicker:yC,DOMSVGFactory:vC,DrawLayer:wC,FeatureTest:AC,GlobalWorkerOptions:Yy,ImageKind:bC,InvalidPDFException:xC,MissingPDFException:_C,OPS:SC,OutputScale:EC,PDFDataRangeTransport:CC,PDFDateString:kC,PDFWorker:TC,PasswordResponses:PC,PermissionFlag:RC,PixelsPerInch:LC,RenderingCancelledException:MC,TextLayer:zx,UnexpectedResponseException:IC,Util:NC,VerbosityLevel:FC,XfaLayer:DC,build:OC,createValidAbsoluteUrl:jC,fetchData:zC,getDocument:Hx,getFilenameFromUrl:HC,getPdfFilenameFromUrl:BC,getXfaPageViewport:UC,isDataScheme:$C,isPdfFile:VC,noContextMenu:WC,normalizeUnicode:GC,setLayerDimensions:XC,shadow:qC,version:KC},Symbol.toStringTag,{value:"Module"}));var Ot=function(f,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return f.concat(o||Array.prototype.slice.call(e))},QC=["onCopy","onCut","onPaste"],ZC=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],JC=["onFocus","onBlur"],ek=["onInput","onInvalid","onReset","onSubmit"],tk=["onLoad","onError"],nk=["onKeyDown","onKeyPress","onKeyUp"],ik=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],sk=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],rk=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],ok=["onSelect"],ak=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],lk=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],ck=["onScroll"],uk=["onWheel"],hk=["onAnimationStart","onAnimationEnd","onAnimationIteration"],dk=["onTransitionEnd"],fk=["onToggle"],pk=["onChange"],gk=Ot(Ot(Ot(Ot(Ot(Ot(Ot(Ot(Ot(Ot(Ot(Ot(Ot(Ot(Ot(Ot(Ot(Ot([],QC,!0),ZC,!0),JC,!0),ek,!0),tk,!0),nk,!0),ik,!0),sk,!0),rk,!0),ok,!0),ak,!0),lk,!0),ck,!0),uk,!0),hk,!0),dk,!0),pk,!0),fk,!0);function Bx(f,e){var t={};return gk.forEach(function(i){var r=f[i];r&&(e?t[i]=function(o){return r(o,e(i))}:t[i]=r)}),t}function Dh(f){var e=!1,t=new Promise(function(i,r){f.then(function(o){return!e&&i(o)}).catch(function(o){return!e&&r(o)})});return{promise:t,cancel:function(){e=!0}}}function Ux(f){var e,t,i="";if(typeof f=="string"||typeof f=="number")i+=f;else if(typeof f=="object")if(Array.isArray(f)){var r=f.length;for(e=0;e<r;e++)f[e]&&(t=Ux(f[e]))&&(i&&(i+=" "),i+=t)}else for(t in f)f[t]&&(i&&(i+=" "),i+=t);return i}function lp(){for(var f,e,t=0,i="",r=arguments.length;t<r;t++)(f=arguments[t])&&(e=Ux(f))&&(i&&(i+=" "),i+=e);return i}var mk="Invariant failed";function Qe(f,e){if(!f)throw new Error(mk)}var fm,gA;function yk(){if(gA)return fm;gA=1;var f=function(){};return fm=f,fm}var vk=yk();const an=MA(vk);var mA=Object.prototype.hasOwnProperty;function yA(f,e,t){for(t of f.keys())if(ll(t,e))return t}function ll(f,e){var t,i,r;if(f===e)return!0;if(f&&e&&(t=f.constructor)===e.constructor){if(t===Date)return f.getTime()===e.getTime();if(t===RegExp)return f.toString()===e.toString();if(t===Array){if((i=f.length)===e.length)for(;i--&&ll(f[i],e[i]););return i===-1}if(t===Set){if(f.size!==e.size)return!1;for(i of f)if(r=i,r&&typeof r=="object"&&(r=yA(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(f.size!==e.size)return!1;for(i of f)if(r=i[0],r&&typeof r=="object"&&(r=yA(e,r),!r)||!ll(i[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)f=new Uint8Array(f),e=new Uint8Array(e);else if(t===DataView){if((i=f.byteLength)===e.byteLength)for(;i--&&f.getInt8(i)===e.getInt8(i););return i===-1}if(ArrayBuffer.isView(f)){if((i=f.byteLength)===e.byteLength)for(;i--&&f[i]===e[i];);return i===-1}if(!t||typeof f=="object"){i=0;for(t in f)if(mA.call(f,t)&&++i&&!mA.call(e,t)||!(t in e)||!ll(f[t],e[t]))return!1;return Object.keys(e).length===i}}return f!==f&&e!==e}const $x=Q.createContext(null);function cl({children:f,type:e}){return L.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:f})}const wk="noopener noreferrer nofollow";class Ak{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Qe(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Qe(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{Qe(this.pdfDocument),Qe(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Qe(Array.isArray(t));const i=t[0];new Promise(r=>{Qe(this.pdfDocument),i instanceof Object?this.pdfDocument.getPageIndex(i).then(o=>{r(o)}).catch(()=>{Qe(!1)}):typeof i=="number"?r(i):Qe(!1)}).then(r=>{const o=r+1;Qe(this.pdfViewer),Qe(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:o})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Qe(this.pdfViewer),Qe(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,i){e.href=t,e.rel=this.externalLinkRel||wk,e.target=i?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const vA={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},cp=typeof window<"u",Vx=cp&&window.location.protocol==="file:";function bk(f){return typeof f<"u"}function go(f){return bk(f)&&f!==null}function xk(f){return typeof f=="string"}function _k(f){return f instanceof ArrayBuffer}function Sk(f){return Qe(cp),f instanceof Blob}function Iy(f){return xk(f)&&/^data:/.test(f)}function wA(f){Qe(Iy(f));const[e="",t=""]=f.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function Ek(){return cp&&window.devicePixelRatio||1}const Wx="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function AA(){an(!Vx,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${Wx}`)}function Ck(){an(!Vx,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${Wx}`)}function ba(f){f!=null&&f.cancel&&f.cancel()}function Ny(f,e){return Object.defineProperty(f,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(f,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(f,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(f,"originalHeight",{get(){return this.view[3]},configurable:!0}),f}function kk(f){return f.name==="RenderingCancelledException"}function Tk(f){return new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return t(new Error("Error while reading a file."));e(i.result)},i.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:o}=r.target;if(!o)return t(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},i.readAsArrayBuffer(f)})}function Pk(f,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return f}}function lc(){return Q.useReducer(Pk,{value:void 0,error:void 0})}var Rk=function(f,e,t,i){function r(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function u(m){try{p(i.next(m))}catch(v){c(v)}}function d(m){try{p(i.throw(m))}catch(v){c(v)}}function p(m){m.done?o(m.value):r(m.value).then(u,d)}p((i=i.apply(f,e||[])).next())})},bA=function(f,e){var t={};for(var i in f)Object.prototype.hasOwnProperty.call(f,i)&&e.indexOf(i)<0&&(t[i]=f[i]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(f);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(f,i[r])&&(t[i[r]]=f[i[r]]);return t};const{PDFDataRangeTransport:Lk}=YC,Mk=(f,e)=>{switch(e){case vA.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");f(t);break}case vA.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");f(t);break}}};function xA(f){return typeof f=="object"&&f!==null&&("data"in f||"range"in f||"url"in f)}const Ik=Q.forwardRef(function(e,t){var{children:i,className:r,error:o="Failed to load PDF file.",externalLinkRel:c,externalLinkTarget:u,file:d,inputRef:p,imageResourcesPath:m,loading:v="Loading PDF…",noData:w="No PDF file specified.",onItemClick:A,onLoadError:S,onLoadProgress:E,onLoadSuccess:P,onPassword:k=Mk,onSourceError:R,onSourceSuccess:F,options:D,renderMode:B,rotate:H}=e,V=bA(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[X,ee]=lc(),{value:se,error:ie}=X,[ye,le]=lc(),{value:ce,error:ve}=ye,fe=Q.useRef(new Ak),Z=Q.useRef([]),U=Q.useRef(void 0),G=Q.useRef(void 0);d&&d!==U.current&&xA(d)&&(an(!ll(d,U.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),U.current=d),D&&D!==G.current&&(an(!ll(D,G.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),G.current=D);const W=Q.useRef({scrollPageIntoView:Ue=>{const{dest:it,pageNumber:Et,pageIndex:gt=Et-1}=Ue;if(A){A({dest:it,pageIndex:gt,pageNumber:Et});return}const Ni=Z.current[gt];if(Ni){Ni.scrollIntoView();return}an(!1,`An internal link leading to page ${Et} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});Q.useImperativeHandle(t,()=>({linkService:fe,pages:Z,viewer:W}),[]);function N(){F&&F()}function $(){ie&&(an(!1,ie.toString()),R&&R(ie))}function ue(){ee({type:"RESET"})}Q.useEffect(ue,[d,ee]);const be=Q.useCallback(()=>Rk(this,void 0,void 0,function*(){if(!d)return null;if(typeof d=="string")return Iy(d)?{data:wA(d)}:(AA(),{url:d});if(d instanceof Lk)return{range:d};if(_k(d))return{data:d};if(cp&&Sk(d))return{data:yield Tk(d)};if(Qe(typeof d=="object"),Qe(xA(d)),"url"in d&&typeof d.url=="string"){if(Iy(d.url)){const{url:Ue}=d,it=bA(d,["url"]),Et=wA(Ue);return Object.assign({data:Et},it)}AA()}return d}),[d]);Q.useEffect(()=>{const Ue=Dh(be());return Ue.promise.then(it=>{ee({type:"RESOLVE",value:it})}).catch(it=>{ee({type:"REJECT",error:it})}),()=>{ba(Ue)}},[be,ee]),Q.useEffect(()=>{if(!(typeof se>"u")){if(se===!1){$();return}N()}},[se]);function ke(){ce&&(P&&P(ce),Z.current=new Array(ce.numPages),fe.current.setDocument(ce))}function we(){ve&&(an(!1,ve.toString()),S&&S(ve))}Q.useEffect(function(){le({type:"RESET"})},[le,se]),Q.useEffect(function(){if(!se)return;const it=D?Object.assign(Object.assign({},se),D):se,Et=Hx(it);E&&(Et.onProgress=E),k&&(Et.onPassword=k);const gt=Et,Ni=gt.promise.then(Zs=>{le({type:"RESOLVE",value:Zs})}).catch(Zs=>{gt.destroyed||le({type:"REJECT",error:Zs})});return()=>{Ni.finally(()=>gt.destroy())}},[D,le,se]),Q.useEffect(()=>{if(!(typeof ce>"u")){if(ce===!1){we();return}ke()}},[ce]),Q.useEffect(function(){fe.current.setViewer(W.current),fe.current.setExternalLinkRel(c),fe.current.setExternalLinkTarget(u)},[c,u]);const me=Q.useCallback((Ue,it)=>{Z.current[Ue]=it},[]),Le=Q.useCallback(Ue=>{delete Z.current[Ue]},[]),Oe=Q.useMemo(()=>({imageResourcesPath:m,linkService:fe.current,onItemClick:A,pdf:ce,registerPage:me,renderMode:B,rotate:H,unregisterPage:Le}),[m,A,ce,me,B,H,Le]),Ne=Q.useMemo(()=>Bx(V,()=>ce),[V,ce]);function Ii(){return L.jsx($x.Provider,{value:Oe,children:i})}function Qs(){return d?ce==null?L.jsx(cl,{type:"loading",children:typeof v=="function"?v():v}):ce===!1?L.jsx(cl,{type:"error",children:typeof o=="function"?o():o}):Ii():L.jsx(cl,{type:"no-data",children:typeof w=="function"?w():w})}return L.jsx("div",Object.assign({className:lp("react-pdf__Document",r),ref:p,style:{"--scale-factor":"1"}},Ne,{children:Qs()}))});function Gx(){return Q.useContext($x)}function Xx(){for(var f=[],e=0;e<arguments.length;e++)f[e]=arguments[e];var t=f.filter(Boolean);if(t.length<=1){var i=t[0];return i||null}return function(o){t.forEach(function(c){typeof c=="function"?c(o):c&&(c.current=o)})}}const qx=Q.createContext(null),Kx={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Nk=/^H(\d+)$/;function Fk(f){return f in Kx}function up(f){return"children"in f}function Yx(f){return up(f)?f.children.length===1&&0 in f.children&&"id"in f.children[0]:!1}function Dk(f){const e={};if(up(f)){const{role:t}=f,i=t.match(Nk);if(i)e.role="heading",e["aria-level"]=Number(i[1]);else if(Fk(t)){const r=Kx[t];r&&(e.role=r)}}return e}function Qx(f){const e={};if(up(f)){if(f.alt!==void 0&&(e["aria-label"]=f.alt),f.lang!==void 0&&(e.lang=f.lang),Yx(f)){const[t]=f.children;if(t){const i=Qx(t);return Object.assign(Object.assign({},e),i)}}}else"id"in f&&(e["aria-owns"]=f.id);return e}function Ok(f){return f?Object.assign(Object.assign({},Dk(f)),Qx(f)):null}function Zx({className:f,node:e}){const t=Q.useMemo(()=>Ok(e),[e]),i=Q.useMemo(()=>!up(e)||Yx(e)?null:e.children.map((r,o)=>L.jsx(Zx,{node:r},o)),[e]);return L.jsx("span",Object.assign({className:f},t,{children:i}))}function hp(){return Q.useContext(qx)}function jk(){const f=hp();Qe(f);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=f,[i,r]=lc(),{value:o,error:c}=i,{customTextRenderer:u,page:d}=f;function p(){o&&t&&t(o)}function m(){c&&(an(!1,c.toString()),e&&e(c))}return Q.useEffect(function(){r({type:"RESET"})},[r,d]),Q.useEffect(function(){if(u||!d)return;const w=Dh(d.getStructTree()),A=w;return w.promise.then(S=>{r({type:"RESOLVE",value:S})}).catch(S=>{r({type:"REJECT",error:S})}),()=>ba(A)},[u,d,r]),Q.useEffect(()=>{if(o!==void 0){if(o===!1){m();return}p()}},[o]),o?L.jsx(Zx,{className:"react-pdf__Page__structTree structTree",node:o}):null}const _A=jx;function zk(f){const e=hp();Qe(e);const t=Object.assign(Object.assign({},e),f),{_className:i,canvasBackground:r,devicePixelRatio:o=Ek(),onRenderError:c,onRenderSuccess:u,page:d,renderForms:p,renderTextLayer:m,rotate:v,scale:w}=t,{canvasRef:A}=f;Qe(d);const S=Q.useRef(null);function E(){d&&u&&u(Ny(d,w))}function P(D){kk(D)||(an(!1,D.toString()),c&&c(D))}const k=Q.useMemo(()=>d.getViewport({scale:w*o,rotation:v}),[o,d,v,w]),R=Q.useMemo(()=>d.getViewport({scale:w,rotation:v}),[d,v,w]);Q.useEffect(function(){if(!d)return;d.cleanup();const{current:B}=S;if(!B)return;B.width=k.width,B.height=k.height,B.style.width=`${Math.floor(R.width)}px`,B.style.height=`${Math.floor(R.height)}px`,B.style.visibility="hidden";const H={annotationMode:p?_A.ENABLE_FORMS:_A.ENABLE,canvasContext:B.getContext("2d",{alpha:!1}),viewport:k};r&&(H.background=r);const V=d.render(H),X=V;return V.promise.then(()=>{B.style.visibility="",E()}).catch(P),()=>ba(X)},[r,d,p,k,R]);const F=Q.useCallback(()=>{const{current:D}=S;D&&(D.width=0,D.height=0)},[]);return Q.useEffect(()=>F,[F]),L.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:Xx(A,S),style:{display:"block",userSelect:"none"},children:m?L.jsx(jk,{}):null})}function Hk(f){return"str"in f}function Bk(){const f=hp();Qe(f);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:i,onRenderTextLayerError:r,onRenderTextLayerSuccess:o,page:c,pageIndex:u,pageNumber:d,rotate:p,scale:m}=f;Qe(c);const[v,w]=lc(),{value:A,error:S}=v,E=Q.useRef(null);an(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function P(){A&&i&&i(A)}function k(){S&&(an(!1,S.toString()),t&&t(S))}Q.useEffect(function(){w({type:"RESET"})},[c,w]),Q.useEffect(function(){if(!c)return;const X=Dh(c.getTextContent()),ee=X;return X.promise.then(se=>{w({type:"RESOLVE",value:se})}).catch(se=>{w({type:"REJECT",error:se})}),()=>ba(ee)},[c,w]),Q.useEffect(()=>{if(A!==void 0){if(A===!1){k();return}P()}},[A]);const R=Q.useCallback(()=>{o&&o()},[o]),F=Q.useCallback(V=>{an(!1,V.toString()),r&&r(V)},[r]);function D(){const V=E.current;V&&V.classList.add("selecting")}function B(){const V=E.current;V&&V.classList.remove("selecting")}const H=Q.useMemo(()=>c.getViewport({scale:m,rotation:p}),[c,p,m]);return Q.useLayoutEffect(function(){if(!c||!A)return;const{current:X}=E;if(!X)return;X.innerHTML="";const ee=c.streamTextContent({includeMarkedContent:!0}),se={container:X,textContentSource:ee,viewport:H},ie=new zx(se),ye=ie;return ie.render().then(()=>{const le=document.createElement("div");le.className="endOfContent",X.append(le);const ce=X.querySelectorAll('[role="presentation"]');if(e){let ve=0;A.items.forEach((fe,Z)=>{if(!Hk(fe))return;const U=ce[ve];if(!U)return;const G=e(Object.assign({pageIndex:u,pageNumber:d,itemIndex:Z},fe));U.innerHTML=G,ve+=fe.str&&fe.hasEOL?2:1})}R()}).catch(F),()=>ba(ye)},[e,F,R,c,u,d,A,H]),L.jsx("div",{className:lp("react-pdf__Page__textContent","textLayer"),onMouseUp:B,onMouseDown:D,ref:E})}function Uk(){const f=Gx(),e=hp();Qe(e);const t=Object.assign(Object.assign({},f),e),{imageResourcesPath:i,linkService:r,onGetAnnotationsError:o,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:d,page:p,pdf:m,renderForms:v,rotate:w,scale:A=1}=t;Qe(m),Qe(p),Qe(r);const[S,E]=lc(),{value:P,error:k}=S,R=Q.useRef(null);an(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function F(){P&&c&&c(P)}function D(){k&&(an(!1,k.toString()),o&&o(k))}Q.useEffect(function(){E({type:"RESET"})},[E,p]),Q.useEffect(function(){if(!p)return;const ee=Dh(p.getAnnotations()),se=ee;return ee.promise.then(ie=>{E({type:"RESOLVE",value:ie})}).catch(ie=>{E({type:"REJECT",error:ie})}),()=>{ba(se)}},[E,p]),Q.useEffect(()=>{if(P!==void 0){if(P===!1){D();return}F()}},[P]);function B(){d&&d()}function H(X){an(!1,`${X}`),u&&u(X)}const V=Q.useMemo(()=>p.getViewport({scale:A,rotation:w}),[p,w,A]);return Q.useEffect(function(){if(!m||!p||!r||!P)return;const{current:ee}=R;if(!ee)return;const se=V.clone({dontFlip:!0}),ie={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:ee,l10n:null,page:p,structTreeLayer:null,viewport:se},ye={annotations:P,annotationStorage:m.annotationStorage,div:ee,imageResourcesPath:i,linkService:r,page:p,renderForms:v,viewport:se};ee.innerHTML="";try{new Ox(ie).render(ye),B()}catch(le){H(le)}return()=>{}},[P,i,r,p,m,v,V]),L.jsx("div",{className:lp("react-pdf__Page__annotations","annotationLayer"),ref:R})}var $k=function(f,e){var t={};for(var i in f)Object.prototype.hasOwnProperty.call(f,i)&&e.indexOf(i)<0&&(t[i]=f[i]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(f);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(f,i[r])&&(t[i[r]]=f[i[r]]);return t};const SA=1;function EA(f){const e=Gx(),t=Object.assign(Object.assign({},e),f),{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:o,canvasRef:c,children:u,className:d,customRenderer:p,customTextRenderer:m,devicePixelRatio:v,error:w="Failed to load the page.",height:A,inputRef:S,loading:E="Loading page…",noData:P="No page specified.",onGetAnnotationsError:k,onGetAnnotationsSuccess:R,onGetStructTreeError:F,onGetStructTreeSuccess:D,onGetTextError:B,onGetTextSuccess:H,onLoadError:V,onLoadSuccess:X,onRenderAnnotationLayerError:ee,onRenderAnnotationLayerSuccess:se,onRenderError:ie,onRenderSuccess:ye,onRenderTextLayerError:le,onRenderTextLayerSuccess:ce,pageIndex:ve,pageNumber:fe,pdf:Z,registerPage:U,renderAnnotationLayer:G=!0,renderForms:W=!1,renderMode:N="canvas",renderTextLayer:$=!0,rotate:ue,scale:be=SA,unregisterPage:ke,width:we}=t,me=$k(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Le,Oe]=lc(),{value:Ne,error:Ii}=Le,Qs=Q.useRef(null);Qe(Z);const Ue=go(fe)?fe-1:ve??null,it=fe??(go(ve)?ve+1:null),Et=ue??(Ne?Ne.rotate:null),gt=Q.useMemo(()=>{if(!Ne)return null;let Fi=1;const os=be??SA;if(we||A){const eo=Ne.getViewport({scale:1,rotation:Et});we?Fi=we/eo.width:A&&(Fi=A/eo.height)}return os*Fi},[A,Ne,Et,be,we]);Q.useEffect(function(){return()=>{go(Ue)&&r&&ke&&ke(Ue)}},[r,Z,Ue,ke]);function Ni(){if(X){if(!Ne||!gt)return;X(Ny(Ne,gt))}if(r&&U){if(!go(Ue)||!Qs.current)return;U(Ue,Qs.current)}}function Zs(){Ii&&(an(!1,Ii.toString()),V&&V(Ii))}Q.useEffect(function(){Oe({type:"RESET"})},[Oe,Z,Ue]),Q.useEffect(function(){if(!Z||!it)return;const os=Dh(Z.getPage(it)),eo=os;return os.promise.then(as=>{Oe({type:"RESOLVE",value:as})}).catch(as=>{Oe({type:"REJECT",error:as})}),()=>ba(eo)},[Oe,Z,it]),Q.useEffect(()=>{if(Ne!==void 0){if(Ne===!1){Zs();return}Ni()}},[Ne,gt]);const cc=Q.useMemo(()=>Ne&&go(Ue)&&it&&go(Et)&&go(gt)?{_className:i,canvasBackground:o,customTextRenderer:m,devicePixelRatio:v,onGetAnnotationsError:k,onGetAnnotationsSuccess:R,onGetStructTreeError:F,onGetStructTreeSuccess:D,onGetTextError:B,onGetTextSuccess:H,onRenderAnnotationLayerError:ee,onRenderAnnotationLayerSuccess:se,onRenderError:ie,onRenderSuccess:ye,onRenderTextLayerError:le,onRenderTextLayerSuccess:ce,page:Ne,pageIndex:Ue,pageNumber:it,renderForms:W,renderTextLayer:$,rotate:Et,scale:gt}:null,[i,o,m,v,k,R,F,D,B,H,ee,se,ie,ye,le,ce,Ne,Ue,it,W,$,Et,gt]),Jr=Q.useMemo(()=>Bx(me,()=>Ne&&(gt?Ny(Ne,gt):void 0)),[me,Ne,gt]),ci=`${Ue}@${gt}/${Et}`;function uc(){switch(N){case"custom":return Qe(p),L.jsx(p,{},`${ci}_custom`);case"none":return null;case"canvas":default:return L.jsx(zk,{canvasRef:c},`${ci}_canvas`)}}function Oh(){return $?L.jsx(Bk,{},`${ci}_text`):null}function jh(){return G?L.jsx(Uk,{},`${ci}_annotations`):null}function zh(){return L.jsxs(qx.Provider,{value:cc,children:[uc(),Oh(),jh(),u]})}function Hh(){return it?Z===null||Ne===void 0||Ne===null?L.jsx(cl,{type:"loading",children:typeof E=="function"?E():E}):Z===!1||Ne===!1?L.jsx(cl,{type:"error",children:typeof w=="function"?w():w}):zh():L.jsx(cl,{type:"no-data",children:typeof P=="function"?P():P})}return L.jsx("div",Object.assign({className:lp(i,d),"data-page-number":it,ref:Xx(S,Qs),style:{"--scale-factor":`${gt}`,backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Jr,{children:Hh()}))}Ck();Yy.workerSrc="pdf.worker.mjs";/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=f=>f.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(f,e)=>{const t=Q.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:u="",children:d,...p},m)=>Q.createElement("svg",{ref:m,...Vk,width:r,height:r,stroke:i,strokeWidth:c?Number(o)*24/Number(r):o,className:["lucide",`lucide-${Wk(f)}`,u].join(" "),...p},[...e.map(([v,w])=>Q.createElement(v,w)),...Array.isArray(d)?d:[d]]));return t.displayName=`${f}`,t};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=St("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=St("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=St("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=St("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=St("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=St("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=St("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=St("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=St("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=St("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=St("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=St("Scroll",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=St("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=St("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=St("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=St("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=St("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=St("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=St("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=St("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);Yy.workerSrc="/pdf.worker.min.js";const aT=({className:f=""})=>{const[e,t]=Q.useState(null),[i,r]=Q.useState(null),[o,c]=Q.useState(1),[u,d]=Q.useState(1),[p,m]=Q.useState(0),[v,w]=Q.useState(!1),[A,S]=Q.useState("1"),[E,P]=Q.useState(!1),[k,R]=Q.useState(!0),F=Q.useRef(null),D=Q.useRef(null),B=Q.useCallback(G=>{var N;const W=(N=G.target.files)==null?void 0:N[0];W&&W.type==="application/pdf"?(t(W),c(1),S("1")):alert("请选择有效的PDF文件")},[]),H=Q.useCallback(({numPages:G})=>{console.log("PDF文档加载成功，页数:",G),r(G)},[]),V=Q.useCallback(G=>{console.error("PDF文档加载失败:",G),alert(`PDF文档加载失败: ${G.message}`)},[]),X=Q.useCallback(()=>{if(o>1){const G=o-1;c(G),S(G.toString())}},[o]),ee=Q.useCallback(()=>{if(i&&o<i){const G=o+1;c(G),S(G.toString())}},[o,i]),se=Q.useCallback(G=>{S(G.target.value)},[]),ie=Q.useCallback(G=>{G.preventDefault();const W=parseInt(A,10);i&&W>=1&&W<=i?c(W):S(o.toString())},[A,i,o]),ye=Q.useCallback(()=>{d(G=>Math.min(G+.2,3))},[]),le=Q.useCallback(()=>{d(G=>Math.max(G-.2,.5))},[]),ce=Q.useCallback(()=>{d(1)},[]),ve=Q.useCallback(()=>{if(D.current){const G=D.current.clientWidth-40;d(G/595)}},[]),fe=Q.useCallback(()=>{m(G=>(G+90)%360)},[]),Z=Q.useCallback(()=>{w(G=>!G)},[]);Q.useEffect(()=>{const G=W=>{if(e)switch(W.key){case"ArrowLeft":E||(W.preventDefault(),X());break;case"ArrowRight":E||(W.preventDefault(),ee());break;case"+":case"=":(W.ctrlKey||W.metaKey)&&(W.preventDefault(),ye());break;case"-":(W.ctrlKey||W.metaKey)&&(W.preventDefault(),le());break;case"0":(W.ctrlKey||W.metaKey)&&(W.preventDefault(),ce());break;case"r":(W.ctrlKey||W.metaKey)&&(W.preventDefault(),fe());break;case"f":(W.ctrlKey||W.metaKey)&&(W.preventDefault(),Z());break;case"c":(W.ctrlKey||W.metaKey)&&(W.preventDefault(),P(!E));break;case"t":(W.ctrlKey||W.metaKey)&&(W.preventDefault(),R(!k));break}};return window.addEventListener("keydown",G),()=>window.removeEventListener("keydown",G)},[e,X,ee,ye,le,ce,fe,Z,E,k]);const U=Q.useCallback(G=>{(G.ctrlKey||G.metaKey)&&(G.preventDefault(),G.deltaY<0?ye():le())},[ye,le]);return L.jsxs("div",{className:`flex flex-col h-full bg-gray-50 ${f}`,children:[k&&L.jsx("div",{className:`flex items-center justify-between p-4 bg-white border-b border-gray-200 shadow-sm ${E?"sticky top-0 z-10":""}`,children:L.jsxs("div",{className:"flex items-center space-x-4",children:[L.jsxs("button",{onClick:()=>{var G;return(G=F.current)==null?void 0:G.click()},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[L.jsx(nT,{size:20}),L.jsx("span",{children:"上传PDF"})]}),L.jsx("input",{ref:F,type:"file",accept:".pdf",onChange:B,className:"hidden"}),e&&L.jsxs(L.Fragment,{children:[!E&&L.jsxs("div",{className:"flex items-center space-x-2",children:[L.jsx("button",{onClick:X,disabled:o<=1,className:"p-2 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:L.jsx(Jx,{size:20})}),L.jsxs("form",{onSubmit:ie,className:"flex items-center space-x-2",children:[L.jsx("input",{type:"text",value:A,onChange:se,className:"w-16 px-2 py-1 text-center border border-gray-300 rounded"}),L.jsxs("span",{className:"text-gray-600",children:["/ ",i||0]})]}),L.jsx("button",{onClick:ee,disabled:!i||o>=i,className:"p-2 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:L.jsx(e1,{size:20})})]}),L.jsxs("div",{className:"flex items-center space-x-2 border-l border-gray-300 pl-4",children:[L.jsx("button",{onClick:le,className:"p-2 rounded-lg hover:bg-gray-100",title:"缩小",children:L.jsx(oT,{size:20})}),L.jsxs("span",{className:"text-sm text-gray-600 min-w-[60px] text-center",children:[Math.round(u*100),"%"]}),L.jsx("button",{onClick:ye,className:"p-2 rounded-lg hover:bg-gray-100",title:"放大",children:L.jsx(rT,{size:20})}),L.jsx("button",{onClick:ve,className:"px-3 py-1 text-sm rounded-lg hover:bg-gray-100",title:"适应宽度",children:"适应宽度"}),L.jsx("button",{onClick:ce,className:"px-3 py-1 text-sm rounded-lg hover:bg-gray-100",title:"重置缩放",children:L.jsx(Yk,{size:16})})]}),L.jsxs("div",{className:"flex items-center space-x-2 border-l border-gray-300 pl-4",children:[L.jsx("button",{onClick:fe,className:"p-2 rounded-lg hover:bg-gray-100",title:"旋转",children:L.jsx(Zk,{size:20})}),L.jsx("button",{onClick:Z,className:"p-2 rounded-lg hover:bg-gray-100",title:"全屏",children:L.jsx(Qk,{size:20})}),L.jsx("button",{onClick:()=>P(!E),className:`p-2 rounded-lg transition-colors ${E?"bg-blue-100 text-blue-600 hover:bg-blue-200":"hover:bg-gray-100"}`,title:E?"单页模式":"连续滚动模式",children:E?L.jsx(kA,{size:20}):L.jsx(Jk,{size:20})}),L.jsx("button",{onClick:()=>R(!1),className:"p-2 rounded-lg hover:bg-gray-100",title:"隐藏工具栏",children:L.jsx(Xk,{size:20})})]})]})]})}),!k&&L.jsx("div",{className:"fixed top-4 left-4 z-40",children:L.jsx("button",{onClick:()=>R(!0),className:"p-2 bg-white bg-opacity-90 rounded-lg shadow-lg hover:bg-opacity-100 transition-all",title:"显示工具栏",children:L.jsx(kA,{size:20})})}),L.jsx("div",{ref:D,className:`flex-1 overflow-auto bg-gray-100 ${v?"fixed inset-0 z-50 bg-gray-900":""}`,onWheel:U,children:e?L.jsx("div",{className:`${E?"space-y-4":"flex justify-center"} p-4`,children:L.jsx(Ik,{file:e,onLoadSuccess:H,onLoadError:V,loading:L.jsx("div",{className:"flex items-center justify-center h-64",children:L.jsx("div",{className:"text-lg text-gray-600",children:"加载中..."})}),error:L.jsx("div",{className:"flex items-center justify-center h-64",children:L.jsx("div",{className:"text-lg text-red-600",children:"加载PDF失败"})}),children:E?Array.from(new Array(i),(G,W)=>L.jsx("div",{className:"flex justify-center",children:L.jsx(EA,{pageNumber:W+1,scale:u,rotate:p,loading:L.jsx("div",{className:"flex items-center justify-center h-64",children:L.jsxs("div",{className:"text-lg text-gray-600",children:["渲染页面 ",W+1," 中..."]})}),className:"shadow-lg"})},`page_${W+1}`)):L.jsx(EA,{pageNumber:o,scale:u,rotate:p,loading:L.jsx("div",{className:"flex items-center justify-center h-64",children:L.jsx("div",{className:"text-lg text-gray-600",children:"渲染页面中..."})}),className:"shadow-lg"})})}):L.jsx("div",{className:"flex items-center justify-center h-full",children:L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"text-6xl text-gray-300 mb-4",children:"📄"}),L.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"选择一个PDF文件开始阅读"}),L.jsx("p",{className:"text-gray-500 mb-4",children:"支持拖拽上传或点击按钮选择文件"}),L.jsx("div",{className:"flex flex-col items-center space-y-3",children:L.jsx("button",{onClick:()=>{var G;return(G=F.current)==null?void 0:G.click()},className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"选择PDF文件"})})]})})}),v&&L.jsx("button",{onClick:Z,className:"fixed top-4 right-4 z-60 p-2 bg-black bg-opacity-50 text-white rounded-lg hover:bg-opacity-70",children:"退出全屏"})]})},PA=f=>{let e;const t=new Set,i=(p,m)=>{const v=typeof p=="function"?p(e):p;if(!Object.is(v,e)){const w=e;e=m??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(A=>A(e,w))}},r=()=>e,u={setState:i,getState:r,getInitialState:()=>d,subscribe:p=>(t.add(p),()=>t.delete(p))},d=e=f(i,r,u);return u},lT=f=>f?PA(f):PA,cT=f=>f;function uT(f,e=cT){const t=pm.useSyncExternalStore(f.subscribe,()=>e(f.getState()),()=>e(f.getInitialState()));return pm.useDebugValue(t),t}const hT=f=>{const e=lT(f),t=i=>uT(e,i);return Object.assign(t,e),t},dT=f=>hT;function fT(f,e){let t;try{t=f()}catch{return}return{getItem:r=>{var o;const c=d=>d===null?null:JSON.parse(d,void 0),u=(o=t.getItem(r))!=null?o:null;return u instanceof Promise?u.then(c):c(u)},setItem:(r,o)=>t.setItem(r,JSON.stringify(o,void 0)),removeItem:r=>t.removeItem(r)}}const Fy=f=>e=>{try{const t=f(e);return t instanceof Promise?t:{then(i){return Fy(i)(t)},catch(i){return this}}}catch(t){return{then(i){return this},catch(i){return Fy(i)(t)}}}},pT=(f,e)=>(t,i,r)=>{let o={storage:fT(()=>localStorage),partialize:E=>E,version:0,merge:(E,P)=>({...P,...E}),...e},c=!1;const u=new Set,d=new Set;let p=o.storage;if(!p)return f((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...E)},i,r);const m=()=>{const E=o.partialize({...i()});return p.setItem(o.name,{state:E,version:o.version})},v=r.setState;r.setState=(E,P)=>{v(E,P),m()};const w=f((...E)=>{t(...E),m()},i,r);r.getInitialState=()=>w;let A;const S=()=>{var E,P;if(!p)return;c=!1,u.forEach(R=>{var F;return R((F=i())!=null?F:w)});const k=((P=o.onRehydrateStorage)==null?void 0:P.call(o,(E=i())!=null?E:w))||void 0;return Fy(p.getItem.bind(p))(o.name).then(R=>{if(R)if(typeof R.version=="number"&&R.version!==o.version){if(o.migrate){const F=o.migrate(R.state,R.version);return F instanceof Promise?F.then(D=>[!0,D]):[!0,F]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,R.state];return[!1,void 0]}).then(R=>{var F;const[D,B]=R;if(A=o.merge(B,(F=i())!=null?F:w),t(A,!0),D)return m()}).then(()=>{k==null||k(A,void 0),A=i(),c=!0,d.forEach(R=>R(A))}).catch(R=>{k==null||k(void 0,R)})};return r.persist={setOptions:E=>{o={...o,...E},E.storage&&(p=E.storage)},clearStorage:()=>{p==null||p.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>S(),hasHydrated:()=>c,onHydrate:E=>(u.add(E),()=>{u.delete(E)}),onFinishHydration:E=>(d.add(E),()=>{d.delete(E)})},o.skipHydration||S(),A||w},gT=pT,mT=[{id:"basic-generator",name:"基础发电机",cost:15,baseProduction:.1,count:0,description:"一个简单的金币生产设备",icon:"⚡"},{id:"advanced-generator",name:"高级发电机",cost:100,baseProduction:1,count:0,description:"效率更高的发电设备",icon:"🔋"},{id:"solar-panel",name:"太阳能板",cost:1100,baseProduction:8,count:0,description:"利用太阳能的清洁能源",icon:"☀️"},{id:"wind-turbine",name:"风力发电机",cost:12e3,baseProduction:47,count:0,description:"利用风能的大型发电设备",icon:"💨"},{id:"nuclear-plant",name:"核电站",cost:13e4,baseProduction:260,count:0,description:"超高效率的核能发电站",icon:"⚛️"}],yT=[{id:"efficiency-1",name:"效率提升 I",cost:500,multiplier:2,isPurchased:!1,description:"将所有生产设备效率翻倍",icon:"⚙️"},{id:"efficiency-2",name:"效率提升 II",cost:5e3,multiplier:2,isPurchased:!1,description:"再次将所有生产设备效率翻倍",icon:"🔧"},{id:"auto-click",name:"自动点击",cost:1e4,multiplier:1.5,isPurchased:!1,description:"即使在处理事件时也能持续生产",icon:"🤖"}],dp=dT()(gT((f,e)=>({gold:30,goldPerSecond:0,isGamebarExpanded:!1,isIdleProducing:!0,equipment:mT,upgrades:yT,productionMultiplier:1,boostEndTime:0,malfunctionEndTime:0,activeEvent:null,lastEventTime:Date.now(),toggleGamebar:()=>f(t=>({isGamebarExpanded:!t.isGamebarExpanded,isIdleProducing:!!t.isGamebarExpanded})),addGold:t=>f(i=>({gold:i.gold+t})),buyEquipment:t=>f(i=>{const r=i.equipment.find(c=>c.id===t);if(!r||i.gold<r.cost)return i;const o=i.equipment.map(c=>c.id===t?{...c,count:c.count+1,cost:Math.floor(c.cost*1.15)}:c);return{gold:i.gold-r.cost,equipment:o}}),buyUpgrade:t=>f(i=>{const r=i.upgrades.find(c=>c.id===t);if(!r||i.gold<r.cost||r.isPurchased)return i;const o=i.upgrades.map(c=>c.id===t?{...c,isPurchased:!0}:c);return{gold:i.gold-r.cost,upgrades:o,productionMultiplier:i.productionMultiplier*r.multiplier}}),handleEvent:t=>f(i=>{if(!i.activeEvent)return i;const r=Date.now();let o={...i,activeEvent:null};if(t==="accept")switch(i.activeEvent.type){case"malfunction":o.malfunctionEndTime=0;break;case"boost":o.boostEndTime=r+(i.activeEvent.boostDuration||3e4);break;case"reward":o.gold=i.gold+(i.activeEvent.reward||0);break}else i.activeEvent.type==="malfunction"&&(o.malfunctionEndTime=r+6e4);return o}),dismissEvent:()=>f({activeEvent:null}),updateProduction:()=>f(t=>{const i=Date.now();let r=0;return t.equipment.forEach(o=>{r+=o.baseProduction*o.count}),r*=t.productionMultiplier,i<t.boostEndTime&&(r*=3),i<t.malfunctionEndTime&&(r*=.1),{goldPerSecond:r}}),setIdleProducing:t=>f({isIdleProducing:t}),generateEvent:()=>f(t=>{const i=Date.now();if(i-t.lastEventTime<3e4||t.activeEvent)return t;const r=["malfunction","boost","reward"],o=r[Math.floor(Math.random()*r.length)];let c;switch(o){case"malfunction":c={id:`malfunction-${i}`,type:"malfunction",title:"设备故障！",description:"生产设备出现故障，需要立即修复",icon:"⚠️",timestamp:i};break;case"boost":c={id:`boost-${i}`,type:"boost",title:"生产加速！",description:"获得30秒的3倍生产加速",boostMultiplier:3,boostDuration:3e4,icon:"🚀",timestamp:i};break;case"reward":const u=Math.floor(t.goldPerSecond*10+Math.random()*100);c={id:`reward-${i}`,type:"reward",title:"意外收获！",description:"发现了一些额外的金币！",reward:u,icon:"💰",timestamp:i};break}return{activeEvent:c,lastEventTime:i}}),initializeGame:()=>f(t=>({...t,activeEvent:null,boostEndTime:0,malfunctionEndTime:0,lastEventTime:Date.now()}))}),{name:"pdf-idle-game-storage",version:1})),vT=({className:f=""})=>{const{gold:e,goldPerSecond:t,isGamebarExpanded:i,equipment:r,upgrades:o,productionMultiplier:c,boostEndTime:u,malfunctionEndTime:d,toggleGamebar:p,buyEquipment:m,buyUpgrade:v}=dp(),[w,A]=Q.useState("equipment"),S=R=>R>=1e9?(R/1e9).toFixed(2)+"B":R>=1e6?(R/1e6).toFixed(2)+"M":R>=1e3?(R/1e3).toFixed(2)+"K":R.toFixed(2),E=R=>R>=1e12?(R/1e12).toFixed(2)+"T":R>=1e9?(R/1e9).toFixed(2)+"B":R>=1e6?(R/1e6).toFixed(2)+"M":R>=1e3?(R/1e3).toFixed(2)+"K":Math.floor(R).toString(),k=(()=>{const R=Date.now();return R<d?{icon:"⚠️",color:"text-red-500",label:"故障中"}:R<u?{icon:"🚀",color:"text-green-500",label:"加速中"}:{icon:"💰",color:"text-yellow-500",label:"正常运行"}})();return i?L.jsxs("div",{className:`fixed right-0 top-0 h-full w-80 bg-white shadow-xl border-l border-gray-200 z-40 ${f}`,children:[L.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-purple-600 text-white",children:[L.jsxs("div",{className:"flex items-center space-x-2",children:[L.jsx("span",{className:k.color,children:k.icon}),L.jsx("h2",{className:"font-bold",children:"挂机工厂"})]}),L.jsx("button",{onClick:p,className:"p-1 hover:bg-white hover:bg-opacity-20 rounded",children:L.jsx(e1,{size:20})})]}),L.jsxs("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-orange-50 border-b border-gray-200",children:[L.jsxs("div",{className:"flex items-center justify-between mb-2",children:[L.jsxs("div",{className:"flex items-center space-x-2",children:[L.jsx(CA,{size:24,className:"text-yellow-600"}),L.jsx("span",{className:"text-2xl font-bold text-gray-800",children:E(e)})]}),L.jsxs("div",{className:"text-right",children:[L.jsx("div",{className:"text-sm text-gray-600",children:"每秒收益"}),L.jsxs("div",{className:"text-lg font-semibold text-green-600",children:["+",S(t)]})]})]}),L.jsxs("div",{className:"text-xs text-gray-500",children:["状态: ",L.jsx("span",{className:k.color,children:k.label}),c>1&&L.jsxs("span",{className:"ml-2 text-blue-600",children:["• 效率倍数: ",c.toFixed(1),"x"]})]})]}),L.jsxs("div",{className:"flex border-b border-gray-200",children:[L.jsxs("button",{onClick:()=>A("equipment"),className:`flex-1 flex items-center justify-center space-x-2 py-3 px-4 ${w==="equipment"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[L.jsx(eT,{size:18}),L.jsx("span",{children:"设备"})]}),L.jsxs("button",{onClick:()=>A("upgrades"),className:`flex-1 flex items-center justify-center space-x-2 py-3 px-4 ${w==="upgrades"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[L.jsx(tT,{size:18}),L.jsx("span",{children:"升级"})]})]}),L.jsxs("div",{className:"flex-1 overflow-y-auto",children:[w==="equipment"&&L.jsxs("div",{className:"p-4 space-y-3",children:[L.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"生产设备"}),r.map(R=>{const F=e>=R.cost,D=R.baseProduction*R.count*c;return L.jsx("div",{className:`p-3 border rounded-lg ${F?"border-green-200 bg-green-50 hover:bg-green-100":"border-gray-200 bg-gray-50"} transition-colors`,children:L.jsxs("div",{className:"flex items-start space-x-3",children:[L.jsx("div",{className:"text-2xl",children:R.icon}),L.jsxs("div",{className:"flex-1 min-w-0",children:[L.jsxs("div",{className:"flex items-center justify-between mb-1",children:[L.jsx("h4",{className:"font-medium text-gray-800 truncate",children:R.name}),L.jsx("span",{className:"text-sm font-medium text-gray-600",children:R.count})]}),L.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:R.description}),L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsxs("div",{className:"text-xs",children:[L.jsxs("div",{className:"text-gray-500",children:["+",S(R.baseProduction),"/秒"]}),D>0&&L.jsxs("div",{className:"text-green-600 font-medium",children:["总产出: +",S(D),"/秒"]})]}),L.jsx("button",{onClick:()=>m(R.id),disabled:!F,className:`px-3 py-1 rounded text-sm font-medium ${F?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"} transition-colors`,children:E(R.cost)})]})]})]})},R.id)})]}),w==="upgrades"&&L.jsxs("div",{className:"p-4 space-y-3",children:[L.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"效率升级"}),o.map(R=>{const F=e>=R.cost&&!R.isPurchased;return L.jsx("div",{className:`p-3 border rounded-lg ${R.isPurchased?"border-blue-200 bg-blue-50":F?"border-purple-200 bg-purple-50 hover:bg-purple-100":"border-gray-200 bg-gray-50"} transition-colors`,children:L.jsxs("div",{className:"flex items-start space-x-3",children:[L.jsx("div",{className:"text-2xl",children:R.icon}),L.jsxs("div",{className:"flex-1 min-w-0",children:[L.jsxs("div",{className:"flex items-center justify-between mb-1",children:[L.jsx("h4",{className:"font-medium text-gray-800 truncate",children:R.name}),R.isPurchased&&L.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"已购买"})]}),L.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:R.description}),L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsx("div",{className:"text-xs",children:L.jsxs("span",{className:"text-purple-600 font-medium",children:["效率: ",R.multiplier,"x"]})}),!R.isPurchased&&L.jsx("button",{onClick:()=>v(R.id),disabled:!F,className:`px-3 py-1 rounded text-sm font-medium ${F?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"} transition-colors`,children:E(R.cost)})]})]})]})},R.id)})]})]})]}):L.jsx("div",{className:`fixed right-0 top-1/2 transform -translate-y-1/2 z-40 ${f}`,children:L.jsx("div",{className:"bg-white rounded-l-xl shadow-lg border border-gray-200 p-3",children:L.jsxs("button",{onClick:p,className:"flex items-center space-x-2 hover:bg-gray-50 rounded-lg p-2 transition-colors",children:[L.jsx(Jx,{size:20,className:"text-gray-600"}),L.jsxs("div",{className:"text-right",children:[L.jsxs("div",{className:"flex items-center space-x-1",children:[L.jsx("span",{className:k.color,children:k.icon}),L.jsx("span",{className:"font-bold text-yellow-600",children:E(e)}),L.jsx(CA,{size:16,className:"text-yellow-600"})]}),L.jsxs("div",{className:"text-xs text-gray-500",children:["+",S(t),"/秒"]})]})]})})})},wT=()=>{const{activeEvent:f,handleEvent:e,dismissEvent:t}=dp(),[i,r]=Q.useState(15);if(Q.useEffect(()=>{if(!f)return;r(15);const d=setInterval(()=>{r(p=>p<=1?(e("ignore"),0):p-1)},1e3);return()=>clearInterval(d)},[f,e]),!f)return null;const c=(()=>{switch(f.type){case"malfunction":return{bgColor:"bg-red-50",borderColor:"border-red-200",iconColor:"text-red-600",icon:TA,acceptText:"立即修复",acceptColor:"bg-red-600 hover:bg-red-700",ignoreText:"稍后处理",ignoreColor:"bg-gray-500 hover:bg-gray-600"};case"boost":return{bgColor:"bg-green-50",borderColor:"border-green-200",iconColor:"text-green-600",icon:sT,acceptText:"激活加速",acceptColor:"bg-green-600 hover:bg-green-700",ignoreText:"忽略",ignoreColor:"bg-gray-500 hover:bg-gray-600"};case"reward":return{bgColor:"bg-yellow-50",borderColor:"border-yellow-200",iconColor:"text-yellow-600",icon:Kk,acceptText:"收集奖励",acceptColor:"bg-yellow-600 hover:bg-yellow-700",ignoreText:"忽略",ignoreColor:"bg-gray-500 hover:bg-gray-600"};default:return{bgColor:"bg-gray-50",borderColor:"border-gray-200",iconColor:"text-gray-600",icon:TA,acceptText:"确认",acceptColor:"bg-blue-600 hover:bg-blue-700",ignoreText:"忽略",ignoreColor:"bg-gray-500 hover:bg-gray-600"}}})();c.icon;const u=d=>d?d>=1e6?`${(d/1e6).toFixed(2)}M`:d>=1e3?`${(d/1e3).toFixed(2)}K`:d.toString():"";return L.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm",children:L.jsxs("div",{className:`relative max-w-md w-full mx-4 ${c.bgColor} ${c.borderColor} border-2 rounded-xl shadow-2xl transform transition-all duration-300 scale-100`,children:[L.jsx("button",{onClick:t,className:"absolute top-3 right-3 p-1 hover:bg-white hover:bg-opacity-50 rounded-full transition-colors",children:L.jsx(iT,{size:20,className:"text-gray-600"})}),L.jsx("div",{className:"absolute top-3 left-3 flex items-center space-x-2",children:L.jsxs("div",{className:"w-8 h-8 relative",children:[L.jsx("svg",{className:"w-8 h-8 transform -rotate-90",viewBox:"0 0 36 36",children:L.jsx("path",{d:`M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831`,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:`${i/15*100}, 100`,className:"text-gray-400"})}),L.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:L.jsx("span",{className:"text-xs font-medium text-gray-600",children:i})})]})}),L.jsxs("div",{className:"p-6 pt-12",children:[L.jsxs("div",{className:"text-center mb-4",children:[L.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-white shadow-lg mb-3",children:L.jsx("div",{className:"text-3xl",children:f.icon})}),L.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:f.title}),L.jsx("p",{className:"text-gray-600 leading-relaxed",children:f.description})]}),L.jsxs("div",{className:"bg-white bg-opacity-50 rounded-lg p-3 mb-4",children:[f.type==="malfunction"&&L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"text-red-600 font-medium mb-1",children:"⚠️ 生产效率降低90%"}),L.jsx("div",{className:"text-sm text-gray-600",children:"立即修复可恢复正常，否则故障将持续1分钟"})]}),f.type==="boost"&&L.jsxs("div",{className:"text-center",children:[L.jsxs("div",{className:"text-green-600 font-medium mb-1",children:["🚀 生产速度提升",f.boostMultiplier,"倍"]}),L.jsxs("div",{className:"text-sm text-gray-600",children:["持续时间：",(f.boostDuration||0)/1e3,"秒"]})]}),f.type==="reward"&&L.jsxs("div",{className:"text-center",children:[L.jsxs("div",{className:"text-yellow-600 font-medium mb-1",children:["💰 奖励金币：",u(f.reward)]}),L.jsx("div",{className:"text-sm text-gray-600",children:"立即收集可获得额外金币"})]})]}),L.jsxs("div",{className:"flex space-x-3",children:[L.jsx("button",{onClick:()=>e("accept"),className:`flex-1 py-3 px-4 text-white font-medium rounded-lg transition-colors ${c.acceptColor}`,children:c.acceptText}),L.jsx("button",{onClick:()=>e("ignore"),className:`flex-1 py-3 px-4 text-white font-medium rounded-lg transition-colors ${c.ignoreColor}`,children:c.ignoreText})]}),L.jsx("div",{className:"mt-3 text-center text-xs text-gray-500",children:"💡 提示：及时处理事件可以提高游戏效率"})]})]})})},AT=()=>{const{isIdleProducing:f,isGamebarExpanded:e,goldPerSecond:t,updateProduction:i,addGold:r,generateEvent:o,activeEvent:c}=dp(),u=Q.useRef(Date.now()),d=Q.useRef(0);return Q.useEffect(()=>{const m=setInterval(()=>{const v=Date.now(),w=(v-u.current)/1e3;if(u.current=v,i(),!e&&f&&t>0){const A=t*w;r(A)}d.current+=w,d.current>=60&&!c&&Math.random()<.6&&(o(),d.current=0),d.current>=90&&!c&&(o(),d.current=0)},100);return()=>clearInterval(m)},[f,e,t,i,r,o,c]),null};function bT(){const{isGamebarExpanded:f,initializeGame:e,setIdleProducing:t}=dp();return Q.useEffect(()=>{e();const i=()=>{document.hidden?t(!1):t(!0)};return document.addEventListener("visibilitychange",i),()=>{document.removeEventListener("visibilitychange",i)}},[e,t]),L.jsxs("div",{className:"h-screen flex flex-col bg-gray-100",children:[L.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 px-6 py-4",children:L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsxs("div",{className:"flex items-center space-x-3",children:[L.jsxs("div",{className:"flex items-center space-x-2",children:[L.jsx(Gk,{className:"text-blue-600",size:24}),L.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"PDF阅读器"})]}),L.jsx("div",{className:"text-gray-400",children:"|"}),L.jsxs("div",{className:"flex items-center space-x-2",children:[L.jsx(qk,{className:"text-purple-600",size:20}),L.jsx("span",{className:"text-gray-600",children:"挂机工厂"})]})]}),L.jsx("div",{className:"flex items-center space-x-4",children:L.jsx("div",{className:"text-sm text-gray-600",children:"💡 收起游戏栏开始挂机赚钱，专心阅读PDF"})})]})}),L.jsxs("div",{className:"flex-1 relative",children:[L.jsx("div",{className:`h-full transition-all duration-300 ${f?"mr-80":"mr-0"}`,children:L.jsx(aT,{})}),L.jsx(vT,{}),L.jsx(wT,{}),L.jsx(AT,{})]}),L.jsx("footer",{className:"bg-white border-t border-gray-200 px-6 py-2",children:L.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[L.jsx("div",{className:"flex items-center space-x-4",children:L.jsx("span",{children:"💡 快捷键：Ctrl+滚轮缩放，← → 翻页，F11全屏"})}),L.jsxs("div",{className:"flex items-center space-x-4",children:[L.jsx("span",{children:"🎮 收起侧边栏进入挂机模式"}),L.jsx("span",{children:"⚡ 每60-90秒触发游戏事件"})]})]})})]})}aS.createRoot(document.getElementById("root")).render(L.jsx(Q.StrictMode,{children:L.jsx(cS,{children:L.jsx(bT,{})})}));
